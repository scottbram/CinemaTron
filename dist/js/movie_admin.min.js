var e="object"==typeof e?e:{};(e={init:function(){$.ajax({url:"/.netlify/functions/at_get_movie?recid=all",dataType:"json"}).done(function(a,s,t){a.length>0&&$.each(a,function(s,t){var i=t.id,l=t.fields,n=l.Title,o=l.Year,r=l.Length,_=l.Rating,v=l.Format,c=(l.Art,"");c+='<div class="movie_rating_stars">';for(var m=1,g=0;g<_;g++)c+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+m+'">&#9733 </span>',m++;var d,h,u,f=5-_;for(g=0;g<f;g++)c+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+m+'">&#9734  </span>',m++;switch(c+="</div>",v){case"DVD":d="selected";break;case"Streaming":h="selected";break;case"VHS":u="selected"}var p='<div class="movie_listing form-group" data-recid="'+i+'"data-haschgs="false"id="movie_listing_'+i+'"><div class="movie_title"><label for="movie_title_'+i+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+i+'" value="'+n+'" data-fldname="Title" data-ogval="'+n+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year"><label for="movie_year_'+i+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+i+'" value="'+o+'" data-fldname="Year" data-ogval="'+o+'" class="form-control" type="number" min="1800" max="2100"></div><div class="movie_length"><label for="movie_length_'+i+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+i+'" value="'+r+'" data-fldname="Length" data-ogval="'+r+'" class="form-control" type="number" min="0" max="500"></div><div class="movie_rating"><label for="movie_rating_'+i+'">Rating</label>'+c+'<input id="movie_rating_'+i+'" value="'+_+'" data-fldname="Rating" data-ogval="'+_+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format"><label for="movie_format_'+i+'">Format</label><select id="movie_format_'+i+'" class="custom-select" data-fldname="Format" data-ogval="'+v+'"><option value="DVD"'+d+'>DVD</option><option value="Streaming"'+h+'>Streaming</option><option value="VHS"'+u+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(p),s+1===a.length&&e.ready()})}).fail(function(e,a,s){$("#movie_list_status").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(s);$("#movie_admin").prepend('<div id="movie_list_status" class="alert alert-warning fade show" role="alert"><span id="movie_list_status_msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:function(){$("#movie_list_status").alert("close"),$(".save_all").show(),e.track_changes_field(),e.rating_hover(),e.rating_click(),e.save_all_click()},track_changes_field:function(){$("#movie_admin_list").on("input change","input",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))})},track_changes_listing:function(a){a.closest(".movie_listing").find("input, select").hasClass("valChg")?a.closest(".movie_listing").attr("data-haschgs",!0):a.closest(".movie_listing").attr("data-haschgs",!1),e.save_all_check()},rating_hover:function(){$(".movie_rating_star").hover(function(){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")},function(){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:function(){$(".movie_rating_star").click(function(e){var a=$(this).attr("data-ratingstar"),s=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+s).val(a).change(),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:function(){},save_all_check:function(){0!==$(".valChg").length?($(".save_all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save_all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:function(){$(".save_item").click(function(a){$(this).prop("disabled",!0);var s=$(this).attr("data-recid");e.save_one(s)})},save_all_click:function(){$(".save_all").click(function(a){$(".save_all").prop("disabled",!0),e.save_all()})},save_item:function(e){var a={ID:e},s={},t=$("#movie_listing_"+e).find(".valChg");$.each(t,function(e,a){var t=$(a).attr("data-fldname"),i=$(a).val();"Year"===t|"Length"===t|"Rating"===t&&(i=Number(i)),s[t]=i}),a.fields=s;var i=JSON.stringify(a);return new Promise(function(e,a){$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:i,success:function(a,s,t){console.log("success event"),e()},error:function(e,s,t){var i;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(s),console.log("errorThrown: "),console.log(t),void 0!==e.responseJSON){i=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else i=e.responseText;a(),alert("Error:\n"+i)},complete:function(){console.log("complete event")}})})},save_one:function(a){e.save_item(a).then(()=>{e.status_msg("save_one_success")},e=>{console.error(e)})},save_all:function(){$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var a=$('.movie_listing[data-haschgs="true"]');$.each(a,function(s,t){var i=$(t).attr("data-recid");e.save_item(i).then(()=>{s+1===a.length&&e.status_msg("save_all_success")},e=>{console.error(e)})})},status_msg:function(e){switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$(".valChg").removeClass("valChg"),$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(e){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vdmllX2FkbWluLmpzIl0sIm5hbWVzIjpbIm1vdmllX2FkbWluIiwiaW5pdCIsIiQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcCIsInRleHRTdGF0dXMiLCJqcVhIUiIsImxlbmd0aCIsImVhY2giLCJpZHgiLCJpdG0iLCJtb3ZpZV9yZWNpZCIsImlkIiwibW92aWVfb2JqIiwiZmllbGRzIiwibW92aWVfdGl0bGUiLCJUaXRsZSIsIm1vdmllX3llYXIiLCJZZWFyIiwibW92aWVfbGVuZ3RoIiwiTGVuZ3RoIiwibW92aWVfcmF0aW5nIiwiUmF0aW5nIiwibW92aWVfZm9ybWF0IiwiRm9ybWF0IiwibW92aWVfcmF0aW5nX3N0YXJzIiwiQXJ0IiwicmF0aW5nc3RhciIsImkiLCJEVkRzZWwiLCJTVFJzZWwiLCJWSFNzZWwiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kIiwic2hvdyIsInRyYWNrX2NoYW5nZXNfZmllbGQiLCJyYXRpbmdfaG92ZXIiLCJyYXRpbmdfY2xpY2siLCJzYXZlX2FsbF9jbGljayIsIm9uIiwiZSIsInRoaXMiLCJhdHRyIiwidmFsIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm5leHRBbGwiLCJyZW1vdmUiLCJ0cmFja19jaGFuZ2VzX2xpc3RpbmciLCJqcU9iaiIsImNsb3Nlc3QiLCJmaW5kIiwiaGFzQ2xhc3MiLCJzYXZlX2FsbF9jaGVjayIsImhvdmVyIiwiaHRtbCIsInByZXZBbGwiLCJzaWJsaW5ncyIsImNsaWNrIiwibW92aWVfcmF0aW5nX3NlbCIsImNoYW5nZSIsInNhdmVfb25lX2NoZWNrIiwicHJvcCIsInNhdmVfb25lX2NsaWNrIiwic2F2ZV9vbmUiLCJzYXZlX2FsbCIsInNhdmVfaXRlbSIsInJlcV9vYmoiLCJJRCIsInJlcV9vYmpfZmxkcyIsImNoZ2RGbGRzQXJyIiwiaWR4X2ZsZCIsIml0bV9mbGQiLCJmbGROYW1lIiwiZmxkVmFsIiwiTnVtYmVyIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJQcm9taXNlIiwicHJvbVN1Y2Nlc3MiLCJwcm9tRXJyb3IiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsInJlc3BvbnNlVGV4dCIsImNvbXBsZXRlIiwidGhlbiIsInN0YXR1c19tc2ciLCJlcnJPYmoiLCJjaGdkTW92aWVzQXJyIiwid2luZG93Iiwic2V0VGltZW91dCIsImZhZGVPdXQiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEVBQXlDLGlCQUFsQixFQUErQkEsRUFBYyxJQUN2RUEsRUFBYyxDQUNkQyxLQUFPLFdBQ05DLEVBQUVDLEtBQUssQ0FDTkMsSUFBSyw2Q0FDTEMsU0FBVSxTQUNSQyxLQUFNLFNBQVdDLEVBQU1DLEVBQVlDLEdBS2pDRixFQUFLRyxPQUFTLEdBQ2pCUixFQUFFUyxLQUFLSixFQUFNLFNBQVNLLEVBQUtDLEdBQzFCLElBQUlDLEVBQWNELEVBQUlFLEdBVWxCQyxFQUFjSCxFQUFJSSxPQUNsQkMsRUFBZUYsRUFBVUcsTUFDekJDLEVBQWVKLEVBQVVLLEtBQ3pCQyxFQUFnQk4sRUFBVU8sT0FDMUJDLEVBQWdCUixFQUFVUyxPQUMxQkMsRUFBZ0JWLEVBQVVXLE9BUzFCQyxHQVJjWixFQUFVYSxJQVFILElBQ3hCRCxHQUFzQixtQ0FJdkIsSUFGQSxJQUFJRSxFQUFhLEVBRVJDLEVBQUksRUFBR0EsRUFBSVAsRUFBY08sSUFDakNILEdBQXNCLCtFQUFpRkUsRUFBYSxtQkFFcEhBLElBR0QsSUFVSUUsRUFBUUMsRUFBUUMsRUFUaEJDLEVBRDRCLEVBQytCWCxFQUUvRCxJQUFLTyxFQUFJLEVBQUdBLEVBQUlJLEVBQWdDSixJQUMvQ0gsR0FBc0IsaUZBQW1GRSxFQUFhLG9CQUV0SEEsSUFLRCxP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WXdHLFdBQVcscUJBR3hCQyxJQUNBL0QsUUFBUXdELE1BQU1PLFFBTWxCRCxXQUFhLFNBQVVBLEdBQ3RCLE9BQVFBLEdBQ1AsSUFBSyxtQkFHTCxJQUFLLGlCQUVMLE1BQ0EsSUFBSyxtQkFNSnRHLEVBQUUsV0FBV3NELFlBQVksVUFHekJ0RCxFQUFFLGtEQUFrRHdELFNBRXBEeEQsRUFBRSxrQ0FBa0MwQyxRQUFRLHNGQUc1QytELE9BQU9DLFdBQVksV0FDbEIxRyxFQUFFLGlEQUFpRDJHLFFBQVEsT0FBUSxTQUFVMUQsR0FDNUVqRCxFQUFFa0QsTUFBTU0sWUFFUCxTQU9KekQiLCJmaWxlIjoibW92aWVfYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIG1vdmllLWFkbWluLmpzICovXHJcbnZhciBtb3ZpZV9hZG1pbiA9ICggdHlwZW9mIChtb3ZpZV9hZG1pbikgPT09ICdvYmplY3QnICkgPyBtb3ZpZV9hZG1pbiA6IHt9O1xyXG4obW92aWVfYWRtaW4gPSB7XHJcblx0aW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfZ2V0X21vdmllP3JlY2lkPWFsbCcsXHJcblx0XHRcdGRhdGFUeXBlOiAnanNvbidcclxuXHRcdH0pLmRvbmUoIGZ1bmN0aW9uICggcmVzcCwgdGV4dFN0YXR1cywganFYSFIgKSB7XHJcblxyXG5cdFx0XHQvKmNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2cocmVzcCk7Ki9cclxuXHJcblx0XHRcdGlmIChyZXNwLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHQkLmVhY2gocmVzcCwgZnVuY3Rpb24oaWR4LCBpdG0pIHtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9IGl0bS5pZDtcclxuXHRcdFx0XHRcdC8qKlxyXG5cdFx0XHRcdFx0ICAqIEZpZWxkczpcclxuXHRcdFx0XHRcdCAgKiBUaXRsZVxyXG5cdFx0XHRcdFx0ICAqIFllYXJcclxuXHRcdFx0XHRcdCAgKiBMZW5ndGhcclxuXHRcdFx0XHRcdCAgKiBSYXRpbmdcclxuXHRcdFx0XHRcdCAgKiBGb3JtYXRcclxuXHRcdFx0XHRcdCAgKiBBcnRcclxuXHRcdFx0XHRcdCAgKi9cclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9vYmogXHRcdD0gaXRtLmZpZWxkcztcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV90aXRsZSBcdD0gbW92aWVfb2JqLlRpdGxlO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3llYXIgXHRcdD0gbW92aWVfb2JqLlllYXI7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfbGVuZ3RoIFx0PSBtb3ZpZV9vYmouTGVuZ3RoO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZyBcdD0gbW92aWVfb2JqLlJhdGluZztcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9mb3JtYXQgXHQ9IG1vdmllX29iai5Gb3JtYXQ7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfYXJ0IFx0XHQ9IG1vdmllX29iai5BcnQ7XHJcblxyXG5cdFx0XHRcdFx0LyoqXHJcblx0XHRcdFx0XHQgKiBTdGFyIEFTQ0lJIGNvZGVzXHJcblx0XHRcdFx0XHQgKiAtIC0gLSAtIC0gLSAtIC0gLVxyXG5cdFx0XHRcdFx0ICogU29saWQgc3RhcjogJiM5NzMzO1xyXG5cdFx0XHRcdFx0ICogT3V0bGluZSBzdGFyOiAmIzk3MzQ7XHJcblx0XHRcdFx0XHQgKi9cclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSAnJztcclxuXHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICs9ICc8ZGl2IGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXJzXCI+JztcclxuXHRcdFx0XHRcdC8qKiBTZXQgdGhlIGxvd2VzdCB2YWx1ZSAqL1xyXG5cdFx0XHRcdFx0dmFyIHJhdGluZ3N0YXIgPSAxO1xyXG5cdFx0XHRcdFx0LyoqIEFkZCBhIHNlbGVjdGVkIGluZGljYXRvciB0byB0aGUgb2JqZWN0IHVudGlsIHRoZSBzZWxlY3RlZCByYXRpbmcgdmFsdWUgaXMgcmVhY2hlZCAqL1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtb3ZpZV9yYXRpbmc7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxzcGFuIGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXIgbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWRcIiBkYXRhLXJhdGluZ3N0YXI9XCInICsgcmF0aW5nc3RhciArICdcIj4mIzk3MzMgPC9zcGFuPic7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRyYXRpbmdzdGFyKys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvKiogU3VidHJhY3QgdGhlIHNlbGVjdGVkIHJhdGluZyBmcm9tIHRoZSBoaWdoZXN0IHBvc3NpYmxlIHRvIGdldCBhbiB1bnNlbGVjdGVkL2ZpbGxlciBjb3VudCAqL1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZ19zdGFyX3RvdGFsQ3QgPSA1O1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWRDdCA9IG1vdmllX3JhdGluZ19zdGFyX3RvdGFsQ3QtbW92aWVfcmF0aW5nO1xyXG5cdFx0XHRcdFx0LyoqIEFkZCBhbiB1bnNlbGVjdGVkIGluZGljYXRvciB0byB0aGUgb2JqZWN0IHVudGlsIGZpbGxlciBjb3VudCBpcyByZWFjaGVkICovXHJcblx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZEN0OyBpKyspIHtcclxuXHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICs9ICc8c3BhbiBjbGFzcz1cIm1vdmllX3JhdGluZ19zdGFyIG1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWRcIiBkYXRhLXJhdGluZ3N0YXI9XCInICsgcmF0aW5nc3RhciArICdcIj4mIzk3MzQgIDwvc3Bhbj4nO1xyXG5cclxuXHRcdFx0XHRcdFx0cmF0aW5nc3RhcisrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICs9ICc8L2Rpdj4nO1xyXG5cclxuXHRcdFx0XHRcdHZhciBEVkRzZWwsIFNUUnNlbCwgVkhTc2VsO1xyXG5cdFx0XHRcdFx0c3dpdGNoIChtb3ZpZV9mb3JtYXQpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSAnRFZEJzpcclxuXHRcdFx0XHRcdFx0XHREVkRzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAnU3RyZWFtaW5nJzpcclxuXHRcdFx0XHRcdFx0XHRTVFJzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAnVkhTJzpcclxuXHRcdFx0XHRcdFx0XHRWSFNzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2xpc3RpbmcgPSAnPGRpdiBjbGFzcz1cIm1vdmllX2xpc3RpbmcgZm9ybS1ncm91cFwiICcgK1xyXG5cdFx0XHRcdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnZGF0YS1oYXNjaGdzPVwiZmFsc2VcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCdpZD1cIm1vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJzxkaXYgY2xhc3M9XCJtb3ZpZV9wb3N0ZXJcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3RpdGxlXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIj5UaXRsZSA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KDUwIGNoYXJhY3RlcnMgb3IgbGVzcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfdGl0bGUgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCI1MFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2RldGFpbHNcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfeWVhclwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiPlllYXIgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihmcm9tIDE4MDAgdG8gMjEwMCk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiWWVhclwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3llYXIgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxODAwXCIgbWF4PVwiMjEwMFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9sZW5ndGhcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiPkxlbmd0aCA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGluIG1pbnV0ZXMpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJMZW5ndGhcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgbWF4PVwiNTAwXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZ1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCI+UmF0aW5nPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX3JhdGluZyArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiUmF0aW5nXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMVwiIG1heD1cIjVcIiBoaWRkZW4+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2Zvcm1hdFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCI+Rm9ybWF0PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzZWxlY3QgaWQ9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiIGNsYXNzPVwiY3VzdG9tLXNlbGVjdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJGb3JtYXRcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9mb3JtYXQgKyAnXCInICsnPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vICc8b3B0aW9uIHNlbGVjdGVkPk9wZW4gdGhpcyBzZWxlY3QgbWVudTwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiRFZEXCInICsgRFZEc2VsICsgJz5EVkQ8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlN0cmVhbWluZ1wiJyArIFNUUnNlbCArICc+U3RyZWFtaW5nPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJWSFNcIicgKyBWSFNzZWwgKyAnPlZIUzwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPC9zZWxlY3Q+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHQnPC9kaXY+J1xyXG5cdFx0XHRcdFx0O1xyXG5cclxuXHRcdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0JykuYXBwZW5kKG1vdmllX2xpc3RpbmcpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChpZHgrMSA9PT0gcmVzcC5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0bW92aWVfYWRtaW4ucmVhZHkoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSkuZmFpbCggZnVuY3Rpb24gKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XHJcblx0XHRcdCQoJyNtb3ZpZV9saXN0X3N0YXR1cycpLmFsZXJ0KCdjbG9zZScpO1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cclxuXHRcdFx0dmFyIGVyck1zZyA9ICc8ZGl2IGlkPVwibW92aWVfbGlzdF9zdGF0dXNcIiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmcgZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+JyArXHJcblx0XHRcdFx0XHQnPHNwYW4gaWQ9XCJtb3ZpZV9saXN0X3N0YXR1c19tc2dcIj5UaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIG1vdmllcy48L2JyPlRyeSByZWZyZXNoaW5nIHRoZSBwYWdlIGFuZCBpZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcGxlYXNlIGNvbnRhY3QgdXMuPC9zcGFuPicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nO1xyXG5cdFx0XHRcclxuXHRcdFx0JCgnI21vdmllX2FkbWluJykucHJlcGVuZChlcnJNc2cpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRyZWFkeSA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJyNtb3ZpZV9saXN0X3N0YXR1cycpLmFsZXJ0KCdjbG9zZScpO1xyXG5cclxuXHRcdCQoJy5zYXZlX2FsbCcpLnNob3coKTtcclxuXHRcdFxyXG5cdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19maWVsZCgpO1xyXG5cdFx0bW92aWVfYWRtaW4ucmF0aW5nX2hvdmVyKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5yYXRpbmdfY2xpY2soKTtcclxuXHRcdC8vIG1vdmllX2FkbWluLnNhdmVfb25lX2NsaWNrKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbF9jbGljaygpO1xyXG5cclxuXHRcdC8qdmFyIHRlbXBTYXZlV2FybmluZyA9ICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZyBmYWRlIHNob3dcIiByb2xlPVwiYWxlcnRcIj4nICtcclxuICBcdFx0XHRcdCc8c3Ryb25nPkhFQURTIFVQITwvc3Ryb25nPiBPbmx5IHRoZSBmaXJzdCBtb3ZpZSB0aXRsZSB3aWxsIHNhdmUgYXQgdGhlIG1vbWVudC4uLicgK1xyXG5cdFx0XHQnPC9kaXY+JztcclxuXHJcblx0XHQvLyAkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zJykuaG92ZXIoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9ucycpLmFwcGVuZCh0ZW1wU2F2ZVdhcm5pbmcpO1xyXG5cdFx0Ly8gfSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vICQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnMgLmFsZXJ0JykuYWxlcnQoJ2Nsb3NlJyk7XHJcblx0XHQvLyB9KTsqL1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19maWVsZCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2lucHV0IGNoYW5nZScsICdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIElmIGEgLnZhbENoZ01zZyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRcdC8qaWYgKCAkKHRoaXMpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFmdGVyKCc8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkIHZhbENoZ01zZ1wiPlVuc2F2ZWQgY2hhbmdlPC9zbWFsbD4nKTtcclxuXHRcdFx0XHR9Ki9cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignY2hhbmdlJywgJ3NlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIElmIGEgLnZhbENoZ01zZyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRcdC8qaWYgKCAkKHRoaXMpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFmdGVyKCc8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkIHZhbENoZ01zZ1wiPlVuc2F2ZWQgY2hhbmdlPC9zbWFsbD4nKTtcclxuXHRcdFx0XHR9Ki9cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHR0cmFja19jaGFuZ2VzX2xpc3RpbmcgOiBmdW5jdGlvbiAoanFPYmopIHtcclxuXHRcdHZhciBoYXNDaGdzID0ganFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5maW5kKCdpbnB1dCwgc2VsZWN0JykuaGFzQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdGlmIChoYXNDaGdzKSB7XHJcblx0XHRcdGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1oYXNjaGdzJywgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtaGFzY2hncycsIGZhbHNlKTtcclxuXHRcdH1cclxuXHJcblx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbF9jaGVjaygpO1xyXG5cdH1cclxuXHQsXHJcblx0cmF0aW5nX2hvdmVyIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLm1vdmllX3JhdGluZ19zdGFyJykuaG92ZXIoXHJcblx0XHRcdGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQvKiogTWFrZSBob3ZlcmVkIGl0ZW0gaW50byBzZWxlY3RlZCBzdGF0ZSAqL1xyXG5cdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzMzICcpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBiZWZvcmUgaG92ZXJlZCBpdGVtIGludG8gdGhlIHNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczMyAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKTtcclxuXHJcblx0XHRcdFx0LyoqIFxyXG5cdFx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgaG92ZXJlZCBpdGVtIGludG8gdGhlIHVuc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSB1bnNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JCh0aGlzKS5uZXh0QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5odG1sKCcmIzk3MzQgJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9uZXh0U2liJyk7XHJcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9wcmV2U2liJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9uZXh0U2liJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0LyoqIFJlc2V0IGFsbCBzdGFycyB0byBvcmlnaW5hbCBzdGF0ZSAqL1xyXG5cdFx0XHRcdGlmICggJCh0aGlzKS5oYXNDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKSApIHtcclxuXHRcdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzMzICcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmh0bWwoJyYjOTczNCAnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnLm1vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykuaHRtbCgnJiM5NzMzICcpO1xyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoJy5tb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJykuaHRtbCgnJiM5NzM0ICcpO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH1cclxuXHQsXHJcblx0cmF0aW5nX2NsaWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLm1vdmllX3JhdGluZ19zdGFyJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBtb3ZpZV9yYXRpbmdfc2VsID0gJCh0aGlzKS5hdHRyKCdkYXRhLXJhdGluZ3N0YXInKTtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJCh0aGlzKS5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtcmVjaWQnKTtcclxuXHJcblx0XHRcdCQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS52YWwobW92aWVfcmF0aW5nX3NlbCkuY2hhbmdlKCk7XHJcblx0XHRcdC8vICQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS52YWwobW92aWVfcmF0aW5nX3NlbCk7XHJcblx0XHRcdC8vICQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS5hdHRyKCd2YWx1ZScsIG1vdmllX3JhdGluZ19zZWwpO1xyXG5cclxuXHRcdFx0LyoqIFxyXG5cdFx0XHQgKiBNYWtlIHNlbGN0ZWQgaXRlbSBcclxuXHRcdFx0ICogYW5kIGFsbCBzaWJsaW5nIGl0ZW1zIGJlZm9yZSBpdCBcclxuXHRcdFx0ICogaW50byB0aGUgc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0ICovXHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKTtcclxuXHRcdFx0JCh0aGlzKS5wcmV2QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpO1xyXG5cclxuXHRcdFx0LyoqIFxyXG5cdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGFmdGVyIHNlbGVjdGVkIGl0ZW0gaW50byB0aGUgdW5zZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSB1bnNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdCAqL1xyXG5cdFx0XHQkKHRoaXMpLm5leHRBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lX2NoZWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0Ly8gY2hlY2sgaWYgZmllbGRzIGFzc29jaWF0ZWQgdG8gZ2l2ZW4gc2F2ZSBidXR0b24gaGF2ZSBjaGFuZ2VkXHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbF9jaGVjayA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICggJCgnLnZhbENoZycpLmxlbmd0aCAhPT0gMCApIHtcclxuXHRcdFx0JCgnLnNhdmVfYWxsJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcblxyXG5cdFx0XHQvKiogSWYgYW4gLm1zZ191bnNhdmVkQ2hncyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRpZiAoICQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3Vuc2F2ZWRDaGdzJykubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ191bnNhdmVkQ2hncyBtc2ctd2FybmluZ1wiPlRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMhPC9zbWFsbD4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLnNhdmVfYWxsJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfdW5zYXZlZENoZ3MnKS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lX2NsaWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLnNhdmVfaXRlbScpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHQkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQodGhpcykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4uc2F2ZV9vbmUobW92aWVfcmVjaWQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbF9jbGljayA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJy5zYXZlX2FsbCcpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHQkKCcuc2F2ZV9hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGwoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9pdGVtIDogZnVuY3Rpb24gKG1vdmllX3JlY2lkKSB7XHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J0lEJzogbW92aWVfcmVjaWRcclxuXHRcdH07XHJcblx0XHR2YXIgcmVxX29ial9mbGRzID0ge307XHJcblxyXG5cdFx0LyogY29uc29sZS5sb2coJ21vdmllX3JlY2lkOiAnKTtcclxuXHRcdGNvbnNvbGUubG9nKG1vdmllX3JlY2lkKTsgKi9cclxuXHJcblx0XHR2YXIgY2hnZEZsZHNBcnIgPSAkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmZpbmQoJy52YWxDaGcnKTtcclxuXHJcblx0XHQvKiBjb25zb2xlLmxvZygnY2hnZEZsZHNBcnI6ICcpO1xyXG5cdFx0Y29uc29sZS5sb2coY2hnZEZsZHNBcnIpOyAqL1xyXG5cclxuXHRcdC8qKiBcclxuXHRcdCAqIEZvciBlYWNoIGNoYW5nZWQgZmllbGQsIFxyXG5cdFx0ICogZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgdGhhdCBoYXMgdGhlIGFzc29jaWF0ZWQgZmllbGQgbmFtZSBpbiB0aGUgZGF0YSBzdG9yZVxyXG5cdFx0ICogYWxvbmcgd2l0aCB0aGUgZmllbGQgdmFsdWUgXHJcblx0XHQgKiB0byBidWlsZCBhbiBvYmplY3Qgb2Yga2V5L3ZhbHVlIHBhaXJzIFxyXG5cdFx0ICogdG8gc2VuZCBpbiBlYWNoIHJlcXVlc3RcclxuXHRcdCAqL1xyXG5cclxuXHRcdCQuZWFjaChjaGdkRmxkc0FyciwgZnVuY3Rpb24gKGlkeF9mbGQsIGl0bV9mbGQpIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bV9mbGQpLmF0dHIoJ2RhdGEtZmxkbmFtZScpO1xyXG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG1fZmxkKS52YWwoKTtcclxuXHJcblx0XHRcdGlmICggZmxkTmFtZSA9PT0gJ1llYXInIHwgZmxkTmFtZSA9PT0gJ0xlbmd0aCcgfCBmbGROYW1lID09PSAnUmF0aW5nJyApIHtcclxuXHRcdFx0XHRmbGRWYWwgPSBOdW1iZXIoZmxkVmFsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZE5hbWU6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhmbGROYW1lKTtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2ZsZFZhbDogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZFZhbCk7ICovXHJcblx0XHRcdFxyXG5cdFx0XHRyZXFfb2JqX2ZsZHNbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXFfb2JqLmZpZWxkcyA9IHJlcV9vYmpfZmxkcztcclxuXHJcblx0XHQvKiBjb25zb2xlLmxvZygncmVxX29iajogJyk7XHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTsgKi9cclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdC8qIGNvbnNvbGUubG9nKCdyZXFfc3RyOiAnKTtcclxuXHRcdGNvbnNvbGUubG9nKHJlcV9zdHIpOyAqL1xyXG5cclxuXHRcdHZhciBzYXZlSXRlbVByb20gPSBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKHByb21TdWNjZXNzLCBwcm9tRXJyb3IpIHtcclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X3VwZGF0ZV9tb3ZpZScsXHJcblx0XHRcdFx0dHlwZSA6ICdQQVRDSCcsXHJcblx0XHRcdFx0Ly8gZGF0YVR5cGU6ICdqc29uJyxcclxuXHRcdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdFx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0XHQvKiogcmVzcCB3aWxsIGJlIGZyZXNoIGRhdGEgb2YgdGhlIHNhdmVkIGl0ZW0gKi9cclxuXHRcdFx0XHRcdC8qIGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApOyAqL1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvKiBjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTsgKi9cclxuXHJcblx0XHRcdFx0XHQvLyBtb3ZpZV9hZG1pbi5zdGF0dXNfbXNnKCdzYXZlX2l0ZW1fc3VjY2VzcycpO1xyXG5cclxuXHRcdFx0XHRcdHByb21TdWNjZXNzKCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHByb21FcnJvcigpO1xyXG5cclxuXHRcdFx0XHRcdGFsZXJ0KCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cclxuXHRcdFx0XHRcdC8qPGRpdiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzXCIgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPlxyXG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInNwaW5uZXIgc3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItbWRcIiByb2xlPVwic3RhdHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPlxyXG5cdFx0XHRcdFx0XHQ8c3BhbiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzX21zZ1wiPk1vdmllcyBsb2FkaW5nLi4uPC9zcGFuPlxyXG5cdFx0XHRcdFx0PC9kaXY+Ki9cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBzYXZlSXRlbVByb207XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZSA6IGZ1bmN0aW9uIChtb3ZpZV9yZWNpZCkge1xyXG5cdFx0dmFyIHNhdmVJdGVtID0gbW92aWVfYWRtaW4uc2F2ZV9pdGVtKG1vdmllX3JlY2lkKTtcclxuXHJcblx0XHRzYXZlSXRlbS50aGVuKFxyXG5cdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0LyoqIEZsYWcgYW4gZWxlbWVudCBzbyB0aGUgbWVzc2FnZSBjYW4gYmUgcGxhY2VkIGNvbnRleHR1YWxseSAqL1xyXG5cdFx0XHRcdC8vXHJcblxyXG5cdFx0XHRcdG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfb25lX3N1Y2Nlc3MnKTtcclxuXHRcdFx0fSwgXHJcblx0XHRcdChlcnJPYmopID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVyck9iaik7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfc2F2aW5nQWxsQ2hncyBtc2ctaW5mb1wiPlNhdmluZyBhbGwgY2hhbmdlcy4uLjwvc21hbGw+Jyk7XHJcblxyXG5cdFx0LyoqIE1hbnVhbGx5LXNwZWNpZmllZCB2YWx1ZXMgZm9yIGRldmVsb3BtZW50ICovXHJcblx0XHQvKnZhciBtb3ZpZV9yZWNpZCA9ICdyZWNnWWdqOUhJZnZYVVptbycsXHJcblx0XHRcdG1vdmllX3RpdGxlID0gJCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJyAubW92aWVfdGl0bGUgaW5wdXQnKS52YWwoKSxcclxuXHRcdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdFx0J0lEJzogbW92aWVfcmVjaWQsXHJcblx0XHRcdFx0J1RpdGxlJzogbW92aWVfdGl0bGVcclxuXHRcdFx0fTsqL1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVGhpcyB3aWxsIGJyZWFrIHRoZSByZXF1ZXN0IGFzIGEgd2F5IG9mIGRlbW9pbmcgZXJyb3IgaGFuZGxpbmdcclxuXHRcdCAqL1xyXG5cdFx0Ly8gdmFyIG1vdmllX3RpdGxlIFx0PSAkKCcjJyArIG1vdmllX3JlY2lkICsgJyAubW92aWVfdGl0bGUgaW5wdXQnKTtcclxuXHJcblx0XHQvKiogR2F0aGVyIGNoYW5nZXMgYW5kIHNlbmQgUEFUQ0ggcmVxdWVzdCB0byBBUEkgcGVyIG1vdmllICovXHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogQ2hhbmdlcyBuZWVkIHRvIGJlIGdyb3VwZWQgcGVyIHJlY29yZCAoaS5lLiwgbW92aWUpXHJcblx0XHQgKiBcclxuXHRcdCAqIFByZXR0eSBzdXJlIHRoZSBiZXN0IG9wdGlvbiBpcyB0byBcclxuXHRcdCAqIGZsYWcgYSBwYXJlbnQgZWxlbWVudCAoZS5nLiwgXCIubW92aWVfbGlzdGluZ1wiKSBvbiBjaGFuZ2VzLFxyXG5cdFx0ICogdXNpbmcgdGhhdCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQgXHJcblx0XHQgKiB0byB0cmF2ZXJzZSBkb3duIGNoaWxkcmVuXHJcblx0XHQgKiBhbmQgY29sbGVjdCBjaGFuZ2VzLlxyXG5cdFx0ICpcclxuXHRcdCAqIElmIGFsbCBjaGFuZ2VzIGZvciBhIGdpdmVuIHJlY29yZCBhcmUgYmFja2VkIG91dFxyXG5cdFx0ICogY2xlYXIgZmxhZyBvbiBwYXJlbnQgZWxlbWVudFxyXG5cdFx0ICovXHJcblxyXG5cdFx0dmFyIGNoZ2RNb3ZpZXNBcnIgPSAkKCcubW92aWVfbGlzdGluZ1tkYXRhLWhhc2NoZ3M9XCJ0cnVlXCJdJyk7XHJcblxyXG5cdFx0JC5lYWNoKGNoZ2RNb3ZpZXNBcnIsIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKGl0bSkuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0dmFyIHNhdmVJdGVtID0gbW92aWVfYWRtaW4uc2F2ZV9pdGVtKG1vdmllX3JlY2lkKTtcclxuXHJcblx0XHRcdHNhdmVJdGVtLnRoZW4oXHJcblx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGlkeCsxID09PSBjaGdkTW92aWVzQXJyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9hZG1pbi5zdGF0dXNfbXNnKCdzYXZlX2FsbF9zdWNjZXNzJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgXHJcblx0XHRcdFx0KGVyck9iaikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJPYmopO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c3RhdHVzX21zZyA6IGZ1bmN0aW9uIChzdGF0dXNfbXNnKSB7XHJcblx0XHRzd2l0Y2ggKHN0YXR1c19tc2cpIHtcclxuXHRcdFx0Y2FzZSAnc2F2ZV9vbmVfc3VjY2Vzcyc6XHJcblx0XHRcdFx0Ly8gXHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzYXZlX29uZV9lcnJvcic6XHJcblx0XHRcdFx0Ly8gXHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzYXZlX2FsbF9zdWNjZXNzJzpcclxuXHRcdFx0XHQvKnZhciBtc2cgPSAnPGRpdiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzXCIgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzIGZhZGUgc2hvdyBcIiByb2xlPVwiYWxlcnRcIj4nICtcclxuXHRcdFx0XHRcdCc8c3BhbiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzX21zZ1wiPkNoYW5nZXMgc2F2ZWQuPC9zcGFuPicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nOyovXHJcblxyXG5cdFx0XHRcdC8qKiBSZXNldCBmaWVsZHMgdG8gdW5jaGFuZ2VkIHN0eWxlICovXHJcblx0XHRcdFx0JCgnLnZhbENoZycpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIFJlbW92ZSBhbnkgbWVzc2FnZXMgYWJvdXQgc2F2ZSBzdGF0dXMgKi9cclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ19zYXZlU3RhdHVzJykucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ19jaGdzU2F2ZWQgbXNnLXN1Y2Nlc3NcIj5BbGwgY2hhbmdlcyBzYXZlZC48L3NtYWxsPicpO1xyXG5cclxuXHRcdFx0XHQvKiogQWZ0ZXIgc3BlY2lmaWNlZCBkZWxheSwgZmFkZSB0aGUgbWVzc2FnZSwgdGhlbiByZW1vdmUgZnJvbSBET00gKi9cclxuXHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfY2hnc1NhdmVkJykuZmFkZU91dCgnc2xvdycsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
