var e="object"==typeof e?e:{};(e={init:function(){$.ajax({url:"/.netlify/functions/at_api",dataType:"json"}).done(function(a){a.length>0&&$.each(a,function(t,s){var i=s.id,l=s.fields,o=l.Title,n=l.Year,r=l.Length,v=l.Rating,_=l.Format,c=(l.Art,"");c+='<div class="movie_rating_stars">';for(var g=1,m=0;m<v;m++)c+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+g+'">&#9733 </span>',g++;var d,h,u,f=5-v;for(m=0;m<f;m++)c+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+g+'">&#9734  </span>',g++;switch(c+="</div>",_){case"DVD":d="selected";break;case"Streaming":h="selected";break;case"VHS":u="selected"}var p='<div class="movie_listing form-group" data-recid="'+i+'"data-haschgs="false"id="movie_listing_'+i+'"><div class="movie_title"><label for="movie_title_'+i+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+i+'" value="'+o+'" data-ogval="'+o+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year"><label for="movie_year_'+i+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+i+'" value="'+n+'" data-ogval="'+n+'" class="form-control" type="number" min="1800" max="2100"></div><div class="movie_length"><label for="movie_length_'+i+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+i+'" value="'+r+'" data-ogval="'+r+'" class="form-control" type="number" min="0" max="500"></div><div class="movie_rating"><label for="movie_rating_'+i+'">Rating</label>'+c+'<input id="movie_rating_'+i+'" value="'+v+'" data-ogval="'+v+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format"><label for="movie_format_'+i+'">Format</label><select id="movie_format_'+i+'" class="custom-select" data-ogval="'+_+'"><option value="DVD"'+d+'>DVD</option><option value="Streaming"'+h+'>Streaming</option><option value="VHS"'+u+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(p),t+1===a.length&&e.ready()})})},ready:function(){$("#movie_list_status").alert("close"),$(".save_all").show(),e.track_changes_field(),e.rating_hover(),e.rating_click(),e.save_all_click()},track_changes_field:function(){$("#movie_admin_list").on("input change","input",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))})},track_changes_listing:function(a){a.closest(".movie_listing").find("input, select").hasClass("valChg")?a.closest(".movie_listing").attr("data-haschgs",!0):a.closest(".movie_listing").attr("data-haschgs",!1),e.save_all_check()},rating_hover:function(){$(".movie_rating_star").hover(function(){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")},function(){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:function(){$(".movie_rating_star").click(function(e){var a=$(this).attr("data-ratingstar"),t=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+t).val(a).change(),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_all_check:function(){0!==$(".valChg").length?($(".save_all").prop("disabled",!1),0===$(".save_all").nextAll(".unsavedChgMsg").length&&$(".save_all").after('<small class="text-muted unsavedChgMsg">There are unsaved changes!</small>')):($(".save_all").prop("disabled",!0),$(".save_all").nextAll(".unsavedChgMsg").remove())},save_all_click:function(){$(".save_all").click(function(a){$("#movie_title_recgYgj9HIfvXUZmo").hasClass("valChg")&&e.save_all()})},save_all:function(){var e={ID:"recgYgj9HIfvXUZmo",Title:$("#movie_listing_recgYgj9HIfvXUZmo .movie_title input").val()},a=JSON.stringify(e);$.ajax({url:"/.netlify/functions/at_api",type:"PATCH",contentType:"application/json",data:a,success:function(e,a,t){console.log("success event"),console.log("resp: "),console.log(e),console.log("textStatus: "),console.log(a),window.location.reload(!0)},error:function(e,a,t){var s;console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t),void 0!==e.responseJSON?(err_statusCode=e.responseJSON.statusCode,err_is=e.responseJSON.error,err_msg=e.responseJSON.message,s=err_statusCode+"\n"+err_is+"\n"+err_msg):s=e.responseText,alert("Error:\n"+s)},complete:function(){console.log("complete event")}})},save_one:function(){}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vdmllX2FkbWluLmpzIl0sIm5hbWVzIjpbIm1vdmllX2FkbWluIiwiaW5pdCIsIiQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcCIsImxlbmd0aCIsImVhY2giLCJpZHgiLCJpdG0iLCJtb3ZpZV9yZWNpZCIsImlkIiwibW92aWVfb2JqIiwiZmllbGRzIiwibW92aWVfdGl0bGUiLCJUaXRsZSIsIm1vdmllX3llYXIiLCJZZWFyIiwibW92aWVfbGVuZ3RoIiwiTGVuZ3RoIiwibW92aWVfcmF0aW5nIiwiUmF0aW5nIiwibW92aWVfZm9ybWF0IiwiRm9ybWF0IiwibW92aWVfcmF0aW5nX3N0YXJzIiwiQXJ0IiwicmF0aW5nc3RhciIsImkiLCJEVkRzZWwiLCJTVFJzZWwiLCJWSFNzZWwiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJhbGVydCIsInNob3ciLCJ0cmFja19jaGFuZ2VzX2ZpZWxkIiwicmF0aW5nX2hvdmVyIiwicmF0aW5nX2NsaWNrIiwic2F2ZV9hbGxfY2xpY2siLCJvbiIsImUiLCJ0aGlzIiwiYXR0ciIsInZhbCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJuZXh0QWxsIiwicmVtb3ZlIiwidHJhY2tfY2hhbmdlc19saXN0aW5nIiwianFPYmoiLCJjbG9zZXN0IiwiZmluZCIsImhhc0NsYXNzIiwic2F2ZV9hbGxfY2hlY2siLCJob3ZlciIsImh0bWwiLCJwcmV2QWxsIiwic2libGluZ3MiLCJjbGljayIsIm1vdmllX3JhdGluZ19zZWwiLCJjaGFuZ2UiLCJwcm9wIiwiYWZ0ZXIiLCJzYXZlX2FsbCIsInJlcV9vYmoiLCJJRCIsInJlcV9zdHIiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJ0ZXh0U3RhdHVzIiwianFYaHIiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImpxWEhSIiwiZXJyb3JUaHJvd24iLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsImVycl9zdGF0dXNDb2RlIiwiZXJyX2lzIiwiZXJyX21zZyIsInJlc3BvbnNlVGV4dCIsImNvbXBsZXRlIiwic2F2ZV9vbmUiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEVBQXlDLGlCQUFsQixFQUErQkEsRUFBYyxJQUN2RUEsRUFBYyxDQUNkQyxLQUFPLFdBQ05DLEVBQUVDLEtBQUssQ0FDTkMsSUFBSyw2QkFDTEMsU0FBVSxTQUNSQyxLQUFNLFNBQVVDLEdBS2RBLEVBQUtDLE9BQVMsR0FDakJOLEVBQUVPLEtBQUtGLEVBQU0sU0FBU0csRUFBS0MsR0FDMUIsSUFBSUMsRUFBY0QsRUFBSUUsR0FVbEJDLEVBQWNILEVBQUlJLE9BQ2xCQyxFQUFlRixFQUFVRyxNQUN6QkMsRUFBZUosRUFBVUssS0FDekJDLEVBQWdCTixFQUFVTyxPQUMxQkMsRUFBZ0JSLEVBQVVTLE9BQzFCQyxFQUFnQlYsRUFBVVcsT0FTMUJDLEdBUmNaLEVBQVVhLElBUUgsSUFDeEJELEdBQXNCLG1DQUl2QixJQUZBLElBQUlFLEVBQWEsRUFFUkMsRUFBSSxFQUFHQSxFQUFJUCxFQUFjTyxJQUNqQ0gsR0FBc0IsK0VBQWlGRSxFQUFhLG1CQUVwSEEsSUFHRCxJQVVJRSxFQUFRQyxFQUFRQyxFQVRoQkMsRUFENEIsRUFDK0JYLEVBRS9ELElBQUtPLEVBQUksRUFBR0EsRUFBSUksRUFBZ0NKLElBQy9DSCxHQUFzQixpRkFBbUZFLEVBQWEsb0JBRXRIQSxJQUtELE9BSEFGLEdBQXNCLFNBR2RGLEdBQ1AsSUFBSyxNQUNKTSxFQUFTLFdBQ1YsTUFDQSxJQUFLLFlBQ0pDLEVBQVMsV0FDVixNQUNBLElBQUssTUFDSkMsRUFBUyxXQUlYLElBQUlFLEVBQWdCLHFEQUNEdEIsRUFBYSwwQ0FFUEEsRUFBYyxzREFJUEEsRUFBYyxtR0FDZkEsRUFBYyxZQUM1QkksRUFBYyxpQkFDVEEsRUFBYyxtSkFNSkosRUFBYyw2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QUssWUFBWSxHQUNoQy9ELEVBQUUsYUFBYWdELFFBQVEsa0JBQWtCQyxXQUkzQ1QsZUFBaUIsV0FDaEJ4QyxFQUFFLGFBQWE0RCxNQUFPLFNBQVVsQixHQUMxQjFDLEVBQUUsa0NBQWtDc0QsU0FBUyxXQUNqRHhELEVBQVltRSxjQUtmQSxTQUFXLFdBb0JWLElBMEJJQyxFQUFVLENBQ2JDLEdBM0JpQixvQkE0QmpCcEQsTUFUa0JmLEVBQUUsdURBQXlENkMsT0FZMUV1QixFQUFVQyxLQUFLQyxVQUFVSixHQUU3QmxFLEVBQUVDLEtBQUssQ0FDTkMsSUFBSyw2QkFDTHFFLEtBQU8sUUFFSkMsWUFBYSxtQkFDaEJDLEtBQU1MLEVBQ05NLFFBQVUsU0FBVXJFLEVBQU1zRSxFQUFZQyxHQUVyQ0MsUUFBUUMsSUFBSSxpQkFFWkQsUUFBUUMsSUFBSSxVQUNaRCxRQUFRQyxJQUFJekUsR0FFWndFLFFBQVFDLElBQUksZ0JBQ1pELFFBQVFDLElBQUlILEdBSVpJLE9BQU9DLFNBQVNDLFFBQU8sSUFFeEJDLE1BQVEsU0FBVUMsRUFBT1IsRUFBWVMsR0FhcEMsSUFBSUMsRUFYSlIsUUFBUUMsSUFBSSxlQUVaRCxRQUFRQyxJQUFJLFdBQ1pELFFBQVFDLElBQUlLLEdBRVpOLFFBQVFDLElBQUksZ0JBQ1pELFFBQVFDLElBQUlILEdBRVpFLFFBQVFDLElBQUksaUJBQ1pELFFBQVFDLElBQUlNLFFBSXNCLElBQXZCRCxFQUFNRyxjQUNoQkMsZUFBaUJKLEVBQU1HLGFBQXlCLFdBQ2hERSxPQUFTTCxFQUFNRyxhQUFvQixNQUNuQ0csUUFBVU4sRUFBTUcsYUFBc0IsUUFFdENELEVBQVdFLGVBQWlCLEtBQU9DLE9BQVMsS0FBT0MsU0FFbkRKLEVBQVdGLEVBQU1PLGFBR2xCdkQsTUFBTSxXQUFha0QsSUFFcEJNLFNBQVcsV0FFVmQsUUFBUUMsSUFBSSxzQkFPZmMsU0FBVyxlQUdUN0YiLCJmaWxlIjoibW92aWVfYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIG1vdmllLWFkbWluLmpzICovXHJcbnZhciBtb3ZpZV9hZG1pbiA9ICggdHlwZW9mIChtb3ZpZV9hZG1pbikgPT09ICdvYmplY3QnICkgPyBtb3ZpZV9hZG1pbiA6IHt9O1xyXG4obW92aWVfYWRtaW4gPSB7XHJcblx0aW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXBpJyxcclxuXHRcdFx0ZGF0YVR5cGU6ICdqc29uJ1xyXG5cdFx0fSkuZG9uZSggZnVuY3Rpb24gKHJlc3ApIHtcclxuXHJcblx0XHRcdC8qY29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhyZXNwKTsqL1xyXG5cclxuXHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdCQuZWFjaChyZXNwLCBmdW5jdGlvbihpZHgsIGl0bSkge1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JlY2lkID0gaXRtLmlkO1xyXG5cdFx0XHRcdFx0LyoqXHJcblx0XHRcdFx0XHQgICogRmllbGRzOlxyXG5cdFx0XHRcdFx0ICAqIFRpdGxlXHJcblx0XHRcdFx0XHQgICogWWVhclxyXG5cdFx0XHRcdFx0ICAqIExlbmd0aFxyXG5cdFx0XHRcdFx0ICAqIFJhdGluZ1xyXG5cdFx0XHRcdFx0ICAqIEZvcm1hdFxyXG5cdFx0XHRcdFx0ICAqIEFydFxyXG5cdFx0XHRcdFx0ICAqL1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX29iaiBcdFx0PSBpdG0uZmllbGRzO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3RpdGxlIFx0PSBtb3ZpZV9vYmouVGl0bGU7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfeWVhciBcdFx0PSBtb3ZpZV9vYmouWWVhcjtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9sZW5ndGggXHQ9IG1vdmllX29iai5MZW5ndGg7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nIFx0PSBtb3ZpZV9vYmouUmF0aW5nO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2Zvcm1hdCBcdD0gbW92aWVfb2JqLkZvcm1hdDtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9hcnQgXHRcdD0gbW92aWVfb2JqLkFydDtcclxuXHJcblx0XHRcdFx0XHQvKipcclxuXHRcdFx0XHRcdCAqIFN0YXIgQVNDSUkgY29kZXNcclxuXHRcdFx0XHRcdCAqIC0gLSAtIC0gLSAtIC0gLSAtXHJcblx0XHRcdFx0XHQgKiBTb2xpZCBzdGFyOiAmIzk3MzM7XHJcblx0XHRcdFx0XHQgKiBPdXRsaW5lIHN0YXI6ICYjOTczNDtcclxuXHRcdFx0XHRcdCAqL1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZ19zdGFycyA9ICcnO1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhcnNcIj4nO1xyXG5cdFx0XHRcdFx0LyoqIFNldCB0aGUgbG93ZXN0IHZhbHVlICovXHJcblx0XHRcdFx0XHR2YXIgcmF0aW5nc3RhciA9IDE7XHJcblx0XHRcdFx0XHQvKiogQWRkIGEgc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgdGhlIHNlbGVjdGVkIHJhdGluZyB2YWx1ZSBpcyByZWFjaGVkICovXHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vdmllX3JhdGluZzsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczMyA8L3NwYW4+JztcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8qKiBTdWJ0cmFjdCB0aGUgc2VsZWN0ZWQgcmF0aW5nIGZyb20gdGhlIGhpZ2hlc3QgcG9zc2libGUgdG8gZ2V0IGFuIHVuc2VsZWN0ZWQvZmlsbGVyIGNvdW50ICovXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdCA9IDU7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZEN0ID0gbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdC1tb3ZpZV9yYXRpbmc7XHJcblx0XHRcdFx0XHQvKiogQWRkIGFuIHVuc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgZmlsbGVyIGNvdW50IGlzIHJlYWNoZWQgKi9cclxuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3Q7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxzcGFuIGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczNCAgPC9zcGFuPic7XHJcblxyXG5cdFx0XHRcdFx0XHRyYXRpbmdzdGFyKys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzwvZGl2Pic7XHJcblxyXG5cdFx0XHRcdFx0dmFyIERWRHNlbCwgU1RSc2VsLCBWSFNzZWw7XHJcblx0XHRcdFx0XHRzd2l0Y2ggKG1vdmllX2Zvcm1hdCkge1xyXG5cdFx0XHRcdFx0XHRjYXNlICdEVkQnOlxyXG5cdFx0XHRcdFx0XHRcdERWRHNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdTdHJlYW1pbmcnOlxyXG5cdFx0XHRcdFx0XHRcdFNUUnNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdWSFMnOlxyXG5cdFx0XHRcdFx0XHRcdFZIU3NlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZyBmb3JtLWdyb3VwXCIgJyArXHJcblx0XHRcdFx0XHRcdFx0J2RhdGEtcmVjaWQ9XCInICsgbW92aWVfcmVjaWQgKydcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCdkYXRhLWhhc2NoZ3M9XCJmYWxzZVwiJyArXHJcblx0XHRcdFx0XHRcdFx0J2lkPVwibW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPGRpdiBjbGFzcz1cIm1vdmllX3Bvc3RlclwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfdGl0bGVcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiPlRpdGxlIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oNTAgY2hhcmFjdGVycyBvciBsZXNzKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfdGl0bGUgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBtaW5sZW5ndGg9XCIxXCIgbWF4bGVuZ3RoPVwiNTBcIj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9kZXRhaWxzXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3llYXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIj5ZZWFyIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oZnJvbSAxODAwIHRvIDIxMDApPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfeWVhcl8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX3llYXIgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjE4MDBcIiBtYXg9XCIyMTAwXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2xlbmd0aFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCI+TGVuZ3RoIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oaW4gbWludXRlcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG1heD1cIjUwMFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmdcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiPlJhdGluZzwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMVwiIG1heD1cIjVcIiBoaWRkZW4+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2Zvcm1hdFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCI+Rm9ybWF0PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzZWxlY3QgaWQ9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiIGNsYXNzPVwiY3VzdG9tLXNlbGVjdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgKyc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gJzxvcHRpb24gc2VsZWN0ZWQ+T3BlbiB0aGlzIHNlbGVjdCBtZW51PC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJEVkRcIicgKyBEVkRzZWwgKyAnPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCInICsgU1RSc2VsICsgJz5TdHJlYW1pbmc8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlZIU1wiJyArIFZIU3NlbCArICc+VkhTPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L3NlbGVjdD4nICtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8qJzxpbnB1dCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9mb3JtYXQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCI+JyArKi9cclxuXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gbW92aWVfeWVhciArICcgfCAnICsgbW92aWVfbGVuZ3RoICsgJyBtaW51dGVzIHwgJyArIG1vdmllX3JhdGluZ19zdGFycyArICcgfCAnICsgbW92aWVfZm9ybWF0ICtcclxuXHJcblx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHQnPC9kaXY+J1xyXG5cdFx0XHRcdFx0O1xyXG5cclxuXHRcdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0JykuYXBwZW5kKG1vdmllX2xpc3RpbmcpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChpZHgrMSA9PT0gcmVzcC5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0bW92aWVfYWRtaW4ucmVhZHkoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRyZWFkeSA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdC8vICQoJyNtb3ZpZV9saXN0X3N0YXR1cycpLmhpZGUoKTtcclxuXHRcdCQoJyNtb3ZpZV9saXN0X3N0YXR1cycpLmFsZXJ0KCdjbG9zZScpO1xyXG5cclxuXHRcdCQoJy5zYXZlX2FsbCcpLnNob3coKTtcclxuXHRcdC8vICQoJy5zYXZlX2FsbCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cclxuXHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfZmllbGQoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19ob3ZlcigpO1xyXG5cdFx0bW92aWVfYWRtaW4ucmF0aW5nX2NsaWNrKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbF9jbGljaygpO1xyXG5cclxuXHJcblx0XHQvKnZhciB0ZW1wU2F2ZVdhcm5pbmcgPSAnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmcgZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+JyArXHJcbiAgXHRcdFx0XHQnPHN0cm9uZz5IRUFEUyBVUCE8L3N0cm9uZz4gT25seSB0aGUgZmlyc3QgbW92aWUgdGl0bGUgd2lsbCBzYXZlIGF0IHRoZSBtb21lbnQuLi4nICtcclxuXHRcdFx0JzwvZGl2Pic7XHJcblxyXG5cdFx0Ly8gJCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9ucycpLmhvdmVyKCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnMnKS5hcHBlbmQodGVtcFNhdmVXYXJuaW5nKTtcclxuXHRcdC8vIH0sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyAkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zIC5hbGVydCcpLmFsZXJ0KCdjbG9zZScpO1xyXG5cdFx0Ly8gfSk7Ki9cclxuXHJcblxyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19maWVsZCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2lucHV0IGNoYW5nZScsICdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIElmIGEgLnZhbENoZ01zZyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRcdC8qaWYgKCAkKHRoaXMpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFmdGVyKCc8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkIHZhbENoZ01zZ1wiPlVuc2F2ZWQgY2hhbmdlPC9zbWFsbD4nKTtcclxuXHRcdFx0XHR9Ki9cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignY2hhbmdlJywgJ3NlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIElmIGEgLnZhbENoZ01zZyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRcdC8qaWYgKCAkKHRoaXMpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFmdGVyKCc8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkIHZhbENoZ01zZ1wiPlVuc2F2ZWQgY2hhbmdlPC9zbWFsbD4nKTtcclxuXHRcdFx0XHR9Ki9cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHR0cmFja19jaGFuZ2VzX2xpc3RpbmcgOiBmdW5jdGlvbiAoanFPYmopIHtcclxuXHRcdC8qdmFyIGxpc3RpbmdJRCA9IGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignaWQnKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnbGlzdGluZ0lEOiAnICsgbGlzdGluZ0lEKTsqL1xyXG5cclxuXHRcdHZhciBoYXNDaGdzID0ganFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5maW5kKCdpbnB1dCwgc2VsZWN0JykuaGFzQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdC8vIGNvbnNvbGUubG9nKCdoYXNDaGdzOiAnICsgaGFzQ2hncyk7XHJcblxyXG5cdFx0aWYgKGhhc0NoZ3MpIHtcclxuXHRcdFx0anFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLWhhc2NoZ3MnLCB0cnVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1oYXNjaGdzJywgZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NoZWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfaG92ZXIgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcubW92aWVfcmF0aW5nX3N0YXInKS5ob3ZlcihcclxuXHRcdFx0ZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8qKiBNYWtlIGhvdmVyZWQgaXRlbSBpbnRvIHNlbGVjdGVkIHN0YXRlICovXHJcblx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblxyXG5cdFx0XHRcdC8qKiBcclxuXHRcdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGJlZm9yZSBob3ZlcmVkIGl0ZW0gaW50byB0aGUgc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdCQodGhpcykucHJldkFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuaHRtbCgnJiM5NzMzICcpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfcHJldlNpYicpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBhZnRlciBob3ZlcmVkIGl0ZW0gaW50byB0aGUgdW5zZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLm5leHRBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczNCAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKiogUmVzZXQgYWxsIHN0YXJzIHRvIG9yaWdpbmFsIHN0YXRlICovXHJcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmhhc0NsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpICkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzM0ICcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCcubW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnLm1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzQgJyk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfY2xpY2sgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcubW92aWVfcmF0aW5nX3N0YXInKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG1vdmllX3JhdGluZ19zZWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcmF0aW5nc3RhcicpO1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0JCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbChtb3ZpZV9yYXRpbmdfc2VsKS5jaGFuZ2UoKTtcclxuXHRcdFx0Ly8gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbChtb3ZpZV9yYXRpbmdfc2VsKTtcclxuXHRcdFx0Ly8gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLmF0dHIoJ3ZhbHVlJywgbW92aWVfcmF0aW5nX3NlbCk7XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2Ugc2VsY3RlZCBpdGVtIFxyXG5cdFx0XHQgKiBhbmQgYWxsIHNpYmxpbmcgaXRlbXMgYmVmb3JlIGl0IFxyXG5cdFx0XHQgKiBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHQgKi9cclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpO1xyXG5cdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJyk7XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgc2VsZWN0ZWQgaXRlbSBpbnRvIHRoZSB1bnNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0ICovXHJcblx0XHRcdCQodGhpcykubmV4dEFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGxfY2hlY2sgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoICQoJy52YWxDaGcnKS5sZW5ndGggIT09IDAgKSB7XHJcblx0XHRcdCQoJy5zYXZlX2FsbCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cclxuXHRcdFx0LyoqIElmIGFuIC51bnNhdmVkQ2hnTXNnIGlzbid0IGFscmVhZHkgcHJlc2VudCwgYWRkIGl0ICovXHJcblx0XHRcdGlmICggJCgnLnNhdmVfYWxsJykubmV4dEFsbCgnLnVuc2F2ZWRDaGdNc2cnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0JCgnLnNhdmVfYWxsJykuYWZ0ZXIoJzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWQgdW5zYXZlZENoZ01zZ1wiPlRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMhPC9zbWFsbD4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLnNhdmVfYWxsJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0JCgnLnNhdmVfYWxsJykubmV4dEFsbCgnLnVuc2F2ZWRDaGdNc2cnKS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsX2NsaWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLnNhdmVfYWxsJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGlmICggJCgnI21vdmllX3RpdGxlX3JlY2dZZ2o5SElmdlhVWm1vJykuaGFzQ2xhc3MoJ3ZhbENoZycpICkge1xyXG5cdFx0XHRcdG1vdmllX2FkbWluLnNhdmVfYWxsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGwgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQvKiogVGhpcyBzZWN0aW9uIHdpbGwgZ2F0aGVyIHRoZSBjaGFuZWdzICovXHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogQ2hhbmdlcyBuZWVkIHRvIGJlIGdyb3VwZWQgcGVyIHJlY29yZCAoaS5lLiwgbW92aWUpXHJcblx0XHQgKiBcclxuXHRcdCAqIFByZXR0eSBzdXJlIHRoZSBiZXN0IG9wdGlvbiBpcyB0byBcclxuXHRcdCAqIGZsYWcgYSBwYXJlbnQgZWxlbWVudCAoZS5nLiwgXCIubW92aWVfbGlzdGluZ1wiKSBvbiBjaGFuZ2VzLFxyXG5cdFx0ICogdXNpbmcgdGhhdCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQgXHJcblx0XHQgKiB0byB0cmF2ZXJzZSBkb3duIGNoaWxkcmVuXHJcblx0XHQgKiBhbmQgY29sbGVjdCBjaGFuZ2VzLlxyXG5cdFx0ICpcclxuXHRcdCAqIElmIGFsbCBjaGFuZ2VzIGZvciBhIGdpdmVuIHJlY29yZCBhcmUgYmFja2VkIG91dFxyXG5cdFx0ICogY2xlYXIgZmxhZyBvbiBwYXJlbnQgZWxlbWVudFxyXG5cdFx0ICovXHJcblxyXG5cdFx0LyoqIE1hbnVhbGx5LXNwZWNpZmllZCBJRCBmb3IgMSBtb3ZpZSBmb3IgZGV2ZWxvcG1lbnQgKi9cclxuXHRcdC8vIHZhciBtb3ZpZV9yZWNpZCA9ICdyZWNnWWdqOUhJZnZYVVptbyc7XHJcblx0XHRcclxuXHJcblx0XHR2YXIgbW92aWVfcmVjaWQgPSAncmVjZ1lnajlISWZ2WFVabW8nO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICAqIEZpZWxkczpcclxuXHRcdCAgKiBUaXRsZVxyXG5cdFx0ICAqIFllYXJcclxuXHRcdCAgKiBMZW5ndGhcclxuXHRcdCAgKiBSYXRpbmdcclxuXHRcdCAgKiBGb3JtYXRcclxuXHRcdCAgKiBBcnRcclxuXHRcdCAgKi9cclxuXHRcdC8vIHZhciBtb3ZpZV9vYmogXHRcdD0gaXRtLmZpZWxkcztcclxuXHRcdC8vIHZhciBtb3ZpZV9hcnQgXHRcdD0gbW92aWVfb2JqLkFydDtcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGlzIHdpbGwgYnJlYWsgdGhlIHJlcXVlc3QgYXMgYSB3YXkgb2YgZGVtb2luZyBlcnJvciBoYW5kbGluZ1xyXG5cdFx0ICovXHJcblx0XHQvLyB2YXIgbW92aWVfdGl0bGUgXHQ9ICQoJyMnICsgbW92aWVfcmVjaWQgKyAnIC5tb3ZpZV90aXRsZSBpbnB1dCcpO1xyXG5cclxuXHRcdHZhciBtb3ZpZV90aXRsZSBcdD0gJCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJyAubW92aWVfdGl0bGUgaW5wdXQnKS52YWwoKTtcclxuXHJcblx0XHQvLyB2YXIgbW92aWVfeWVhciBcdFx0PSBtb3ZpZV9vYmouWWVhcjtcclxuXHRcdC8vIHZhciBtb3ZpZV9sZW5ndGggXHQ9IG1vdmllX29iai5MZW5ndGg7XHJcblx0XHQvLyB2YXIgbW92aWVfcmF0aW5nIFx0PSBtb3ZpZV9vYmouUmF0aW5nO1xyXG5cdFx0Ly8gdmFyIG1vdmllX2Zvcm1hdCBcdD0gbW92aWVfb2JqLkZvcm1hdDtcclxuXHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J0lEJzogbW92aWVfcmVjaWQsXHJcblx0XHRcdCdUaXRsZSc6IG1vdmllX3RpdGxlXHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2FwaScsXHJcblx0XHRcdHR5cGUgOiAnUEFUQ0gnLFxyXG5cdFx0XHQvLyBkYXRhVHlwZTogJ2pzb24nLFxyXG5cdFx0ICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3MgOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHJcblx0XHRcdFx0Ly8gYWxlcnQoJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3IgOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbXBsZXRlIDogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0LyoqIFBvdGVudGlhbCB1c2UgZm9yIHNpbmdsZSBmaWVsZCBzYXZlICovXHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
