var e="object"==typeof e?e:{};(e={init:function(){$.ajax({url:"/.netlify/functions/at_get_movie",dataType:"json"}).done(function(a,s,t){a.length>0&&$.each(a,function(s,t){var i=t.id,l=t.fields,n=l.Title,o=l.Year,r=l.Length,_=l.Rating,v=l.Format,c=(l.Art,"");c+='<div class="movie_rating_stars">';for(var m=1,g=0;g<_;g++)c+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+m+'">&#9733 </span>',m++;var d,h,u,f=5-_;for(g=0;g<f;g++)c+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+m+'">&#9734  </span>',m++;switch(c+="</div>",v){case"DVD":d="selected";break;case"Streaming":h="selected";break;case"VHS":u="selected"}var p='<div class="movie_listing form-group" data-recid="'+i+'"data-haschgs="false"id="movie_listing_'+i+'"><div class="movie_title"><label for="movie_title_'+i+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+i+'" value="'+n+'" data-fldname="Title" data-ogval="'+n+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year"><label for="movie_year_'+i+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+i+'" value="'+o+'" data-fldname="Year" data-ogval="'+o+'" class="form-control" type="number" min="1800" max="2100"></div><div class="movie_length"><label for="movie_length_'+i+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+i+'" value="'+r+'" data-fldname="Length" data-ogval="'+r+'" class="form-control" type="number" min="0" max="500"></div><div class="movie_rating"><label for="movie_rating_'+i+'">Rating</label>'+c+'<input id="movie_rating_'+i+'" value="'+_+'" data-fldname="Rating" data-ogval="'+_+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format"><label for="movie_format_'+i+'">Format</label><select id="movie_format_'+i+'" class="custom-select" data-fldname="Format" data-ogval="'+v+'"><option value="DVD"'+d+'>DVD</option><option value="Streaming"'+h+'>Streaming</option><option value="VHS"'+u+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(p),s+1===a.length&&e.ready()})}).fail(function(e,a,s){$("#movie_list_status").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(s);$("#movie_admin").prepend('<div id="movie_list_status" class="alert alert-warning fade show" role="alert"><span id="movie_list_status_msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:function(){$("#movie_list_status").alert("close"),$(".save_all").show(),e.track_changes_field(),e.rating_hover(),e.rating_click(),e.save_all_click()},track_changes_field:function(){$("#movie_admin_list").on("input change","input",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(a){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),e.track_changes_listing($(this))})},track_changes_listing:function(a){a.closest(".movie_listing").find("input, select").hasClass("valChg")?a.closest(".movie_listing").attr("data-haschgs",!0):a.closest(".movie_listing").attr("data-haschgs",!1),e.save_all_check()},rating_hover:function(){$(".movie_rating_star").hover(function(){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")},function(){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:function(){$(".movie_rating_star").click(function(e){var a=$(this).attr("data-ratingstar"),s=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+s).val(a).change(),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:function(){},save_all_check:function(){0!==$(".valChg").length?($(".save_all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save_all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:function(){$(".save_item").click(function(a){$(this).prop("disabled",!0);var s=$(this).attr("data-recid");e.save_one(s)})},save_all_click:function(){$(".save_all").click(function(a){$(".save_all").prop("disabled",!0),e.save_all()})},save_item:function(e){var a={ID:e},s={},t=$("#movie_listing_"+e).find(".valChg");$.each(t,function(e,a){var t=$(a).attr("data-fldname"),i=$(a).val();"Year"===t|"Length"===t|"Rating"===t&&(i=Number(i)),s[t]=i}),a.fields=s;var i=JSON.stringify(a);return new Promise(function(e,a){$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:i,success:function(a,s,t){console.log("success event"),e()},error:function(e,s,t){var i;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(s),console.log("errorThrown: "),console.log(t),void 0!==e.responseJSON){i=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else i=e.responseText;a(),alert("Error:\n"+i)},complete:function(){console.log("complete event")}})})},save_one:function(a){e.save_item(a).then(()=>{e.status_msg("save_one_success")},e=>{console.error(e)})},save_all:function(){$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var a=$('.movie_listing[data-haschgs="true"]');$.each(a,function(s,t){var i=$(t).attr("data-recid");e.save_item(i).then(()=>{s+1===a.length&&e.status_msg("save_all_success")},e=>{console.error(e)})})},status_msg:function(e){switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$(".valChg").removeClass("valChg"),$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(e){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vdmllX2FkbWluLmpzIl0sIm5hbWVzIjpbIm1vdmllX2FkbWluIiwiaW5pdCIsIiQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcCIsInRleHRTdGF0dXMiLCJqcVhIUiIsImxlbmd0aCIsImVhY2giLCJpZHgiLCJpdG0iLCJtb3ZpZV9yZWNpZCIsImlkIiwibW92aWVfb2JqIiwiZmllbGRzIiwibW92aWVfdGl0bGUiLCJUaXRsZSIsIm1vdmllX3llYXIiLCJZZWFyIiwibW92aWVfbGVuZ3RoIiwiTGVuZ3RoIiwibW92aWVfcmF0aW5nIiwiUmF0aW5nIiwibW92aWVfZm9ybWF0IiwiRm9ybWF0IiwibW92aWVfcmF0aW5nX3N0YXJzIiwiQXJ0IiwicmF0aW5nc3RhciIsImkiLCJEVkRzZWwiLCJTVFJzZWwiLCJWSFNzZWwiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kIiwic2hvdyIsInRyYWNrX2NoYW5nZXNfZmllbGQiLCJyYXRpbmdfaG92ZXIiLCJyYXRpbmdfY2xpY2siLCJzYXZlX2FsbF9jbGljayIsIm9uIiwiZSIsInRoaXMiLCJhdHRyIiwidmFsIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm5leHRBbGwiLCJyZW1vdmUiLCJ0cmFja19jaGFuZ2VzX2xpc3RpbmciLCJqcU9iaiIsImNsb3Nlc3QiLCJmaW5kIiwiaGFzQ2xhc3MiLCJzYXZlX2FsbF9jaGVjayIsImhvdmVyIiwiaHRtbCIsInByZXZBbGwiLCJzaWJsaW5ncyIsImNsaWNrIiwibW92aWVfcmF0aW5nX3NlbCIsImNoYW5nZSIsInNhdmVfb25lX2NoZWNrIiwicHJvcCIsInNhdmVfb25lX2NsaWNrIiwic2F2ZV9vbmUiLCJzYXZlX2FsbCIsInNhdmVfaXRlbSIsInJlcV9vYmoiLCJJRCIsInJlcV9vYmpfZmxkcyIsImNoZ2RGbGRzQXJyIiwiaWR4X2ZsZCIsIml0bV9mbGQiLCJmbGROYW1lIiwiZmxkVmFsIiwiTnVtYmVyIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJQcm9taXNlIiwicHJvbVN1Y2Nlc3MiLCJwcm9tRXJyb3IiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsInJlc3BvbnNlVGV4dCIsImNvbXBsZXRlIiwidGhlbiIsInN0YXR1c19tc2ciLCJlcnJPYmoiLCJjaGdkTW92aWVzQXJyIiwid2luZG93Iiwic2V0VGltZW91dCIsImZhZGVPdXQiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEVBQXlDLGlCQUFsQixFQUErQkEsRUFBYyxJQUN2RUEsRUFBYyxDQUNkQyxLQUFPLFdBQ05DLEVBQUVDLEtBQUssQ0FDTkMsSUFBSyxtQ0FDTEMsU0FBVSxTQUNSQyxLQUFNLFNBQVdDLEVBQU1DLEVBQVlDLEdBS2pDRixFQUFLRyxPQUFTLEdBQ2pCUixFQUFFUyxLQUFLSixFQUFNLFNBQVNLLEVBQUtDLEdBQzFCLElBQUlDLEVBQWNELEVBQUlFLEdBVWxCQyxFQUFjSCxFQUFJSSxPQUNsQkMsRUFBZUYsRUFBVUcsTUFDekJDLEVBQWVKLEVBQVVLLEtBQ3pCQyxFQUFnQk4sRUFBVU8sT0FDMUJDLEVBQWdCUixFQUFVUyxPQUMxQkMsRUFBZ0JWLEVBQVVXLE9BUzFCQyxHQVJjWixFQUFVYSxJQVFILElBQ3hCRCxHQUFzQixtQ0FJdkIsSUFGQSxJQUFJRSxFQUFhLEVBRVJDLEVBQUksRUFBR0EsRUFBSVAsRUFBY08sSUFDakNILEdBQXNCLCtFQUFpRkUsRUFBYSxtQkFFcEhBLElBR0QsSUFVSUUsRUFBUUMsRUFBUUMsRUFUaEJDLEVBRDRCLEVBQytCWCxFQUUvRCxJQUFLTyxFQUFJLEVBQUdBLEVBQUlJLEVBQWdDSixJQUMvQ0gsR0FBc0IsaUZBQW1GRSxFQUFhLG9CQUV0SEEsSUFLRCxP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WXdHLFdBQVcscUJBR3hCQyxJQUNBL0QsUUFBUXdELE1BQU1PLFFBTWxCRCxXQUFhLFNBQVVBLEdBQ3RCLE9BQVFBLEdBQ1AsSUFBSyxtQkFHTCxJQUFLLGlCQUVMLE1BQ0EsSUFBSyxtQkFNSnRHLEVBQUUsV0FBV3NELFlBQVksVUFHekJ0RCxFQUFFLGtEQUFrRHdELFNBRXBEeEQsRUFBRSxrQ0FBa0MwQyxRQUFRLHNGQUc1QytELE9BQU9DLFdBQVksV0FDbEIxRyxFQUFFLGlEQUFpRDJHLFFBQVEsT0FBUSxTQUFVMUQsR0FDNUVqRCxFQUFFa0QsTUFBTU0sWUFFUCxTQU9KekQiLCJmaWxlIjoibW92aWVfYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIG1vdmllLWFkbWluLmpzICovXHJcbnZhciBtb3ZpZV9hZG1pbiA9ICggdHlwZW9mIChtb3ZpZV9hZG1pbikgPT09ICdvYmplY3QnICkgPyBtb3ZpZV9hZG1pbiA6IHt9O1xyXG4obW92aWVfYWRtaW4gPSB7XHJcblx0aW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfZ2V0X21vdmllJyxcclxuXHRcdFx0ZGF0YVR5cGU6ICdqc29uJ1xyXG5cdFx0fSkuZG9uZSggZnVuY3Rpb24gKCByZXNwLCB0ZXh0U3RhdHVzLCBqcVhIUiApIHtcclxuXHJcblx0XHRcdC8qY29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhyZXNwKTsqL1xyXG5cclxuXHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdCQuZWFjaChyZXNwLCBmdW5jdGlvbihpZHgsIGl0bSkge1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JlY2lkID0gaXRtLmlkO1xyXG5cdFx0XHRcdFx0LyoqXHJcblx0XHRcdFx0XHQgICogRmllbGRzOlxyXG5cdFx0XHRcdFx0ICAqIFRpdGxlXHJcblx0XHRcdFx0XHQgICogWWVhclxyXG5cdFx0XHRcdFx0ICAqIExlbmd0aFxyXG5cdFx0XHRcdFx0ICAqIFJhdGluZ1xyXG5cdFx0XHRcdFx0ICAqIEZvcm1hdFxyXG5cdFx0XHRcdFx0ICAqIEFydFxyXG5cdFx0XHRcdFx0ICAqL1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX29iaiBcdFx0PSBpdG0uZmllbGRzO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3RpdGxlIFx0PSBtb3ZpZV9vYmouVGl0bGU7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfeWVhciBcdFx0PSBtb3ZpZV9vYmouWWVhcjtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9sZW5ndGggXHQ9IG1vdmllX29iai5MZW5ndGg7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nIFx0PSBtb3ZpZV9vYmouUmF0aW5nO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2Zvcm1hdCBcdD0gbW92aWVfb2JqLkZvcm1hdDtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9hcnQgXHRcdD0gbW92aWVfb2JqLkFydDtcclxuXHJcblx0XHRcdFx0XHQvKipcclxuXHRcdFx0XHRcdCAqIFN0YXIgQVNDSUkgY29kZXNcclxuXHRcdFx0XHRcdCAqIC0gLSAtIC0gLSAtIC0gLSAtXHJcblx0XHRcdFx0XHQgKiBTb2xpZCBzdGFyOiAmIzk3MzM7XHJcblx0XHRcdFx0XHQgKiBPdXRsaW5lIHN0YXI6ICYjOTczNDtcclxuXHRcdFx0XHRcdCAqL1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZ19zdGFycyA9ICcnO1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhcnNcIj4nO1xyXG5cdFx0XHRcdFx0LyoqIFNldCB0aGUgbG93ZXN0IHZhbHVlICovXHJcblx0XHRcdFx0XHR2YXIgcmF0aW5nc3RhciA9IDE7XHJcblx0XHRcdFx0XHQvKiogQWRkIGEgc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgdGhlIHNlbGVjdGVkIHJhdGluZyB2YWx1ZSBpcyByZWFjaGVkICovXHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vdmllX3JhdGluZzsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczMyA8L3NwYW4+JztcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8qKiBTdWJ0cmFjdCB0aGUgc2VsZWN0ZWQgcmF0aW5nIGZyb20gdGhlIGhpZ2hlc3QgcG9zc2libGUgdG8gZ2V0IGFuIHVuc2VsZWN0ZWQvZmlsbGVyIGNvdW50ICovXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdCA9IDU7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZEN0ID0gbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdC1tb3ZpZV9yYXRpbmc7XHJcblx0XHRcdFx0XHQvKiogQWRkIGFuIHVuc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgZmlsbGVyIGNvdW50IGlzIHJlYWNoZWQgKi9cclxuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3Q7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxzcGFuIGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczNCAgPC9zcGFuPic7XHJcblxyXG5cdFx0XHRcdFx0XHRyYXRpbmdzdGFyKys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzwvZGl2Pic7XHJcblxyXG5cdFx0XHRcdFx0dmFyIERWRHNlbCwgU1RSc2VsLCBWSFNzZWw7XHJcblx0XHRcdFx0XHRzd2l0Y2ggKG1vdmllX2Zvcm1hdCkge1xyXG5cdFx0XHRcdFx0XHRjYXNlICdEVkQnOlxyXG5cdFx0XHRcdFx0XHRcdERWRHNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdTdHJlYW1pbmcnOlxyXG5cdFx0XHRcdFx0XHRcdFNUUnNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdWSFMnOlxyXG5cdFx0XHRcdFx0XHRcdFZIU3NlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZyBmb3JtLWdyb3VwXCIgJyArXHJcblx0XHRcdFx0XHRcdFx0J2RhdGEtcmVjaWQ9XCInICsgbW92aWVfcmVjaWQgKydcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCdkYXRhLWhhc2NoZ3M9XCJmYWxzZVwiJyArXHJcblx0XHRcdFx0XHRcdFx0J2lkPVwibW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPGRpdiBjbGFzcz1cIm1vdmllX3Bvc3RlclwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfdGl0bGVcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiPlRpdGxlIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oNTAgY2hhcmFjdGVycyBvciBsZXNzKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIlRpdGxlXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3RpdGxlICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgbWlubGVuZ3RoPVwiMVwiIG1heGxlbmd0aD1cIjUwXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZGV0YWlsc1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV95ZWFyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfeWVhcl8nICsgbW92aWVfcmVjaWQgKyAnXCI+WWVhciA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGZyb20gMTgwMCB0byAyMTAwKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV95ZWFyICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJZZWFyXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjE4MDBcIiBtYXg9XCIyMTAwXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2xlbmd0aFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCI+TGVuZ3RoIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oaW4gbWludXRlcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkxlbmd0aFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2xlbmd0aCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiBtYXg9XCI1MDBcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfcmF0aW5nXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIj5SYXRpbmc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJSYXRpbmdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZm9ybWF0XCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIj5Gb3JtYXQ8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0XCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkZvcm1hdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgKyc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gJzxvcHRpb24gc2VsZWN0ZWQ+T3BlbiB0aGlzIHNlbGVjdCBtZW51PC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJEVkRcIicgKyBEVkRzZWwgKyAnPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCInICsgU1RSc2VsICsgJz5TdHJlYW1pbmc8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlZIU1wiJyArIFZIU3NlbCArICc+VkhTPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L3NlbGVjdD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdCc8L2Rpdj4nXHJcblx0XHRcdFx0XHQ7XHJcblxyXG5cdFx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5hcHBlbmQobW92aWVfbGlzdGluZyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGlkeCsxID09PSByZXNwLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9hZG1pbi5yZWFkeSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KS5mYWlsKCBmdW5jdGlvbiAoIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcclxuXHRcdFx0JCgnI21vdmllX2xpc3Rfc3RhdHVzJykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblxyXG5cdFx0XHR2YXIgZXJyTXNnID0gJzxkaXYgaWQ9XCJtb3ZpZV9saXN0X3N0YXR1c1wiIGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZyBmYWRlIHNob3dcIiByb2xlPVwiYWxlcnRcIj4nICtcclxuXHRcdFx0XHRcdCc8c3BhbiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzX21zZ1wiPlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB0aGUgbW92aWVzLjwvYnI+VHJ5IHJlZnJlc2hpbmcgdGhlIHBhZ2UgYW5kIGlmIHRoZSBwcm9ibGVtIHBlcnNpc3RzLCBwbGVhc2UgY29udGFjdCB1cy48L3NwYW4+JyArXHJcblx0XHRcdFx0JzwvZGl2Pic7XHJcblx0XHRcdFxyXG5cdFx0XHQkKCcjbW92aWVfYWRtaW4nKS5wcmVwZW5kKGVyck1zZyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHJlYWR5IDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnI21vdmllX2xpc3Rfc3RhdHVzJykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0JCgnLnNhdmVfYWxsJykuc2hvdygpO1xyXG5cdFx0XHJcblx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2ZpZWxkKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5yYXRpbmdfaG92ZXIoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19jbGljaygpO1xyXG5cdFx0Ly8gbW92aWVfYWRtaW4uc2F2ZV9vbmVfY2xpY2soKTtcclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NsaWNrKCk7XHJcblxyXG5cdFx0Lyp2YXIgdGVtcFNhdmVXYXJuaW5nID0gJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPicgK1xyXG4gIFx0XHRcdFx0JzxzdHJvbmc+SEVBRFMgVVAhPC9zdHJvbmc+IE9ubHkgdGhlIGZpcnN0IG1vdmllIHRpdGxlIHdpbGwgc2F2ZSBhdCB0aGUgbW9tZW50Li4uJyArXHJcblx0XHRcdCc8L2Rpdj4nO1xyXG5cclxuXHRcdC8vICQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnMnKS5ob3ZlciggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zJykuYXBwZW5kKHRlbXBTYXZlV2FybmluZyk7XHJcblx0XHQvLyB9LCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gJCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9ucyAuYWxlcnQnKS5hbGVydCgnY2xvc2UnKTtcclxuXHRcdC8vIH0pOyovXHJcblx0fVxyXG5cdCxcclxuXHR0cmFja19jaGFuZ2VzX2ZpZWxkIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignaW5wdXQgY2hhbmdlJywgJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG9nVmFsID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9ndmFsJyk7XHJcblx0XHRcdHZhciBjdXJyVmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcblx0XHRcdC8qKiBJZiB0aGUgY3VycmVudCB2YWx1ZSBpc24ndCB0aGUgb3JpZ2luYWwgdmFsdWUsIG1hcmsgdGhlIGZpZWxkICovXHJcblx0XHRcdGlmIChvZ1ZhbCAhPT0gY3VyclZhbCkge1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdFx0XHQvKiogSWYgYSAudmFsQ2hnTXNnIGlzbid0IGFscmVhZHkgcHJlc2VudCwgYWRkIGl0ICovXHJcblx0XHRcdFx0LyppZiAoICQodGhpcykubmV4dEFsbCgnLnZhbENoZ01zZycpLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdCQodGhpcykuYWZ0ZXIoJzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWQgdmFsQ2hnTXNnXCI+VW5zYXZlZCBjaGFuZ2U8L3NtYWxsPicpO1xyXG5cdFx0XHRcdH0qL1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19saXN0aW5nKCAkKHRoaXMpICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdjaGFuZ2UnLCAnc2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG9nVmFsID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9ndmFsJyk7XHJcblx0XHRcdHZhciBjdXJyVmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcblx0XHRcdC8qKiBJZiB0aGUgY3VycmVudCB2YWx1ZSBpc24ndCB0aGUgb3JpZ2luYWwgdmFsdWUsIG1hcmsgdGhlIGZpZWxkICovXHJcblx0XHRcdGlmIChvZ1ZhbCAhPT0gY3VyclZhbCkge1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdFx0XHQvKiogSWYgYSAudmFsQ2hnTXNnIGlzbid0IGFscmVhZHkgcHJlc2VudCwgYWRkIGl0ICovXHJcblx0XHRcdFx0LyppZiAoICQodGhpcykubmV4dEFsbCgnLnZhbENoZ01zZycpLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdCQodGhpcykuYWZ0ZXIoJzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWQgdmFsQ2hnTXNnXCI+VW5zYXZlZCBjaGFuZ2U8L3NtYWxsPicpO1xyXG5cdFx0XHRcdH0qL1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19saXN0aW5nKCAkKHRoaXMpICk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHRyYWNrX2NoYW5nZXNfbGlzdGluZyA6IGZ1bmN0aW9uIChqcU9iaikge1xyXG5cdFx0dmFyIGhhc0NoZ3MgPSBqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmZpbmQoJ2lucHV0LCBzZWxlY3QnKS5oYXNDbGFzcygndmFsQ2hnJyk7XHJcblxyXG5cdFx0aWYgKGhhc0NoZ3MpIHtcclxuXHRcdFx0anFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLWhhc2NoZ3MnLCB0cnVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1oYXNjaGdzJywgZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NoZWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfaG92ZXIgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcubW92aWVfcmF0aW5nX3N0YXInKS5ob3ZlcihcclxuXHRcdFx0ZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8qKiBNYWtlIGhvdmVyZWQgaXRlbSBpbnRvIHNlbGVjdGVkIHN0YXRlICovXHJcblx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblxyXG5cdFx0XHRcdC8qKiBcclxuXHRcdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGJlZm9yZSBob3ZlcmVkIGl0ZW0gaW50byB0aGUgc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdCQodGhpcykucHJldkFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuaHRtbCgnJiM5NzMzICcpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfcHJldlNpYicpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBhZnRlciBob3ZlcmVkIGl0ZW0gaW50byB0aGUgdW5zZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLm5leHRBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczNCAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKiogUmVzZXQgYWxsIHN0YXJzIHRvIG9yaWdpbmFsIHN0YXRlICovXHJcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmhhc0NsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpICkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzM0ICcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCcubW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnLm1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzQgJyk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfY2xpY2sgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcubW92aWVfcmF0aW5nX3N0YXInKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG1vdmllX3JhdGluZ19zZWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcmF0aW5nc3RhcicpO1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0JCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbChtb3ZpZV9yYXRpbmdfc2VsKS5jaGFuZ2UoKTtcclxuXHRcdFx0Ly8gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbChtb3ZpZV9yYXRpbmdfc2VsKTtcclxuXHRcdFx0Ly8gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLmF0dHIoJ3ZhbHVlJywgbW92aWVfcmF0aW5nX3NlbCk7XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2Ugc2VsY3RlZCBpdGVtIFxyXG5cdFx0XHQgKiBhbmQgYWxsIHNpYmxpbmcgaXRlbXMgYmVmb3JlIGl0IFxyXG5cdFx0XHQgKiBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHQgKi9cclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpO1xyXG5cdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJyk7XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgc2VsZWN0ZWQgaXRlbSBpbnRvIHRoZSB1bnNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0ICovXHJcblx0XHRcdCQodGhpcykubmV4dEFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9vbmVfY2hlY2sgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQvLyBjaGVjayBpZiBmaWVsZHMgYXNzb2NpYXRlZCB0byBnaXZlbiBzYXZlIGJ1dHRvbiBoYXZlIGNoYW5nZWRcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsX2NoZWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCAkKCcudmFsQ2hnJykubGVuZ3RoICE9PSAwICkge1xyXG5cdFx0XHQkKCcuc2F2ZV9hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHJcblx0XHRcdC8qKiBJZiBhbiAubXNnX3Vuc2F2ZWRDaGdzIGlzbid0IGFscmVhZHkgcHJlc2VudCwgYWRkIGl0ICovXHJcblx0XHRcdGlmICggJCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfdW5zYXZlZENoZ3MnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX3Vuc2F2ZWRDaGdzIG1zZy13YXJuaW5nXCI+VGhlcmUgYXJlIHVuc2F2ZWQgY2hhbmdlcyE8L3NtYWxsPicpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuc2F2ZV9hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ191bnNhdmVkQ2hncycpLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9vbmVfY2xpY2sgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcuc2F2ZV9pdGVtJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJCh0aGlzKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi5zYXZlX29uZShtb3ZpZV9yZWNpZCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsX2NsaWNrIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLnNhdmVfYWxsJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdCQoJy5zYXZlX2FsbCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbCgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2l0ZW0gOiBmdW5jdGlvbiAobW92aWVfcmVjaWQpIHtcclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnSUQnOiBtb3ZpZV9yZWNpZFxyXG5cdFx0fTtcclxuXHRcdHZhciByZXFfb2JqX2ZsZHMgPSB7fTtcclxuXHJcblx0XHQvKiBjb25zb2xlLmxvZygnbW92aWVfcmVjaWQ6ICcpO1xyXG5cdFx0Y29uc29sZS5sb2cobW92aWVfcmVjaWQpOyAqL1xyXG5cclxuXHRcdHZhciBjaGdkRmxkc0FyciA9ICQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCkuZmluZCgnLnZhbENoZycpO1xyXG5cclxuXHRcdC8qIGNvbnNvbGUubG9nKCdjaGdkRmxkc0FycjogJyk7XHJcblx0XHRjb25zb2xlLmxvZyhjaGdkRmxkc0Fycik7ICovXHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogRm9yIGVhY2ggY2hhbmdlZCBmaWVsZCwgXHJcblx0XHQgKiBnZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB0aGF0IGhhcyB0aGUgYXNzb2NpYXRlZCBmaWVsZCBuYW1lIGluIHRoZSBkYXRhIHN0b3JlXHJcblx0XHQgKiBhbG9uZyB3aXRoIHRoZSBmaWVsZCB2YWx1ZSBcclxuXHRcdCAqIHRvIGJ1aWxkIGFuIG9iamVjdCBvZiBrZXkvdmFsdWUgcGFpcnMgXHJcblx0XHQgKiB0byBzZW5kIGluIGVhY2ggcmVxdWVzdFxyXG5cdFx0ICovXHJcblxyXG5cdFx0JC5lYWNoKGNoZ2RGbGRzQXJyLCBmdW5jdGlvbiAoaWR4X2ZsZCwgaXRtX2ZsZCkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtX2ZsZCkuYXR0cignZGF0YS1mbGRuYW1lJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bV9mbGQpLnZhbCgpO1xyXG5cclxuXHRcdFx0aWYgKCBmbGROYW1lID09PSAnWWVhcicgfCBmbGROYW1lID09PSAnTGVuZ3RoJyB8IGZsZE5hbWUgPT09ICdSYXRpbmcnICkge1xyXG5cdFx0XHRcdGZsZFZhbCA9IE51bWJlcihmbGRWYWwpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkTmFtZTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZE5hbWUpO1xyXG5cdFx0XHRjb25zb2xlLmxvZygnZmxkVmFsOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2coZmxkVmFsKTsgKi9cclxuXHRcdFx0XHJcblx0XHRcdHJlcV9vYmpfZmxkc1tmbGROYW1lXSA9IGZsZFZhbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJlcV9vYmouZmllbGRzID0gcmVxX29ial9mbGRzO1xyXG5cclxuXHRcdC8qIGNvbnNvbGUubG9nKCdyZXFfb2JqOiAnKTtcclxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopOyAqL1xyXG5cclxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XHJcblxyXG5cdFx0LyogY29uc29sZS5sb2coJ3JlcV9zdHI6ICcpO1xyXG5cdFx0Y29uc29sZS5sb2cocmVxX3N0cik7ICovXHJcblxyXG5cdFx0dmFyIHNhdmVJdGVtUHJvbSA9IG5ldyBQcm9taXNlKCBmdW5jdGlvbiAocHJvbVN1Y2Nlc3MsIHByb21FcnJvcikge1xyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfdXBkYXRlX21vdmllJyxcclxuXHRcdFx0XHR0eXBlIDogJ1BBVENIJyxcclxuXHRcdFx0XHQvLyBkYXRhVHlwZTogJ2pzb24nLFxyXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRcdC8qKiByZXNwIHdpbGwgYmUgZnJlc2ggZGF0YSBvZiB0aGUgc2F2ZWQgaXRlbSAqL1xyXG5cdFx0XHRcdFx0LyogY29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7ICovXHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8qIGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpOyAqL1xyXG5cclxuXHRcdFx0XHRcdC8vIG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfaXRlbV9zdWNjZXNzJyk7XHJcblxyXG5cdFx0XHRcdFx0cHJvbVN1Y2Nlc3MoKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cHJvbUVycm9yKCk7XHJcblxyXG5cdFx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblxyXG5cdFx0XHRcdFx0Lyo8ZGl2IGlkPVwibW92aWVfbGlzdF9zdGF0dXNcIiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm8gZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+XHJcblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwic3Bpbm5lciBzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1tZFwiIHJvbGU9XCJzdGF0dXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+XHJcblx0XHRcdFx0XHRcdDxzcGFuIGlkPVwibW92aWVfbGlzdF9zdGF0dXNfbXNnXCI+TW92aWVzIGxvYWRpbmcuLi48L3NwYW4+XHJcblx0XHRcdFx0XHQ8L2Rpdj4qL1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHNhdmVJdGVtUHJvbTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lIDogZnVuY3Rpb24gKG1vdmllX3JlY2lkKSB7XHJcblx0XHR2YXIgc2F2ZUl0ZW0gPSBtb3ZpZV9hZG1pbi5zYXZlX2l0ZW0obW92aWVfcmVjaWQpO1xyXG5cclxuXHRcdHNhdmVJdGVtLnRoZW4oXHJcblx0XHRcdCgpID0+IHtcclxuXHRcdFx0XHQvKiogRmxhZyBhbiBlbGVtZW50IHNvIHRoZSBtZXNzYWdlIGNhbiBiZSBwbGFjZWQgY29udGV4dHVhbGx5ICovXHJcblx0XHRcdFx0Ly9cclxuXHJcblx0XHRcdFx0bW92aWVfYWRtaW4uc3RhdHVzX21zZygnc2F2ZV9vbmVfc3VjY2VzcycpO1xyXG5cdFx0XHR9LCBcclxuXHRcdFx0KGVyck9iaikgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyT2JqKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfc2F2ZVN0YXR1cycpLnJlbW92ZSgpO1xyXG5cclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ19zYXZpbmdBbGxDaGdzIG1zZy1pbmZvXCI+U2F2aW5nIGFsbCBjaGFuZ2VzLi4uPC9zbWFsbD4nKTtcclxuXHJcblx0XHQvKiogTWFudWFsbHktc3BlY2lmaWVkIHZhbHVlcyBmb3IgZGV2ZWxvcG1lbnQgKi9cclxuXHRcdC8qdmFyIG1vdmllX3JlY2lkID0gJ3JlY2dZZ2o5SElmdlhVWm1vJyxcclxuXHRcdFx0bW92aWVfdGl0bGUgPSAkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQgKyAnIC5tb3ZpZV90aXRsZSBpbnB1dCcpLnZhbCgpLFxyXG5cdFx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0XHQnSUQnOiBtb3ZpZV9yZWNpZCxcclxuXHRcdFx0XHQnVGl0bGUnOiBtb3ZpZV90aXRsZVxyXG5cdFx0XHR9OyovXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGlzIHdpbGwgYnJlYWsgdGhlIHJlcXVlc3QgYXMgYSB3YXkgb2YgZGVtb2luZyBlcnJvciBoYW5kbGluZ1xyXG5cdFx0ICovXHJcblx0XHQvLyB2YXIgbW92aWVfdGl0bGUgXHQ9ICQoJyMnICsgbW92aWVfcmVjaWQgKyAnIC5tb3ZpZV90aXRsZSBpbnB1dCcpO1xyXG5cclxuXHRcdC8qKiBHYXRoZXIgY2hhbmdlcyBhbmQgc2VuZCBQQVRDSCByZXF1ZXN0IHRvIEFQSSBwZXIgbW92aWUgKi9cclxuXHJcblx0XHQvKiogXHJcblx0XHQgKiBDaGFuZ2VzIG5lZWQgdG8gYmUgZ3JvdXBlZCBwZXIgcmVjb3JkIChpLmUuLCBtb3ZpZSlcclxuXHRcdCAqIFxyXG5cdFx0ICogUHJldHR5IHN1cmUgdGhlIGJlc3Qgb3B0aW9uIGlzIHRvIFxyXG5cdFx0ICogZmxhZyBhIHBhcmVudCBlbGVtZW50IChlLmcuLCBcIi5tb3ZpZV9saXN0aW5nXCIpIG9uIGNoYW5nZXMsXHJcblx0XHQgKiB1c2luZyB0aGF0IGFzIHRoZSBzdGFydGluZyBwb2ludCBcclxuXHRcdCAqIHRvIHRyYXZlcnNlIGRvd24gY2hpbGRyZW5cclxuXHRcdCAqIGFuZCBjb2xsZWN0IGNoYW5nZXMuXHJcblx0XHQgKlxyXG5cdFx0ICogSWYgYWxsIGNoYW5nZXMgZm9yIGEgZ2l2ZW4gcmVjb3JkIGFyZSBiYWNrZWQgb3V0XHJcblx0XHQgKiBjbGVhciBmbGFnIG9uIHBhcmVudCBlbGVtZW50XHJcblx0XHQgKi9cclxuXHJcblx0XHR2YXIgY2hnZE1vdmllc0FyciA9ICQoJy5tb3ZpZV9saXN0aW5nW2RhdGEtaGFzY2hncz1cInRydWVcIl0nKTtcclxuXHJcblx0XHQkLmVhY2goY2hnZE1vdmllc0FyciwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQoaXRtKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblxyXG5cdFx0XHR2YXIgc2F2ZUl0ZW0gPSBtb3ZpZV9hZG1pbi5zYXZlX2l0ZW0obW92aWVfcmVjaWQpO1xyXG5cclxuXHRcdFx0c2F2ZUl0ZW0udGhlbihcclxuXHRcdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoaWR4KzEgPT09IGNoZ2RNb3ZpZXNBcnIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfYWxsX3N1Y2Nlc3MnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHQoZXJyT2JqKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVyck9iaik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzdGF0dXNfbXNnIDogZnVuY3Rpb24gKHN0YXR1c19tc2cpIHtcclxuXHRcdHN3aXRjaCAoc3RhdHVzX21zZykge1xyXG5cdFx0XHRjYXNlICdzYXZlX29uZV9zdWNjZXNzJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfb25lX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX3N1Y2Nlc3MnOlxyXG5cdFx0XHRcdC8qdmFyIG1zZyA9ICc8ZGl2IGlkPVwibW92aWVfbGlzdF9zdGF0dXNcIiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3MgZmFkZSBzaG93IFwiIHJvbGU9XCJhbGVydFwiPicgK1xyXG5cdFx0XHRcdFx0JzxzcGFuIGlkPVwibW92aWVfbGlzdF9zdGF0dXNfbXNnXCI+Q2hhbmdlcyBzYXZlZC48L3NwYW4+JyArXHJcblx0XHRcdFx0JzwvZGl2Pic7Ki9cclxuXHJcblx0XHRcdFx0LyoqIFJlc2V0IGZpZWxkcyB0byB1bmNoYW5nZWQgc3R5bGUgKi9cclxuXHRcdFx0XHQkKCcudmFsQ2hnJykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdFx0XHQvKiogUmVtb3ZlIGFueSBtZXNzYWdlcyBhYm91dCBzYXZlIHN0YXR1cyAqL1xyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcclxuXHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX2NoZ3NTYXZlZCBtc2ctc3VjY2Vzc1wiPkFsbCBjaGFuZ2VzIHNhdmVkLjwvc21hbGw+Jyk7XHJcblxyXG5cdFx0XHRcdC8qKiBBZnRlciBzcGVjaWZpY2VkIGRlbGF5LCBmYWRlIHRoZSBtZXNzYWdlLCB0aGVuIHJlbW92ZSBmcm9tIERPTSAqL1xyXG5cdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ19jaGdzU2F2ZWQnKS5mYWRlT3V0KCdzbG93JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0sIDIwMDApO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc2F2ZV9hbGxfZXJyb3InOlxyXG5cdFx0XHRcdC8vIFxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcbn0pLmluaXQoKTtcclxuIl19
