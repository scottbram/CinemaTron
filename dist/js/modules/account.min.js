var account="object"==typeof account?account:{};(account={init:()=>{auth.sesh_check().then(t=>{let a=t[0].fields;account.sesh_success(a)}).catch(()=>{account.sesh_fail()})},sesh_success:t=>{auth.logout_init(),account.load_acct_main(t)},sesh_fail:()=>{$("#acct_main .main-content .status-container").alert("close");$("#acct_main .main-content").prepend('<div class="status-container alert alert-warning fade show" role="alert"><span class="status-msg"><a id="log_in_prompt" href="#">Log in to edit</a></span></div>'),auth.login_modal_init()},load_acct_main:t=>{$("#acct_main_mgmt").attr("data-atrecid",t.uid),$("#acct_main_mgmt_dispName").val(t.display_name),$("#acct_main_mgmt_email").val(t.email),window.setTimeout(function(){account.ready()},200)},save_details:()=>{let t={ID:document.getElementById("acct_main_mgmt").getAttribute("data-atrecid")};var a={};let s=document.getElementsByClassName("acct-details");(s=[...s]).forEach(t=>{let s=t.getAttribute("data-atfld"),e=t.value;a[s]=e}),t.fields=a;var e=JSON.stringify(t);return console.log("save_details: "),console.log(e),new Promise(function(t,a){$.ajax({url:"/.netlify/functions/at_update_acct",type:"PATCH",contentType:"application/json",data:e,success:function(){t()},error:function(t,s,e){var c;if(console.error("error event"),console.log("jqXHR: "),console.log(t),console.log("textStatus: "),console.log(s),console.log("errorThrown: "),console.log(e),void 0!==t.responseJSON){c=t.responseJSON.statusCode+"\n"+t.responseJSON.error+"\n"+t.responseJSON.message}else c=t.responseText;a(),console.error("Error:\n"+c),401===t.status&&auth.show_login_modal()}})})},save_pw:()=>{var t=$("#acct_main_mgmt_pw").val();if(""===t)return"nopw";return new Promise(function(a,s){(async()=>{const a=await auth.pw_set_do(t);return await a})().then(()=>{$("#acct_main_mgmt_pw").val("").attr("type","password"),$("#acct_main_mgmt_pw_toggle_vis").prop("checked",!1),a()}).catch(t=>{console.error("Password save error"),console.log(t),s()})})},ready:()=>{$("#acct_main_mgmt").on("input change","input",function(){$(this).addClass("valChg"),$("#acct_save_do").prop("disabled",!1)}),$("#acct_main_mgmt_pw_toggle_vis").on("change",function(){$(this).prop("checked")?$("#acct_main_mgmt_pw").attr("type","text"):$("#acct_main_mgmt_pw").attr("type","password")}),$("#acct_save_do").click(function(){$(this).prop("disabled",!0),account.status_msg("saving");(async()=>{await account.save_pw(),await account.save_details()})().then(()=>{account.status_msg("save_success")}).catch(t=>{console.log(t)})}),$("#acct_main .main-content .status-container").alert("close"),$("#acct_main_mgmt").removeAttr("style"),$("#acct_main .main-content").css("overflow","auto"),auth.input_validation()},status_msg:t=>{switch(t){case"saving":$(".actions-msgs .msg_saveStatus").remove(),$(".actions-msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-info">Saving...</small>');break;case"save_success":$("#acct_main_mgmt input").removeClass("valChg"),$("#acct_save_do").blur(),$(".actions-msgs .msg_saveStatus").remove(),$(".actions-msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$(".actions-msgs .msg_chgsSaved").fadeOut("slow",function(){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvYWNjb3VudC5qcyJdLCJuYW1lcyI6WyJhY2NvdW50IiwiaW5pdCIsImF1dGgiLCJzZXNoX2NoZWNrIiwidGhlbiIsInJlc3AiLCJhY2N0RGV0YWlscyIsImZpZWxkcyIsInNlc2hfc3VjY2VzcyIsImNhdGNoIiwic2VzaF9mYWlsIiwibG9nb3V0X2luaXQiLCJsb2FkX2FjY3RfbWFpbiIsIiQiLCJhbGVydCIsInByZXBlbmQiLCJsb2dpbl9tb2RhbF9pbml0IiwiYXR0ciIsInVpZCIsInZhbCIsImRpc3BsYXlfbmFtZSIsImVtYWlsIiwid2luZG93Iiwic2V0VGltZW91dCIsInJlYWR5Iiwic2F2ZV9kZXRhaWxzIiwicmVxX29iaiIsIklEIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEF0dHJpYnV0ZSIsInJlcV9vYmpfZmxkcyIsImFjY3RfZGV0YWlscyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmb3JFYWNoIiwiaXRtIiwiZmxkX25hbWUiLCJmbGRfdmFsIiwidmFsdWUiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicHJvbVN1Y2Nlc3MiLCJwcm9tRXJyb3IiLCJhamF4IiwidXJsIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJlcnJvciIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiZXJyX2Rpc3AiLCJyZXNwb25zZUpTT04iLCJyZXNwb25zZVRleHQiLCJzdGF0dXMiLCJzaG93X2xvZ2luX21vZGFsIiwic2F2ZV9wdyIsInBhc3NUb1Bhc3MiLCJhc3luYyIsImRvUHdTYXZlIiwicHdfc2V0X2RvIiwiYWNjdF9wd19jaGciLCJwcm9wIiwiZXJyT2JqIiwib24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJjbGljayIsInN0YXR1c19tc2ciLCJzYXZlQm90aCIsImVyciIsInJlbW92ZUF0dHIiLCJjc3MiLCJpbnB1dF92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USxjQUl2Q0osRUFBRSxpQkFBaUI0RCxNQUFPLFdBQ3pCNUQsRUFBRTBELE1BQU1ILEtBQUssWUFBWSxHQUN6QnBFLFFBQVEwRSxXQUFXLFVBRUZWLGlCQUNWaEUsUUFBUThELGdCQUNSOUQsUUFBUXlCLGdCQUtma0QsR0FDRXZFLEtBQU8sS0FDUEosUUFBUTBFLFdBQVcsa0JBRW5CakUsTUFBT21FLElBRVBsQyxRQUFRQyxJQUFJaUMsT0FZZi9ELEVBQUUsOENBQThDQyxNQUFNLFNBQ3RERCxFQUFFLG1CQUFtQmdFLFdBQVcsU0FDaENoRSxFQUFFLDRCQUE0QmlFLElBQUksV0FBWSxRQUc5QzVFLEtBQUs2RSxvQkFHTkwsV0FBY0EsSUFDYixPQUFRQSxHQUNQLElBQUssU0FDSDdELEVBQUUsaUNBQWlDbUUsU0FFbkNuRSxFQUFFLGlCQUFpQkUsUUFBUSwwRUFDN0IsTUFDQSxJQUFLLGVBQ0pGLEVBQUUseUJBQXlCb0UsWUFBWSxVQUN2Q3BFLEVBQUUsaUJBQWlCcUUsT0FHbkJyRSxFQUFFLGlDQUFpQ21FLFNBRW5DbkUsRUFBRSxpQkFBaUJFLFFBQVEsc0ZBRzNCTyxPQUFPQyxXQUFZLFdBQ2xCVixFQUFFLGdDQUFnQ3NFLFFBQVEsT0FBUSxXQUNqRHRFLEVBQUUwRCxNQUFNUyxZQUVQLFNBT0ovRSIsImZpbGUiOiJqcy9tb2R1bGVzL2FjY291bnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIGFjY291bnQuanMgKi9cbnZhciBhY2NvdW50ID0gKCB0eXBlb2YgKGFjY291bnQpID09PSAnb2JqZWN0JyApID8gYWNjb3VudCA6IHt9O1xuKGFjY291bnQgPSB7XG5cdGluaXQgOiAoKSA9PiB7XG5cdFx0YXV0aC5zZXNoX2NoZWNrKClcblx0XHQudGhlbiggcmVzcCA9PiB7XG5cdFx0XHQvKipcblx0XHRcdCAqIEZpZWxkczpcblx0XHRcdCAqIGRpc3BsYXlfbmFtZVxuXHRcdFx0ICogZW1haWxcblx0XHRcdCAqIHB3aGFzaFxuXHRcdFx0ICogc2VzaFxuXHRcdFx0ICogdWlkXG5cdFx0XHQgKi9cblxuXHRcdFx0bGV0IGFjY3REZXRhaWxzID0gcmVzcFswXS5maWVsZHM7XG5cblx0XHRcdGFjY291bnQuc2VzaF9zdWNjZXNzKGFjY3REZXRhaWxzKTtcblx0XHR9KVxuXHRcdC5jYXRjaCggKCkgPT4ge1xuXHRcdFx0LyoqIE5vIHZhbGlkIHNlc3Npb24gZm91bmQgKi9cblx0XHRcdGFjY291bnQuc2VzaF9mYWlsKCk7XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRzZXNoX3N1Y2Nlc3MgOiAoYWNjdERldGFpbHMpID0+IHtcblx0XHRhdXRoLmxvZ291dF9pbml0KCk7XG5cdFx0YWNjb3VudC5sb2FkX2FjY3RfbWFpbihhY2N0RGV0YWlscyk7XG5cdH1cblx0LFxuXHRzZXNoX2ZhaWwgOiAoKSA9PiB7XG5cdFx0JCgnI2FjY3RfbWFpbiAubWFpbi1jb250ZW50IC5zdGF0dXMtY29udGFpbmVyJykuYWxlcnQoJ2Nsb3NlJyk7XG5cblx0XHR2YXIgZXJyTXNnID0gJzxkaXYgY2xhc3M9XCJzdGF0dXMtY29udGFpbmVyIGFsZXJ0IGFsZXJ0LXdhcm5pbmcgZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+JyArXG5cdFx0XHRcdCc8c3BhbiBjbGFzcz1cInN0YXR1cy1tc2dcIj48YSBpZD1cImxvZ19pbl9wcm9tcHRcIiBocmVmPVwiI1wiPkxvZyBpbiB0byBlZGl0PC9hPjwvc3Bhbj4nICtcblx0XHRcdCc8L2Rpdj4nO1xuXHRcdFxuXHRcdCQoJyNhY2N0X21haW4gLm1haW4tY29udGVudCcpLnByZXBlbmQoZXJyTXNnKTtcblxuXHRcdGF1dGgubG9naW5fbW9kYWxfaW5pdCgpO1xuXHR9XG5cdCxcblx0bG9hZF9hY2N0X21haW4gOiAoYWNjdERldGFpbHMpID0+IHtcblx0XHQkKCcjYWNjdF9tYWluX21nbXQnKS5hdHRyKCdkYXRhLWF0cmVjaWQnLCBhY2N0RGV0YWlscy51aWQpO1xuXHRcdCQoJyNhY2N0X21haW5fbWdtdF9kaXNwTmFtZScpLnZhbChhY2N0RGV0YWlscy5kaXNwbGF5X25hbWUpO1xuXHRcdCQoJyNhY2N0X21haW5fbWdtdF9lbWFpbCcpLnZhbChhY2N0RGV0YWlscy5lbWFpbCk7XG5cblx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuXHRcdFx0YWNjb3VudC5yZWFkeSgpO1xuXHRcdH0sIDIwMCk7XG5cdH1cblx0LFxuXHRzYXZlX2RldGFpbHMgOiAoKSA9PiB7XG5cdFx0Y29uc3QgYWNjdF91aWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjdF9tYWluX21nbXQnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXRyZWNpZCcpO1xuXG5cdFx0bGV0IHJlcV9vYmogPSB7XG5cdFx0XHQnSUQnOiBhY2N0X3VpZFxuXHRcdH07XG5cblx0XHR2YXIgcmVxX29ial9mbGRzID0ge307XG5cdFx0bGV0IGFjY3RfZGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FjY3QtZGV0YWlscycpO1xuXHRcdGFjY3RfZGV0YWlscyA9IFsuLi5hY2N0X2RldGFpbHNdO1xuXG5cdFx0YWNjdF9kZXRhaWxzLmZvckVhY2goIChpdG0pID0+IHtcblx0XHRcdGxldCBmbGRfbmFtZSA9IGl0bS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXRmbGQnKTtcblx0XHRcdGxldCBmbGRfdmFsID0gaXRtLnZhbHVlXG5cblx0XHRcdHJlcV9vYmpfZmxkc1tmbGRfbmFtZV0gPSBmbGRfdmFsO1xuXHRcdH0pO1xuXG5cdFx0cmVxX29iai5maWVsZHMgPSByZXFfb2JqX2ZsZHM7XG5cblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xuXG5cdFx0Y29uc29sZS5sb2coJ3NhdmVfZGV0YWlsczogJyk7XG5cdFx0Y29uc29sZS5sb2cocmVxX3N0cik7XG5cblx0XHRjb25zdCBzYXZlQWNjdERldGFpbHNfcHJvbWlzZSA9IG5ldyBQcm9taXNlKCBmdW5jdGlvbiAocHJvbVN1Y2Nlc3MsIHByb21FcnJvcikge1xuXHRcdFx0JC5hamF4KHtcblx0XHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF91cGRhdGVfYWNjdCcsXG5cdFx0XHRcdHR5cGU6ICdQQVRDSCcsXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQvKiogUmVzZXQgZmllbGRzIHRvIHVuY2hhbmdlZCBzdHlsZSAqL1xuXHRcdFx0XHRcdC8vICQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCkuZmluZCgnLnZhbENoZywgLnZhbENoZy1jb2xvcnNPbmx5JykucmVtb3ZlQ2xhc3MoJ3ZhbENoZyB2YWxDaGctY29sb3JzT25seScpO1xuXG5cdFx0XHRcdFx0Ly8gJCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkKS5maW5kKCcubW92aWVfcmF0aW5nX3N0YXJzJykucmVtb3ZlQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XG5cblx0XHRcdFx0XHRwcm9tU3VjY2VzcygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cblx0XHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cHJvbUVycm9yKCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblxuXHRcdFx0XHRcdGlmIChqcVhIUi5zdGF0dXMgPT09IDQwMSkge1xuXHRcdFx0XHRcdFx0YXV0aC5zaG93X2xvZ2luX21vZGFsKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQvKiBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0XHR9ICovXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBzYXZlQWNjdERldGFpbHNfcHJvbWlzZTtcblx0fVxuXHQsXG5cdHNhdmVfcHcgOiAoKSA9PiB7XG5cdFx0dmFyIHBhc3NUb1Bhc3MgPSAkKCcjYWNjdF9tYWluX21nbXRfcHcnKS52YWwoKTtcblxuXHRcdGlmIChwYXNzVG9QYXNzID09PSAnJyApIHtcblx0XHRcdHJldHVybiAnbm9wdyc7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWNjdF9wd19jaGcgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBkb1B3U2F2ZSA9IGF3YWl0IGF1dGgucHdfc2V0X2RvKHBhc3NUb1Bhc3MpO1xuXG5cdFx0XHRyZXR1cm4gYXdhaXQgZG9Qd1NhdmU7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2F2ZUFjY3RQd19wcm9taXNlID0gbmV3IFByb21pc2UoIGZ1bmN0aW9uIChwcm9tU3VjY2VzcywgcHJvbUVycm9yKSB7XG5cdFx0XHRhY2N0X3B3X2NoZygpXG5cdFx0XHRcdC50aGVuKCAoKSA9PiB7XG5cdFx0XHRcdFx0JCgnI2FjY3RfbWFpbl9tZ210X3B3JykudmFsKCcnKS5hdHRyKCd0eXBlJywgJ3Bhc3N3b3JkJyk7XG5cdFx0XHRcdFx0JCgnI2FjY3RfbWFpbl9tZ210X3B3X3RvZ2dsZV92aXMnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuXG5cdFx0XHRcdFx0cHJvbVN1Y2Nlc3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKCBlcnJPYmogPT4ge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1Bhc3N3b3JkIHNhdmUgZXJyb3InKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJPYmopO1xuXG5cdFx0XHRcdFx0cHJvbUVycm9yKCk7XG5cdFx0XHRcdH0pXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gc2F2ZUFjY3RQd19wcm9taXNlO1xuXHR9XG5cdCxcblx0cmVhZHkgOiAoKSA9PiB7XG5cdFx0JCgnI2FjY3RfbWFpbl9tZ210Jykub24oJ2lucHV0IGNoYW5nZScsICdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3ZhbENoZycpO1xuXG5cdFx0XHQkKCcjYWNjdF9zYXZlX2RvJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0fSk7XG5cblx0XHQkKCcjYWNjdF9tYWluX21nbXRfcHdfdG9nZ2xlX3ZpcycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoICQodGhpcykucHJvcCgnY2hlY2tlZCcpICkge1xuXHRcdFx0XHQkKCcjYWNjdF9tYWluX21nbXRfcHcnKS5hdHRyKCd0eXBlJywgJ3RleHQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJyNhY2N0X21haW5fbWdtdF9wdycpLmF0dHIoJ3R5cGUnLCAncGFzc3dvcmQnKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoJyNhY2N0X3NhdmVfZG8nKS5jbGljayggZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0YWNjb3VudC5zdGF0dXNfbXNnKCdzYXZpbmcnKTtcblxuXHRcdFx0Y29uc3Qgc2F2ZUJvdGggPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IGFjY291bnQuc2F2ZV9wdygpO1xuXHRcdFx0XHRhd2FpdCBhY2NvdW50LnNhdmVfZGV0YWlscygpO1xuXG5cdFx0XHRcdC8vIHRocm93IG5ldyBFcnJvcignYjBya2VkLicpO1xuXHRcdFx0fVxuXG5cdFx0XHRzYXZlQm90aCgpXG5cdFx0XHRcdC50aGVuICggKCkgPT4ge1xuXHRcdFx0XHRcdGFjY291bnQuc3RhdHVzX21zZygnc2F2ZV9zdWNjZXNzJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaCggZXJyID0+IHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xuXG5cdFx0XHRcdH0pXG5cblx0XHRcdGxldCByZXNwTXNnID0gYDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nIGFsZXJ0LWRpc21pc3NpYmxlIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPlxuXHRcdFx0XHQ8c3Ryb25nPkhvbHkgZ3VhY2Ftb2xlITwvc3Ryb25nPiBZb3Ugc2hvdWxkIGNoZWNrIGluIG9uIHNvbWUgb2YgdGhvc2UgZmllbGRzIGJlbG93LlxuXHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwiYWxlcnRcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cblx0XHRcdFx0XHQ8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuXHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdDwvZGl2PmA7XG5cdFx0fSk7XG5cdFx0XG5cdFx0JCgnI2FjY3RfbWFpbiAubWFpbi1jb250ZW50IC5zdGF0dXMtY29udGFpbmVyJykuYWxlcnQoJ2Nsb3NlJyk7XG5cdFx0JCgnI2FjY3RfbWFpbl9tZ210JykucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHQkKCcjYWNjdF9tYWluIC5tYWluLWNvbnRlbnQnKS5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcblxuXHRcdC8qKiBOZWVkIHRvIHJldmlzZSB0aGlzIGFwcHJvYWNoIHRvIGFkZHJlc3Mgb24tZGVtYW5kIHZhbGlkYXRpb24gd2hlbiBmaWVsZHMgY2hhbmdlICovXG5cdFx0YXV0aC5pbnB1dF92YWxpZGF0aW9uKCk7XG5cdH1cblx0LFxuXHRzdGF0dXNfbXNnIDogKHN0YXR1c19tc2cpID0+IHtcblx0XHRzd2l0Y2ggKHN0YXR1c19tc2cpIHtcblx0XHRcdGNhc2UgJ3NhdmluZyc6XG5cdFx0XHRcdFx0JCgnLmFjdGlvbnMtbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcblxuXHRcdFx0XHRcdCQoJy5hY3Rpb25zLW1zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfY2hnc1NhdmVkIG1zZy1pbmZvXCI+U2F2aW5nLi4uPC9zbWFsbD4nKTtcblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc2F2ZV9zdWNjZXNzJzpcblx0XHRcdFx0JCgnI2FjY3RfbWFpbl9tZ210IGlucHV0JykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpO1xuXHRcdFx0XHQkKCcjYWNjdF9zYXZlX2RvJykuYmx1cigpO1xuXHRcdFx0XHRcblx0XHRcdFx0LyoqIFJlbW92ZSBhbnkgbWVzc2FnZXMgYWJvdXQgc2F2ZSBzdGF0dXMgKi9cblx0XHRcdFx0JCgnLmFjdGlvbnMtbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcblxuXHRcdFx0XHQkKCcuYWN0aW9ucy1tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX2NoZ3NTYXZlZCBtc2ctc3VjY2Vzc1wiPkFsbCBjaGFuZ2VzIHNhdmVkLjwvc21hbGw+Jyk7XG5cblx0XHRcdFx0LyoqIEFmdGVyIHNwZWNpZmljZWQgZGVsYXksIGZhZGUgdGhlIG1lc3NhZ2UsIHRoZW4gcmVtb3ZlIGZyb20gRE9NICovXG5cdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JCgnLmFjdGlvbnMtbXNncyAubXNnX2NoZ3NTYXZlZCcpLmZhZGVPdXQoJ3Nsb3cnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc2F2ZV9lcnJvcic6XG5cdFx0XHRcdC8vIFxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG59KS5pbml0KCk7XG4iXX0=
