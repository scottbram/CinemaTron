var movie_admin="object"==typeof movie_admin?movie_admin:{};(movie_admin={init:()=>{$.ajax({url:"/.netlify/functions/at_get_movie?recid=all",dataType:"json"}).done(function(e,a,t){e.length>0&&$.each(e,function(a,t){var s,i,l,o=t.id,n=t.fields,r=n.Title,m=n.Year,_=n.Length,v=n.Rating,d=n.Format,c=(n.Art,movie_admin.seeing_stars(v));switch(d){case"DVD":s="selected";break;case"Streaming":i="selected";break;case"VHS":l="selected"}var g='<div class="movie_listing form-group" data-recid="'+o+'"data-haschgs="false"id="movie_listing_'+o+'"><div class="movie_title form-field-container"><label for="movie_title_'+o+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+o+'" value="'+r+'" data-fldname="Title" data-ogval="'+r+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+o+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+o+'" value="'+m+'" data-fldname="Year" data-ogval="'+m+'" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+o+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+o+'" value="'+_+'" data-fldname="Length" data-ogval="'+_+'" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+o+'">Rating</label>'+c+'<input id="movie_rating_'+o+'" value="'+v+'" data-fldname="Rating" data-ogval="'+v+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format form-field-container"><label for="movie_format_'+o+'">Format</label><select id="movie_format_'+o+'" class="form-control" data-fldname="Format" data-ogval="'+d+'"><option value="DVD"'+s+'>DVD</option><option value="Streaming"'+i+'>Streaming</option><option value="VHS"'+l+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(g),a+1===e.length&&movie_admin.ready()})}).fail(function(e,a,t){$("#movie_list_status").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t);$("#movie_admin").prepend('<div id="movie_list_status" class="alert alert-warning fade show" role="alert"><span id="movie_list_status_msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:()=>{$("#movie_list_status").alert("close"),movie_admin.add_movie_click(),$(".add-movie").prop("disabled",!1),movie_admin.track_changes_field(),movie_admin.rating_hover(),movie_admin.rating_click(),movie_admin.save_all_click()},add_movie_click:()=>{$(".add-movie").click(function(e){movie_admin.add_movie(),$("input").first().focus()})},add_movie:()=>{var e=Date.now(),a='<div class="movie_listing is-new form-group" data-recid="'+e+'"data-haschgs="false"id="movie_listing_'+e+'"class="movie_listing_new"><div class="movie_title form-field-container"><label for="movie_title_'+e+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+e+'" value="" data-fldname="Title" class="form-control" type="text" minlength="1" maxlength="50" required></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+e+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+e+'" value="" data-fldname="Year" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+e+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+e+'" value="" data-fldname="Length" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+e+'">Rating</label>'+movie_admin.seeing_stars("1")+'<input id="movie_rating_'+e+'" value="1" data-fldname="Rating" class="form-control valChg" type="number" min="1" max="5" hidden required></div><div class="movie_format form-field-container"><label for="movie_format_'+e+'">Format</label><select id="movie_format_'+e+'" class="form-control valChg" data-fldname="Format"><option value="DVD">DVD</option><option value="Streaming" selected>Streaming</option><option value="VHS">VHS</option></select></div></div></div>';$("#movie_admin_list").prepend(a),$(".is-new .movie_rating_stars").addClass("valChg-colorsOnly")},seeing_stars:e=>{var a="";a+='<div class="movie_rating_stars">';for(var t=1,s=0;s<e;s++)a+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+t+'">&#9733 </span>',t++;var i=5-e;for(s=0;s<i;s++)a+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+t+'">&#9734  </span>',t++;return a+="</div>"},track_changes_field:()=>{$("#movie_admin_list").on("input change","input",function(e){var a=$(this).attr("data-ogval"),t=$(this).val(),s=$(this).attr("data-fldname"),i=$(this)[0];if(i.setCustomValidity(""),a!==t)switch($(this).addClass("valChg"),s){case"Title":$(this).val().length>0&&$(this).val().length<51?i.setCustomValidity(""):i.setCustomValidity("Title must be 1 to 50 characters");break;case"Year":var l=utils.input_numbers_only(t);$(this).val(l),4===$(this).val().length&&parseInt($(this).val())>=1800&&parseInt($(this).val())<=2100?i.setCustomValidity(""):i.setCustomValidity("Must be a 4 digit number between 1800 and 2100");break;case"Length":l=utils.input_numbers_only(t);$(this).val(l),parseInt($(this).val())>=1&&parseInt($(this).val())<=999?i.setCustomValidity(""):i.setCustomValidity("Must be a 3 digit number greater than 1")}else $(this).removeClass("valChg").nextAll(".valChgMsg").remove();movie_admin.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(e){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),movie_admin.track_changes_listing($(this))})},track_changes_listing:e=>{e.closest(".movie_listing").find("input, select").hasClass("valChg")?e.closest(".movie_listing").attr("data-haschgs",!0):e.closest(".movie_listing").attr("data-haschgs",!1),movie_admin.save_all_check()},rating_hover:()=>{$("#movie_admin_list").on("mouseenter",".movie_rating_star",function(e){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")}).on("mouseleave",".movie_rating_star",function(e){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:()=>{$("#movie_admin_list").on("click",".movie_rating_star",function(e){var a=$(this).attr("data-ratingstar"),t=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+t).val(a).change(),$("#movie_rating_"+t).attr("data-ogval")!==$("#movie_rating_"+t).val()?$(this).closest(".movie_rating_stars").addClass("valChg-colorsOnly"):$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:()=>{},save_all_check:()=>{0!==$(".valChg").length?($(".save-all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save-all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:()=>{$(".save_item").click(function(e){$(this).prop("disabled",!0);var a=$(this).attr("data-recid");movie_admin.save_one(a)})},save_all_click:()=>{$(".save-all").click(function(e){$(".save-all").prop("disabled",!0),movie_admin.save_all()})},save_item:e=>{var a={ID:e},t={},s=$("#movie_listing_"+e).find(".valChg");$.each(s,function(e,a){var s=$(a).attr("data-fldname"),i=$(a).val();"Year"===s|"Length"===s|"Rating"===s&&(i=Number(i)),t[s]=i}),a.fields=t;var i=JSON.stringify(a);return new Promise(function(a,t){$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:i,success:function(t,s,i){console.log("success event"),$("#movie_listing_"+e).find(".valChg, .valChg-colorsOnly").removeClass("valChg valChg-colorsOnly"),$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),a()},error:function(e,a,s){var i;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){i=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else i=e.responseText;t(),alert("Error:\n"+i)},complete:function(){console.log("complete event")}})})},save_one:e=>{movie_admin.save_item(e).then(function(){movie_admin.status_msg("save_one_success")},function(e){console.error(e)})},save_all:()=>{$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var e=$('.movie_listing[data-haschgs="true"]');$.each(e,function(a,t){var s=$(t).attr("data-recid");movie_admin.save_item(s).then(function(){a+1===e.length&&movie_admin.status_msg("save_all_success")},function(e){console.error(e)})})},status_msg:e=>{switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(e){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvbW92aWVfYWRtaW4uanMiXSwibmFtZXMiOlsibW92aWVfYWRtaW4iLCJpbml0IiwiJCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwidGV4dFN0YXR1cyIsImpxWEhSIiwibGVuZ3RoIiwiZWFjaCIsImlkeCIsIml0bSIsIkRWRHNlbCIsIlNUUnNlbCIsIlZIU3NlbCIsIm1vdmllX3JlY2lkIiwiaWQiLCJtb3ZpZV9vYmoiLCJmaWVsZHMiLCJtb3ZpZV90aXRsZSIsIlRpdGxlIiwibW92aWVfeWVhciIsIlllYXIiLCJtb3ZpZV9sZW5ndGgiLCJMZW5ndGgiLCJtb3ZpZV9yYXRpbmciLCJSYXRpbmciLCJtb3ZpZV9mb3JtYXQiLCJGb3JtYXQiLCJtb3ZpZV9yYXRpbmdfc3RhcnMiLCJBcnQiLCJzZWVpbmdfc3RhcnMiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kIiwiYWRkX21vdmllX2NsaWNrIiwicHJvcCIsInRyYWNrX2NoYW5nZXNfZmllbGQiLCJyYXRpbmdfaG92ZXIiLCJyYXRpbmdfY2xpY2siLCJzYXZlX2FsbF9jbGljayIsImNsaWNrIiwiZSIsImFkZF9tb3ZpZSIsImZpcnN0IiwiZm9jdXMiLCJEYXRlIiwibm93IiwiYWRkQ2xhc3MiLCJyYXRpbmdzdGFyIiwiaSIsIm1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWRDdCIsIm9uIiwib2dWYWwiLCJ0aGlzIiwiYXR0ciIsImN1cnJWYWwiLCJ2YWwiLCJmbGRfbmFtZSIsImZsZF9lbCIsInNldEN1c3RvbVZhbGlkaXR5IiwiZmxkX3ZhbCIsInV0aWxzIiwiaW5wdXRfbnVtYmVyc19vbmx5IiwicGFyc2VJbnQiLCJyZW1vdmVDbGFzcyIsIm5leHRBbGwiLCJyZW1vdmUiLCJ0cmFja19jaGFuZ2VzX2xpc3RpbmciLCJqcU9iaiIsImNsb3Nlc3QiLCJmaW5kIiwiaGFzQ2xhc3MiLCJzYXZlX2FsbF9jaGVjayIsImh0bWwiLCJwcmV2QWxsIiwic2libGluZ3MiLCJtb3ZpZV9yYXRpbmdfc2VsIiwiY2hhbmdlIiwic2F2ZV9vbmVfY2hlY2siLCJzYXZlX29uZV9jbGljayIsInNhdmVfb25lIiwic2F2ZV9hbGwiLCJzYXZlX2l0ZW0iLCJyZXFfb2JqIiwiSUQiLCJyZXFfb2JqX2ZsZHMiLCJjaGdkRmxkc0FyciIsImlkeF9mbGQiLCJpdG1fZmxkIiwiZmxkTmFtZSIsImZsZFZhbCIsIk51bWJlciIsInJlcV9zdHIiLCJKU09OIiwic3RyaW5naWZ5IiwiUHJvbWlzZSIsInByb21TdWNjZXNzIiwicHJvbUVycm9yIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJqcVhociIsImVycm9yIiwiZXJyX2Rpc3AiLCJyZXNwb25zZUpTT04iLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInRoZW4iLCJzdGF0dXNfbXNnIiwiZXJyT2JqIiwiY2hnZE1vdmllc0FyciIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJmYWRlT3V0Il0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxZQUF5QyxpQkFBbEIsWUFBK0JBLFlBQWMsSUFDdkVBLFlBQWMsQ0FDZEMsS0FBTyxLQUNOQyxFQUFFQyxLQUFLLENBQ05DLElBQUssNkNBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFXQyxFQUFNQyxFQUFZQyxHQUNqQ0YsRUFBS0csT0FBUyxHQUNqQlIsRUFBRVMsS0FBS0osRUFBTSxTQUFTSyxFQUFLQyxHQUMxQixJQW9CSUMsRUFBUUMsRUFBUUMsRUFwQmhCQyxFQUFjSixFQUFJSyxHQVVsQkMsRUFBY04sRUFBSU8sT0FDbEJDLEVBQWVGLEVBQVVHLE1BQ3pCQyxFQUFlSixFQUFVSyxLQUN6QkMsRUFBZ0JOLEVBQVVPLE9BQzFCQyxFQUFnQlIsRUFBVVMsT0FDMUJDLEVBQWdCVixFQUFVVyxPQUcxQkMsR0FGY1osRUFBVWEsSUFFSGhDLFlBQVlpQyxhQUFhTixJQUds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cy9tb2R1bGVzL21vdmllX2FkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBtb3ZpZS1hZG1pbi5qcyAqL1xyXG52YXIgbW92aWVfYWRtaW4gPSAoIHR5cGVvZiAobW92aWVfYWRtaW4pID09PSAnb2JqZWN0JyApID8gbW92aWVfYWRtaW4gOiB7fTtcclxuKG1vdmllX2FkbWluID0ge1xyXG5cdGluaXQgOiAoKSA9PiB7XHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2dldF9tb3ZpZT9yZWNpZD1hbGwnLFxyXG5cdFx0XHRkYXRhVHlwZTogJ2pzb24nXHJcblx0XHR9KS5kb25lKCBmdW5jdGlvbiAoIHJlc3AsIHRleHRTdGF0dXMsIGpxWEhSICkge1xyXG5cdFx0XHRpZiAocmVzcC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0JC5lYWNoKHJlc3AsIGZ1bmN0aW9uKGlkeCwgaXRtKSB7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmVjaWQgPSBpdG0uaWQ7XHJcblx0XHRcdFx0XHQvKipcclxuXHRcdFx0XHRcdCAgKiBGaWVsZHM6XHJcblx0XHRcdFx0XHQgICogVGl0bGVcclxuXHRcdFx0XHRcdCAgKiBZZWFyXHJcblx0XHRcdFx0XHQgICogTGVuZ3RoXHJcblx0XHRcdFx0XHQgICogUmF0aW5nXHJcblx0XHRcdFx0XHQgICogRm9ybWF0XHJcblx0XHRcdFx0XHQgICogQXJ0XHJcblx0XHRcdFx0XHQgICovXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfb2JqIFx0XHQ9IGl0bS5maWVsZHM7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfdGl0bGUgXHQ9IG1vdmllX29iai5UaXRsZTtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV95ZWFyIFx0XHQ9IG1vdmllX29iai5ZZWFyO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2xlbmd0aCBcdD0gbW92aWVfb2JqLkxlbmd0aDtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmcgXHQ9IG1vdmllX29iai5SYXRpbmc7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfZm9ybWF0IFx0PSBtb3ZpZV9vYmouRm9ybWF0O1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2FydCBcdFx0PSBtb3ZpZV9vYmouQXJ0O1xyXG5cclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSBtb3ZpZV9hZG1pbi5zZWVpbmdfc3RhcnMobW92aWVfcmF0aW5nKTtcclxuXHJcblx0XHRcdFx0XHR2YXIgRFZEc2VsLCBTVFJzZWwsIFZIU3NlbDtcclxuXHRcdFx0XHRcdHN3aXRjaCAobW92aWVfZm9ybWF0KSB7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ0RWRCc6XHJcblx0XHRcdFx0XHRcdFx0RFZEc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ1N0cmVhbWluZyc6XHJcblx0XHRcdFx0XHRcdFx0U1RSc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ1ZIUyc6XHJcblx0XHRcdFx0XHRcdFx0VkhTc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9saXN0aW5nID0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9saXN0aW5nIGZvcm0tZ3JvdXBcIiAnICtcclxuXHRcdFx0XHRcdFx0XHQnZGF0YS1yZWNpZD1cIicgKyBtb3ZpZV9yZWNpZCArJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0J2RhdGEtaGFzY2hncz1cImZhbHNlXCInICtcclxuXHRcdFx0XHRcdFx0XHQnaWQ9XCJtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJzxkaXYgY2xhc3M9XCJtb3ZpZV9wb3N0ZXJcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3RpdGxlIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIj5UaXRsZSA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KDUwIGNoYXJhY3RlcnMgb3IgbGVzcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfdGl0bGUgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCI1MFwiJyArIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2RldGFpbHNcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfeWVhciBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiPlllYXIgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihmcm9tIDE4MDAgdG8gMjEwMCk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiWWVhclwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3llYXIgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKiogSW5wdXQgdHlwZT1cIm51bWJlclwiIGhhcyB1bmRlc2lyYWJsZSBzaWRlIGVmZmVjdHMgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxODAwXCIgbWF4PVwiMjEwMFwiJyArIFxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKiogVGhpcyBwYXR0ZXJuIGlzIHBlcmZlY3QgYnV0IHRyaWdnZXJpbmcgdGhlIG51bWVyaWMga2V5cGFkIG9uIG1vYmlsZSBpcyBwZXJmZWN0ZXIgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkezR9XCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LyoqIEZ1biBmYWN0OiBUaGlzIHBhdHRlcm4gd2lsbCB0cmlnZ2VyIHRoZSBudW1lcmljIGtleXBhZCBvbiBtb2JpbGUgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkKlwiIG1heGxlbmd0aD1cIjRcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9sZW5ndGggZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiPkxlbmd0aCA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGluIG1pbnV0ZXMpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJMZW5ndGhcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiOTk5XCInICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIHBhdHRlcm49XCJcXFxcZCpcIiBtYXhsZW5ndGg9XCIzXCIgcmVxdWlyZWQnICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfcmF0aW5nIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIj5SYXRpbmc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJSYXRpbmdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbicgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9mb3JtYXQgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiPkZvcm1hdDwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vICc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiRm9ybWF0XCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfZm9ybWF0ICsgJ1wiJyArJz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnPG9wdGlvbiBzZWxlY3RlZD5PcGVuIHRoaXMgc2VsZWN0IG1lbnU8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIkRWRFwiJyArIERWRHNlbCArICc+RFZEPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJTdHJlYW1pbmdcIicgKyBTVFJzZWwgKyAnPlN0cmVhbWluZzwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiVkhTXCInICsgVkhTc2VsICsgJz5WSFM8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Jzwvc2VsZWN0PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0JzwvZGl2PidcclxuXHRcdFx0XHRcdDtcclxuXHJcblx0XHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLmFwcGVuZChtb3ZpZV9saXN0aW5nKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoaWR4KzEgPT09IHJlc3AubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FkbWluLnJlYWR5KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pLmZhaWwoIGZ1bmN0aW9uICgganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHQkKCcjbW92aWVfbGlzdF9zdGF0dXMnKS5hbGVydCgnY2xvc2UnKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHJcblx0XHRcdHZhciBlcnJNc2cgPSAnPGRpdiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzXCIgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPicgK1xyXG5cdFx0XHRcdFx0JzxzcGFuIGlkPVwibW92aWVfbGlzdF9zdGF0dXNfbXNnXCI+VGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBtb3ZpZXMuPC9icj5UcnkgcmVmcmVzaGluZyB0aGUgcGFnZSBhbmQgaWYgdGhlIHByb2JsZW0gcGVyc2lzdHMsIHBsZWFzZSBjb250YWN0IHVzLjwvc3Bhbj4nICtcclxuXHRcdFx0XHQnPC9kaXY+JztcclxuXHRcdFx0XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbicpLnByZXBlbmQoZXJyTXNnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0cmVhZHkgOiAoKSA9PiB7XHJcblx0XHQkKCcjbW92aWVfbGlzdF9zdGF0dXMnKS5hbGVydCgnY2xvc2UnKTtcclxuXHJcblx0XHRtb3ZpZV9hZG1pbi5hZGRfbW92aWVfY2xpY2soKTtcclxuXHRcdCQoJy5hZGQtbW92aWUnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHJcblx0XHRcclxuXHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfZmllbGQoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19ob3ZlcigpO1xyXG5cdFx0bW92aWVfYWRtaW4ucmF0aW5nX2NsaWNrKCk7XHJcblx0XHQvLyBtb3ZpZV9hZG1pbi5zYXZlX29uZV9jbGljaygpO1xyXG5cdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGxfY2xpY2soKTtcclxuXHR9XHJcblx0LFxyXG5cdGFkZF9tb3ZpZV9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5hZGQtbW92aWUnKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0bW92aWVfYWRtaW4uYWRkX21vdmllKCk7XHJcblxyXG5cdFx0XHQkKCdpbnB1dCcpLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0YWRkX21vdmllIDogKCkgPT4ge1xyXG5cdFx0dmFyIG1vdmllX3JlY2lkID0gRGF0ZS5ub3coKTtcclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSBtb3ZpZV9hZG1pbi5zZWVpbmdfc3RhcnMoJzEnKTtcclxuXHJcblx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZyBpcy1uZXcgZm9ybS1ncm91cFwiICcgK1xyXG5cdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHQvLyAnZGF0YS1yZWNpZD1cIm5ld1wiJyArXHJcblx0XHRcdFx0J2RhdGEtaGFzY2hncz1cImZhbHNlXCInICtcclxuXHRcdFx0XHQnaWQ9XCJtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdCdjbGFzcz1cIm1vdmllX2xpc3RpbmdfbmV3XCInICtcclxuXHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdC8vICc8ZGl2IGNsYXNzPVwibW92aWVfcG9zdGVyXCI+PC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV90aXRsZSBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCI+VGl0bGUgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPig1MCBjaGFyYWN0ZXJzIG9yIGxlc3MpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHQnIHZhbHVlPVwiXCInICtcclxuXHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdC8vICcgZGF0YS1vZ3ZhbD1cIm5ld19tb3ZpZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdC8vICcgcGxhY2Vob2xkZXI9XCJUaGUgQmlnIEZsaWNrIFRpdGxlXCInICtcclxuXHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCI1MFwiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2RldGFpbHNcIj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfeWVhciBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiPlllYXIgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihmcm9tIDE4MDAgdG8gMjEwMCk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCJcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiWWVhclwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwibmV3X21vdmllXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgcGxhY2Vob2xkZXI9XCIyMDE5XCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkKlwiIG1heGxlbmd0aD1cIjRcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9sZW5ndGggZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiPkxlbmd0aCA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGluIG1pbnV0ZXMpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCJcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiTGVuZ3RoXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBwbGFjZWhvbGRlcj1cIjE1MFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG1heD1cIjUwMFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCIzXCIgcGF0dGVybj1cIlxcXFxkezR9XCIgcmVxdWlyZWQnICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkKlwiIG1heGxlbmd0aD1cIjNcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmcgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiPlJhdGluZzwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArXHJcblx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIjFcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiUmF0aW5nXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbCB2YWxDaGdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjFcIiBtYXg9XCI1XCIgaGlkZGVuIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2Zvcm1hdCBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCI+Rm9ybWF0PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0Ly8gJzxzZWxlY3QgaWQ9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiIGNsYXNzPVwiY3VzdG9tLXNlbGVjdFwiJyArXHJcblx0XHRcdFx0XHRcdCc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImZvcm0tY29udHJvbCB2YWxDaGdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiRm9ybWF0XCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfZm9ybWF0ICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPG9wdGlvbiBzZWxlY3RlZD5PcGVuIHRoaXMgc2VsZWN0IG1lbnU8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIkRWRFwiPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCIgc2VsZWN0ZWQ+U3RyZWFtaW5nPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJWSFNcIj5WSFM8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0Jzwvc2VsZWN0PicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0JzwvZGl2PidcclxuXHRcdDtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLnByZXBlbmQobW92aWVfbGlzdGluZyk7XHJcblx0XHQkKCcuaXMtbmV3IC5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5hZGRDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHR9XHJcblx0LFxyXG5cdHNlZWluZ19zdGFycyA6IChtb3ZpZV9yYXRpbmcpID0+IHtcclxuXHRcdC8qKlxyXG5cdFx0ICogU3RhciBBU0NJSSBjb2Rlc1xyXG5cdFx0ICogLSAtIC0gLSAtIC0gLSAtIC1cclxuXHRcdCAqIFNvbGlkIHN0YXI6ICYjOTczMztcclxuXHRcdCAqIE91dGxpbmUgc3RhcjogJiM5NzM0O1xyXG5cdFx0ICovXHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJzID0gJyc7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZ19zdGFyc1wiPic7XHJcblx0XHQvKiogU2V0IHRoZSBsb3dlc3QgdmFsdWUgKi9cclxuXHRcdHZhciByYXRpbmdzdGFyID0gMTtcclxuXHRcdC8qKiBBZGQgYSBzZWxlY3RlZCBpbmRpY2F0b3IgdG8gdGhlIG9iamVjdCB1bnRpbCB0aGUgc2VsZWN0ZWQgcmF0aW5nIHZhbHVlIGlzIHJlYWNoZWQgKi9cclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW92aWVfcmF0aW5nOyBpKyspIHtcclxuXHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICs9ICc8c3BhbiBjbGFzcz1cIm1vdmllX3JhdGluZ19zdGFyIG1vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkXCIgZGF0YS1yYXRpbmdzdGFyPVwiJyArIHJhdGluZ3N0YXIgKyAnXCI+JiM5NzMzIDwvc3Bhbj4nO1xyXG5cdFx0XHRcclxuXHRcdFx0cmF0aW5nc3RhcisrO1xyXG5cdFx0fVxyXG5cdFx0LyoqIFN1YnRyYWN0IHRoZSBzZWxlY3RlZCByYXRpbmcgZnJvbSB0aGUgaGlnaGVzdCBwb3NzaWJsZSB0byBnZXQgYW4gdW5zZWxlY3RlZC9maWxsZXIgY291bnQgKi9cclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3Rhcl90b3RhbEN0ID0gNTtcclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QgPSBtb3ZpZV9yYXRpbmdfc3Rhcl90b3RhbEN0LW1vdmllX3JhdGluZztcclxuXHRcdC8qKiBBZGQgYW4gdW5zZWxlY3RlZCBpbmRpY2F0b3IgdG8gdGhlIG9iamVjdCB1bnRpbCBmaWxsZXIgY291bnQgaXMgcmVhY2hlZCAqL1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IG1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWRDdDsgaSsrKSB7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkXCIgZGF0YS1yYXRpbmdzdGFyPVwiJyArIHJhdGluZ3N0YXIgKyAnXCI+JiM5NzM0ICA8L3NwYW4+JztcclxuXHJcblx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdH1cclxuXHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPC9kaXY+JztcclxuXHJcblx0XHRyZXR1cm4gbW92aWVfcmF0aW5nX3N0YXJzO1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19maWVsZCA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2lucHV0IGNoYW5nZScsICdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblx0XHRcdHZhciBmbGRfbmFtZSA9ICQodGhpcykuYXR0cignZGF0YS1mbGRuYW1lJyk7XHJcblx0XHRcdHZhciBmbGRfZWwgPSAkKHRoaXMpWzBdO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7XHJcblxyXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgYXMgY2hhbmdlZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xyXG5cdFx0XHRcdHN3aXRjaCAoZmxkX25hbWUpIHtcclxuXHRcdFx0XHRcdGNhc2UgJ1RpdGxlJzpcclxuXHRcdFx0XHRcdFx0XHR2YXIgY2hrX3RpdGxlID0gJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwICYmICQodGhpcykudmFsKCkubGVuZ3RoIDwgNTE7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnY2hrX3RpdGxlOiAnICsgY2hrX3RpdGxlKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWNoa190aXRsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdUaXRsZSBtdXN0IGJlIDEgdG8gNTAgY2hhcmFjdGVycycpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnWWVhcic6XHJcblx0XHRcdFx0XHRcdC8qKiBPbmx5IGFsbG93IG51bWJlcnMgKi9cclxuXHRcdFx0XHRcdFx0Ly8gdmFyIGZsZF92YWwgPSBmbGRfdmFsLnJlcGxhY2UoL1teMC05XSsvZywgJycpO1xyXG5cdFx0XHRcdFx0XHR2YXIgZmxkX3ZhbCA9IHV0aWxzLmlucHV0X251bWJlcnNfb25seShjdXJyVmFsKTtcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS52YWwoZmxkX3ZhbCk7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgY2hrX3lyID0gJCh0aGlzKS52YWwoKS5sZW5ndGggPT09IDQgJiYgKCBwYXJzZUludCggJCh0aGlzKS52YWwoKSApID49IDE4MDAgJiYgcGFyc2VJbnQoICQodGhpcykudmFsKCkgKSA8PSAyMTAwICk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ2Noa195cjogJyArIGNoa195cik7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoIWNoa195cikge1xyXG5cdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnTXVzdCBiZSBhIDQgZGlnaXQgbnVtYmVyIGJldHdlZW4gMTgwMCBhbmQgMjEwMCcpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnTGVuZ3RoJzpcclxuXHRcdFx0XHRcdFx0LyoqIE9ubHkgYWxsb3cgbnVtYmVycyAqL1xyXG5cdFx0XHRcdFx0XHQvLyB2YXIgZmxkX3ZhbCA9IGZsZF92YWwucmVwbGFjZSgvW14wLTldKy9nLCAnJyk7XHJcblx0XHRcdFx0XHRcdHZhciBmbGRfdmFsID0gdXRpbHMuaW5wdXRfbnVtYmVyc19vbmx5KGN1cnJWYWwpO1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLnZhbChmbGRfdmFsKTtcclxuXHJcblx0XHRcdFx0XHRcdHZhciBjaGtfbGVuID0gKCBwYXJzZUludCggJCh0aGlzKS52YWwoKSApID49IDEgJiYgcGFyc2VJbnQoICQodGhpcykudmFsKCkgKSA8PSA5OTkgKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnY2hrX2xlbjogJyArIGNoa19sZW4pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKCAhY2hrX2xlbiApIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJ011c3QgYmUgYSAzIGRpZ2l0IG51bWJlciBncmVhdGVyIHRoYW4gMScpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKiBUaGlzIGRlbGl2ZXJzIHRoZSBjdXN0b20gdmFsaWRhdGlvbiBtZXNzYWdlcyAqL1xyXG5cdFx0XHQvKiB2YXIgZmxkX2lzVmFsaWQgPSBmbGRfZWwuY2hlY2tWYWxpZGl0eSgpO1xyXG5cclxuXHRcdFx0aWYgKCFmbGRfaXNWYWxpZCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG5cdFx0XHR9ICovXHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2xpc3RpbmcoICQodGhpcykgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2NoYW5nZScsICdzZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR2YXIgb2dWYWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgKi9cclxuXHRcdFx0aWYgKG9nVmFsICE9PSBjdXJyVmFsKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygndmFsQ2hnJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygndmFsQ2hnJykubmV4dEFsbCgnLnZhbENoZ01zZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2xpc3RpbmcoICQodGhpcykgKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19saXN0aW5nIDogKGpxT2JqKSA9PiB7XHJcblx0XHR2YXIgaGFzQ2hncyA9IGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuZmluZCgnaW5wdXQsIHNlbGVjdCcpLmhhc0NsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRpZiAoaGFzQ2hncykge1xyXG5cdFx0XHRqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtaGFzY2hncycsIHRydWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0anFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLWhhc2NoZ3MnLCBmYWxzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGxfY2hlY2soKTtcclxuXHR9XHJcblx0LFxyXG5cdHJhdGluZ19ob3ZlciA6ICgpID0+IHtcclxuXHRcdC8qKiBIYXZlIHRvIHVzZSBkZWxlZ2F0ZWQgYXBwcm9hY2ggdG8gd29yayB3aXRoIGluamVjdGVkIGVsZW1lbnRzIChlLmcuLCBuZXcgbW92aWUpICovXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpXHJcblx0XHRcdC5vbignbW91c2VlbnRlcicsICcubW92aWVfcmF0aW5nX3N0YXInLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHJcblx0XHRcdFx0LyoqIE1ha2UgaG92ZXJlZCBpdGVtIGludG8gc2VsZWN0ZWQgc3RhdGUgKi9cclxuXHRcdFx0XHQkKHRoaXMpLmh0bWwoJyYjOTczMyAnKTtcclxuXHJcblx0XHRcdFx0LyoqIFxyXG5cdFx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYmVmb3JlIGhvdmVyZWQgaXRlbSBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JCh0aGlzKS5wcmV2QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5odG1sKCcmIzk3MzMgJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9wcmV2U2liJyk7XHJcblxyXG5cdFx0XHRcdC8qKiBcclxuXHRcdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGFmdGVyIGhvdmVyZWQgaXRlbSBpbnRvIHRoZSB1bnNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgdW5zZWxlY3RlZCBjb2xvclxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdCQodGhpcykubmV4dEFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuaHRtbCgnJiM5NzM0ICcpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfbmV4dFNpYicpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQub24oJ21vdXNlbGVhdmUnLCAnLm1vdmllX3JhdGluZ19zdGFyJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9wcmV2U2liJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9uZXh0U2liJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0LyoqIFJlc2V0IGFsbCBzdGFycyB0byBvcmlnaW5hbCBzdGF0ZSAqL1xyXG5cdFx0XHRcdGlmICggJCh0aGlzKS5oYXNDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKSApIHtcclxuXHRcdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzMzICcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmh0bWwoJyYjOTczNCAnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnLm1vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykuaHRtbCgnJiM5NzMzICcpO1xyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoJy5tb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJykuaHRtbCgnJiM5NzM0ICcpO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH1cclxuXHQsXHJcblx0cmF0aW5nX2NsaWNrIDogKCkgPT4ge1xyXG5cdFx0Ly8gJCgnLm1vdmllX3JhdGluZ19zdGFyJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdjbGljaycsICcubW92aWVfcmF0aW5nX3N0YXInLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR2YXIgbW92aWVfcmF0aW5nX3NlbCA9ICQodGhpcykuYXR0cignZGF0YS1yYXRpbmdzdGFyJyk7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQodGhpcykuY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvKiogRmlyZSBjaGFuZ2UgZXZlbnQgb24gYXNzb2NpYXRlZCBpbnB1dCAqL1xyXG5cdFx0XHQkKCcjbW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCkudmFsKG1vdmllX3JhdGluZ19zZWwpLmNoYW5nZSgpO1xyXG5cclxuXHRcdFx0dmFyIG9nVmFsID0gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKCcjbW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCkudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHQvKiogQ2hhbmdlIGNvbG9ycyBvbiByYXRpbmcgZGlzcGxheSB0byBtaW1pYyBpbnB1dCBmaWVsZHMgKi9cclxuXHRcdFx0aWYgKG9nVmFsICE9PSBjdXJyVmFsKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcubW92aWVfcmF0aW5nX3N0YXJzJykuYWRkQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcubW92aWVfcmF0aW5nX3N0YXJzJykucmVtb3ZlQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKiBcclxuXHRcdFx0ICogTWFrZSBzZWxjdGVkIGl0ZW0gXHJcblx0XHRcdCAqIGFuZCBhbGwgc2libGluZyBpdGVtcyBiZWZvcmUgaXQgXHJcblx0XHRcdCAqIGludG8gdGhlIHNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdCAqL1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJyk7XHJcblx0XHRcdCQodGhpcykucHJldkFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKTtcclxuXHJcblx0XHRcdC8qKiBcclxuXHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBhZnRlciBzZWxlY3RlZCBpdGVtIGludG8gdGhlIHVuc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgdW5zZWxlY3RlZCBjb2xvclxyXG5cdFx0XHQgKi9cclxuXHRcdFx0JCh0aGlzKS5uZXh0QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZV9jaGVjayA6ICgpID0+IHtcclxuXHRcdC8vIGNoZWNrIGlmIGZpZWxkcyBhc3NvY2lhdGVkIHRvIGdpdmVuIHNhdmUgYnV0dG9uIGhhdmUgY2hhbmdlZFxyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGxfY2hlY2sgOiAoKSA9PiB7XHJcblx0XHRpZiAoICQoJy52YWxDaGcnKS5sZW5ndGggIT09IDAgKSB7XHJcblx0XHRcdCQoJy5zYXZlLWFsbCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cclxuXHRcdFx0LyoqIElmIGFuIC5tc2dfdW5zYXZlZENoZ3MgaXNuJ3QgYWxyZWFkeSBwcmVzZW50LCBhZGQgaXQgKi9cclxuXHRcdFx0aWYgKCAkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ191bnNhdmVkQ2hncycpLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfdW5zYXZlZENoZ3MgbXNnLXdhcm5pbmdcIj5UaGVyZSBhcmUgdW5zYXZlZCBjaGFuZ2VzITwvc21hbGw+Jyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5zYXZlLWFsbCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3Vuc2F2ZWRDaGdzJykucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZV9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5zYXZlX2l0ZW0nKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0JCh0aGlzKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcmVjaWQnKTtcclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnNhdmVfb25lKG1vdmllX3JlY2lkKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGxfY2xpY2sgOiAoKSA9PiB7XHJcblx0XHQkKCcuc2F2ZS1hbGwnKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0JCgnLnNhdmUtYWxsJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnNhdmVfYWxsKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfaXRlbSA6IChtb3ZpZV9yZWNpZCkgPT4ge1xyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCdJRCc6IG1vdmllX3JlY2lkXHJcblx0XHR9O1xyXG5cdFx0dmFyIHJlcV9vYmpfZmxkcyA9IHt9O1xyXG5cdFx0dmFyIGNoZ2RGbGRzQXJyID0gJCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkKS5maW5kKCcudmFsQ2hnJyk7XHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogRm9yIGVhY2ggY2hhbmdlZCBmaWVsZCwgXHJcblx0XHQgKiBnZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB0aGF0IGhhcyB0aGUgYXNzb2NpYXRlZCBmaWVsZCBuYW1lIGluIHRoZSBkYXRhIHN0b3JlXHJcblx0XHQgKiBhbG9uZyB3aXRoIHRoZSBmaWVsZCB2YWx1ZSBcclxuXHRcdCAqIHRvIGJ1aWxkIGFuIG9iamVjdCBvZiBrZXkvdmFsdWUgcGFpcnMgXHJcblx0XHQgKiB0byBzZW5kIGluIGVhY2ggcmVxdWVzdFxyXG5cdFx0ICovXHJcblxyXG5cdFx0JC5lYWNoKGNoZ2RGbGRzQXJyLCBmdW5jdGlvbiAoaWR4X2ZsZCwgaXRtX2ZsZCkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtX2ZsZCkuYXR0cignZGF0YS1mbGRuYW1lJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bV9mbGQpLnZhbCgpO1xyXG5cclxuXHRcdFx0aWYgKCBmbGROYW1lID09PSAnWWVhcicgfCBmbGROYW1lID09PSAnTGVuZ3RoJyB8IGZsZE5hbWUgPT09ICdSYXRpbmcnICkge1xyXG5cdFx0XHRcdGZsZFZhbCA9IE51bWJlcihmbGRWYWwpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXFfb2JqX2ZsZHNbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXFfb2JqLmZpZWxkcyA9IHJlcV9vYmpfZmxkcztcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdHZhciBzYXZlSXRlbVByb20gPSBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKHByb21TdWNjZXNzLCBwcm9tRXJyb3IpIHtcclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X3VwZGF0ZV9tb3ZpZScsXHJcblx0XHRcdFx0dHlwZTogJ1BBVENIJyxcclxuXHRcdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdFx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0XHQvKiogUmVzZXQgZmllbGRzIHRvIHVuY2hhbmdlZCBzdHlsZSAqL1xyXG5cdFx0XHRcdFx0JCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkKS5maW5kKCcudmFsQ2hnLCAudmFsQ2hnLWNvbG9yc09ubHknKS5yZW1vdmVDbGFzcygndmFsQ2hnIHZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblxyXG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcubW92aWVfcmF0aW5nX3N0YXJzJykucmVtb3ZlQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblxyXG5cdFx0XHRcdFx0cHJvbVN1Y2Nlc3MoKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cHJvbUVycm9yKCk7XHJcblxyXG5cdFx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gc2F2ZUl0ZW1Qcm9tO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9vbmUgOiAobW92aWVfcmVjaWQpID0+IHtcclxuXHRcdHZhciBzYXZlSXRlbSA9IG1vdmllX2FkbWluLnNhdmVfaXRlbShtb3ZpZV9yZWNpZCk7XHJcblxyXG5cdFx0c2F2ZUl0ZW0udGhlbihcclxuXHRcdFx0ZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8qKiBGbGFnIGFuIGVsZW1lbnQgc28gdGhlIG1lc3NhZ2UgY2FuIGJlIHBsYWNlZCBjb250ZXh0dWFsbHkgKi9cclxuXHRcdFx0XHQvL1xyXG5cclxuXHRcdFx0XHRtb3ZpZV9hZG1pbi5zdGF0dXNfbXNnKCdzYXZlX29uZV9zdWNjZXNzJyk7XHJcblx0XHRcdH0sIFxyXG5cdFx0XHRmdW5jdGlvbiAoZXJyT2JqKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJPYmopO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGwgOiAoKSA9PiB7XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ19zYXZlU3RhdHVzJykucmVtb3ZlKCk7XHJcblxyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX3NhdmluZ0FsbENoZ3MgbXNnLWluZm9cIj5TYXZpbmcgYWxsIGNoYW5nZXMuLi48L3NtYWxsPicpO1xyXG5cclxuXHRcdC8qKiBHYXRoZXIgY2hhbmdlcyBhbmQgc2VuZCBQQVRDSCByZXF1ZXN0IHRvIEFQSSBwZXIgbW92aWUgKi9cclxuXHJcblx0XHQvKiogXHJcblx0XHQgKiBDaGFuZ2VzIG5lZWQgdG8gYmUgZ3JvdXBlZCBwZXIgcmVjb3JkIChpLmUuLCBtb3ZpZSlcclxuXHRcdCAqIFxyXG5cdFx0ICogUHJldHR5IHN1cmUgdGhlIGJlc3Qgb3B0aW9uIGlzIHRvIFxyXG5cdFx0ICogZmxhZyBhIHBhcmVudCBlbGVtZW50IChlLmcuLCBcIi5tb3ZpZV9saXN0aW5nXCIpIG9uIGNoYW5nZXMsXHJcblx0XHQgKiB1c2luZyB0aGF0IGFzIHRoZSBzdGFydGluZyBwb2ludCBcclxuXHRcdCAqIHRvIHRyYXZlcnNlIGRvd24gY2hpbGRyZW5cclxuXHRcdCAqIGFuZCBjb2xsZWN0IGNoYW5nZXMuXHJcblx0XHQgKlxyXG5cdFx0ICogSWYgYWxsIGNoYW5nZXMgZm9yIGEgZ2l2ZW4gcmVjb3JkIGFyZSBiYWNrZWQgb3V0XHJcblx0XHQgKiBjbGVhciBmbGFnIG9uIHBhcmVudCBlbGVtZW50XHJcblx0XHQgKi9cclxuXHJcblx0XHR2YXIgY2hnZE1vdmllc0FyciA9ICQoJy5tb3ZpZV9saXN0aW5nW2RhdGEtaGFzY2hncz1cInRydWVcIl0nKTtcclxuXHJcblx0XHQkLmVhY2goY2hnZE1vdmllc0FyciwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQoaXRtKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblxyXG5cdFx0XHR2YXIgc2F2ZUl0ZW0gPSBtb3ZpZV9hZG1pbi5zYXZlX2l0ZW0obW92aWVfcmVjaWQpO1xyXG5cclxuXHRcdFx0c2F2ZUl0ZW0udGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZiAoaWR4KzEgPT09IGNoZ2RNb3ZpZXNBcnIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfYWxsX3N1Y2Nlc3MnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiAoZXJyT2JqKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVyck9iaik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzdGF0dXNfbXNnIDogKHN0YXR1c19tc2cpID0+IHtcclxuXHRcdHN3aXRjaCAoc3RhdHVzX21zZykge1xyXG5cdFx0XHRjYXNlICdzYXZlX29uZV9zdWNjZXNzJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfb25lX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX3N1Y2Nlc3MnOlxyXG5cdFx0XHRcdC8qKiBSZW1vdmUgYW55IG1lc3NhZ2VzIGFib3V0IHNhdmUgc3RhdHVzICovXHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfc2F2ZVN0YXR1cycpLnJlbW92ZSgpO1xyXG5cclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfY2hnc1NhdmVkIG1zZy1zdWNjZXNzXCI+QWxsIGNoYW5nZXMgc2F2ZWQuPC9zbWFsbD4nKTtcclxuXHJcblx0XHRcdFx0LyoqIEFmdGVyIHNwZWNpZmljZWQgZGVsYXksIGZhZGUgdGhlIG1lc3NhZ2UsIHRoZW4gcmVtb3ZlIGZyb20gRE9NICovXHJcblx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX2NoZ3NTYXZlZCcpLmZhZGVPdXQoJ3Nsb3cnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSwgMjAwMCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzYXZlX2FsbF9lcnJvcic6XHJcblx0XHRcdFx0Ly8gXHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxufSkuaW5pdCgpO1xyXG4iXX0=
