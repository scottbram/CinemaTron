var movie_admin="object"==typeof movie_admin?movie_admin:{};(movie_admin={init:()=>{$.ajax({url:"/.netlify/functions/at_get_movie?recid=all",dataType:"json"}).done(function(e,a,t){e.length>0&&$.each(e,function(a,t){var i,s,l,o=t.id,n=t.fields,r=n.Title,m=n.Year,_=n.Length,v=n.Rating,d=n.Format,c=(n.Art,movie_admin.seeing_stars(v));switch(d){case"DVD":i="selected";break;case"Streaming":s="selected";break;case"VHS":l="selected"}var g='<div class="movie_listing form-group" data-recid="'+o+'"data-haschgs="false"id="movie_listing_'+o+'"><div class="movie_title form-field-container"><label for="movie_title_'+o+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+o+'" value="'+r+'" data-fldname="Title" data-ogval="'+r+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+o+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+o+'" value="'+m+'" data-fldname="Year" data-ogval="'+m+'" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+o+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+o+'" value="'+_+'" data-fldname="Length" data-ogval="'+_+'" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+o+'">Rating</label>'+c+'<input id="movie_rating_'+o+'" value="'+v+'" data-fldname="Rating" data-ogval="'+v+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format form-field-container"><label for="movie_format_'+o+'">Format</label><select id="movie_format_'+o+'" class="form-control" data-fldname="Format" data-ogval="'+d+'"><option value="DVD"'+i+'>DVD</option><option value="Streaming"'+s+'>Streaming</option><option value="VHS"'+l+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(g),a+1===e.length&&movie_admin.ready()})}).fail(function(e,a,t){$("#movie_list_status").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t);$("#movie_admin").prepend('<div id="movie_list_status" class="alert alert-warning fade show" role="alert"><span id="movie_list_status_msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:()=>{$("#movie_list_status").alert("close"),movie_admin.add_movie_click(),$(".add-movie").prop("disabled",!1),movie_admin.track_changes_field(),movie_admin.rating_hover(),movie_admin.rating_click(),movie_admin.save_all_click()},add_movie_click:()=>{$(".add-movie").click(function(e){movie_admin.add_movie(),$("input").first().focus()})},add_movie:()=>{var e=Date.now(),a='<div class="movie_listing form-group" data-recid="'+e+'"data-haschgs="false"id="movie_listing_'+e+'"class="movie_listing_new"><div class="movie_title form-field-container"><label for="movie_title_'+e+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+e+'" value="" data-fldname="Title" class="form-control" type="text" minlength="1" maxlength="50" required></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+e+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+e+'" value="" data-fldname="Year" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+e+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+e+'" value="" data-fldname="Length" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+e+'">Rating</label>'+movie_admin.seeing_stars("1")+'<input id="movie_rating_'+e+'" value="1" data-fldname="Rating" class="form-control" type="number" min="1" max="5" hidden required></div><div class="movie_format form-field-container"><label for="movie_format_'+e+'">Format</label><select id="movie_format_'+e+'" class="form-control" data-fldname="Format"><option value="DVD">DVD</option><option value="Streaming" selected>Streaming</option><option value="VHS">VHS</option></select></div></div></div>';$("#movie_admin_list").prepend(a)},seeing_stars:e=>{var a="";a+='<div class="movie_rating_stars">';for(var t=1,i=0;i<e;i++)a+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+t+'">&#9733 </span>',t++;var s=5-e;for(i=0;i<s;i++)a+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+t+'">&#9734  </span>',t++;return a+="</div>"},track_changes_field:()=>{$("#movie_admin_list").on("input change","input",function(e){var a=$(this).attr("data-ogval"),t=$(this).val(),i=$(this).attr("data-fldname"),s=$(this)[0];if(s.setCustomValidity(""),a!==t)switch($(this).addClass("valChg"),i){case"Title":var l=$(this).val().length>0&&$(this).val().length<51;console.log("chk_title: "+l),l?s.setCustomValidity(""):s.setCustomValidity("Title must be 1 to 50 characters");break;case"Year":var o=utils.input_numbers_only(t);$(this).val(o);var n=4===$(this).val().length&&parseInt($(this).val())>=1800&&parseInt($(this).val())<=2100;console.log("chk_yr: "+n),n?s.setCustomValidity(""):s.setCustomValidity("Must be a 4 digit number between 1800 and 2100");break;case"Length":o=utils.input_numbers_only(t);$(this).val(o);var r=parseInt($(this).val())>=1&&parseInt($(this).val())<=999;console.log("chk_len: "+r),r?s.setCustomValidity(""):s.setCustomValidity("Must be a 3 digit number greater than 1")}else $(this).removeClass("valChg").nextAll(".valChgMsg").remove();s.checkValidity()||console.log(s.validationMessage),movie_admin.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(e){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),movie_admin.track_changes_listing($(this))})},track_changes_listing:e=>{e.closest(".movie_listing").find("input, select").hasClass("valChg")?e.closest(".movie_listing").attr("data-haschgs",!0):e.closest(".movie_listing").attr("data-haschgs",!1),movie_admin.save_all_check()},rating_hover:()=>{$("#movie_admin_list").on("mouseenter",".movie_rating_star",function(e){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")}).on("mouseleave",".movie_rating_star",function(e){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:()=>{$("#movie_admin_list").on("click",".movie_rating_star",function(e){var a=$(this).attr("data-ratingstar"),t=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+t).val(a).change(),$("#movie_rating_"+t).attr("data-ogval")!==$("#movie_rating_"+t).val()?$(this).closest(".movie_rating_stars").addClass("valChg-colorsOnly"):$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:()=>{},save_all_check:()=>{0!==$(".valChg").length?($(".save-all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save-all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:()=>{$(".save_item").click(function(e){$(this).prop("disabled",!0);var a=$(this).attr("data-recid");movie_admin.save_one(a)})},save_all_click:()=>{$(".save-all").click(function(e){$(".save-all").prop("disabled",!0),movie_admin.save_all()})},save_item:e=>{var a={ID:e},t={},i=$("#movie_listing_"+e).find(".valChg");$.each(i,function(e,a){var i=$(a).attr("data-fldname"),s=$(a).val();"Year"===i|"Length"===i|"Rating"===i&&(s=Number(s)),t[i]=s}),a.fields=t;var s=JSON.stringify(a);return new Promise(function(a,t){$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:s,success:function(t,i,s){console.log("success event"),$("#movie_listing_"+e).find(".valChg, .valChg-colorsOnly").removeClass("valChg valChg-colorsOnly"),$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),a()},error:function(e,a,i){var s;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(i),void 0!==e.responseJSON){s=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else s=e.responseText;t(),alert("Error:\n"+s)},complete:function(){console.log("complete event")}})})},save_one:e=>{movie_admin.save_item(e).then(function(){movie_admin.status_msg("save_one_success")},function(e){console.error(e)})},save_all:()=>{$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var e=$('.movie_listing[data-haschgs="true"]');$.each(e,function(a,t){var i=$(t).attr("data-recid");movie_admin.save_item(i).then(function(){a+1===e.length&&movie_admin.status_msg("save_all_success")},function(e){console.error(e)})})},status_msg:e=>{switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(e){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvbW92aWVfYWRtaW4uanMiXSwibmFtZXMiOlsibW92aWVfYWRtaW4iLCJpbml0IiwiJCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwidGV4dFN0YXR1cyIsImpxWEhSIiwibGVuZ3RoIiwiZWFjaCIsImlkeCIsIml0bSIsIkRWRHNlbCIsIlNUUnNlbCIsIlZIU3NlbCIsIm1vdmllX3JlY2lkIiwiaWQiLCJtb3ZpZV9vYmoiLCJmaWVsZHMiLCJtb3ZpZV90aXRsZSIsIlRpdGxlIiwibW92aWVfeWVhciIsIlllYXIiLCJtb3ZpZV9sZW5ndGgiLCJMZW5ndGgiLCJtb3ZpZV9yYXRpbmciLCJSYXRpbmciLCJtb3ZpZV9mb3JtYXQiLCJGb3JtYXQiLCJtb3ZpZV9yYXRpbmdfc3RhcnMiLCJBcnQiLCJzZWVpbmdfc3RhcnMiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kIiwiYWRkX21vdmllX2NsaWNrIiwicHJvcCIsInRyYWNrX2NoYW5nZXNfZmllbGQiLCJyYXRpbmdfaG92ZXIiLCJyYXRpbmdfY2xpY2siLCJzYXZlX2FsbF9jbGljayIsImNsaWNrIiwiZSIsImFkZF9tb3ZpZSIsImZpcnN0IiwiZm9jdXMiLCJEYXRlIiwibm93IiwicmF0aW5nc3RhciIsImkiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJvbiIsIm9nVmFsIiwidGhpcyIsImF0dHIiLCJjdXJyVmFsIiwidmFsIiwiZmxkX25hbWUiLCJmbGRfZWwiLCJzZXRDdXN0b21WYWxpZGl0eSIsImFkZENsYXNzIiwiY2hrX3RpdGxlIiwiZmxkX3ZhbCIsInV0aWxzIiwiaW5wdXRfbnVtYmVyc19vbmx5IiwiY2hrX3lyIiwicGFyc2VJbnQiLCJjaGtfbGVuIiwicmVtb3ZlQ2xhc3MiLCJuZXh0QWxsIiwicmVtb3ZlIiwiY2hlY2tWYWxpZGl0eSIsInZhbGlkYXRpb25NZXNzYWdlIiwidHJhY2tfY2hhbmdlc19saXN0aW5nIiwianFPYmoiLCJjbG9zZXN0IiwiZmluZCIsImhhc0NsYXNzIiwic2F2ZV9hbGxfY2hlY2siLCJodG1sIiwicHJldkFsbCIsInNpYmxpbmdzIiwibW92aWVfcmF0aW5nX3NlbCIsImNoYW5nZSIsInNhdmVfb25lX2NoZWNrIiwic2F2ZV9vbmVfY2xpY2siLCJzYXZlX29uZSIsInNhdmVfYWxsIiwic2F2ZV9pdGVtIiwicmVxX29iaiIsIklEIiwicmVxX29ial9mbGRzIiwiY2hnZEZsZHNBcnIiLCJpZHhfZmxkIiwiaXRtX2ZsZCIsImZsZE5hbWUiLCJmbGRWYWwiLCJOdW1iZXIiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsIlByb21pc2UiLCJwcm9tU3VjY2VzcyIsInByb21FcnJvciIsInR5cGUiLCJjb250ZW50VHlwZSIsImRhdGEiLCJzdWNjZXNzIiwianFYaHIiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJ0aGVuIiwic3RhdHVzX21zZyIsImVyck9iaiIsImNoZ2RNb3ZpZXNBcnIiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZmFkZU91dCJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsWUFBeUMsaUJBQWxCLFlBQStCQSxZQUFjLElBQ3ZFQSxZQUFjLENBQ2RDLEtBQU8sS0FDTkMsRUFBRUMsS0FBSyxDQUNOQyxJQUFLLDZDQUNMQyxTQUFVLFNBQ1JDLEtBQU0sU0FBV0MsRUFBTUMsRUFBWUMsR0FDakNGLEVBQUtHLE9BQVMsR0FDakJSLEVBQUVTLEtBQUtKLEVBQU0sU0FBU0ssRUFBS0MsR0FDMUIsSUFvQklDLEVBQVFDLEVBQVFDLEVBcEJoQkMsRUFBY0osRUFBSUssR0FVbEJDLEVBQWNOLEVBQUlPLE9BQ2xCQyxFQUFlRixFQUFVRyxNQUN6QkMsRUFBZUosRUFBVUssS0FDekJDLEVBQWdCTixFQUFVTyxPQUMxQkMsRUFBZ0JSLEVB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UUFNbEJELFdBQWNBLElBQ2IsT0FBUUEsR0FDUCxJQUFLLG1CQUdMLElBQUssaUJBRUwsTUFDQSxJQUFLLG1CQUVKekgsRUFBRSxrREFBa0Q0RSxTQUVwRDVFLEVBQUUsa0NBQWtDd0MsUUFBUSxzRkFHNUNvRixPQUFPQyxXQUFZLFdBQ2xCN0gsRUFBRSxpREFBaUQ4SCxRQUFRLE9BQVEsU0FBVTlFLEdBQzVFaEQsRUFBRTJELE1BQU1pQixZQUVQLFNBT0o3RSIsImZpbGUiOiJqcy9tb2R1bGVzL21vdmllX2FkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBtb3ZpZS1hZG1pbi5qcyAqL1xyXG52YXIgbW92aWVfYWRtaW4gPSAoIHR5cGVvZiAobW92aWVfYWRtaW4pID09PSAnb2JqZWN0JyApID8gbW92aWVfYWRtaW4gOiB7fTtcclxuKG1vdmllX2FkbWluID0ge1xyXG5cdGluaXQgOiAoKSA9PiB7XHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2dldF9tb3ZpZT9yZWNpZD1hbGwnLFxyXG5cdFx0XHRkYXRhVHlwZTogJ2pzb24nXHJcblx0XHR9KS5kb25lKCBmdW5jdGlvbiAoIHJlc3AsIHRleHRTdGF0dXMsIGpxWEhSICkge1xyXG5cdFx0XHRpZiAocmVzcC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0JC5lYWNoKHJlc3AsIGZ1bmN0aW9uKGlkeCwgaXRtKSB7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmVjaWQgPSBpdG0uaWQ7XHJcblx0XHRcdFx0XHQvKipcclxuXHRcdFx0XHRcdCAgKiBGaWVsZHM6XHJcblx0XHRcdFx0XHQgICogVGl0bGVcclxuXHRcdFx0XHRcdCAgKiBZZWFyXHJcblx0XHRcdFx0XHQgICogTGVuZ3RoXHJcblx0XHRcdFx0XHQgICogUmF0aW5nXHJcblx0XHRcdFx0XHQgICogRm9ybWF0XHJcblx0XHRcdFx0XHQgICogQXJ0XHJcblx0XHRcdFx0XHQgICovXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfb2JqIFx0XHQ9IGl0bS5maWVsZHM7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfdGl0bGUgXHQ9IG1vdmllX29iai5UaXRsZTtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV95ZWFyIFx0XHQ9IG1vdmllX29iai5ZZWFyO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2xlbmd0aCBcdD0gbW92aWVfb2JqLkxlbmd0aDtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmcgXHQ9IG1vdmllX29iai5SYXRpbmc7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfZm9ybWF0IFx0PSBtb3ZpZV9vYmouRm9ybWF0O1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2FydCBcdFx0PSBtb3ZpZV9vYmouQXJ0O1xyXG5cclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSBtb3ZpZV9hZG1pbi5zZWVpbmdfc3RhcnMobW92aWVfcmF0aW5nKTtcclxuXHJcblx0XHRcdFx0XHR2YXIgRFZEc2VsLCBTVFJzZWwsIFZIU3NlbDtcclxuXHRcdFx0XHRcdHN3aXRjaCAobW92aWVfZm9ybWF0KSB7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ0RWRCc6XHJcblx0XHRcdFx0XHRcdFx0RFZEc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ1N0cmVhbWluZyc6XHJcblx0XHRcdFx0XHRcdFx0U1RSc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ1ZIUyc6XHJcblx0XHRcdFx0XHRcdFx0VkhTc2VsID0gJ3NlbGVjdGVkJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9saXN0aW5nID0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9saXN0aW5nIGZvcm0tZ3JvdXBcIiAnICtcclxuXHRcdFx0XHRcdFx0XHQnZGF0YS1yZWNpZD1cIicgKyBtb3ZpZV9yZWNpZCArJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0J2RhdGEtaGFzY2hncz1cImZhbHNlXCInICtcclxuXHRcdFx0XHRcdFx0XHQnaWQ9XCJtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJzxkaXYgY2xhc3M9XCJtb3ZpZV9wb3N0ZXJcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3RpdGxlIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIj5UaXRsZSA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KDUwIGNoYXJhY3RlcnMgb3IgbGVzcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfdGl0bGUgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCI1MFwiJyArIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2RldGFpbHNcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfeWVhciBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiPlllYXIgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihmcm9tIDE4MDAgdG8gMjEwMCk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiWWVhclwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3llYXIgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKiogSW5wdXQgdHlwZT1cIm51bWJlclwiIGhhcyB1bmRlc2lyYWJsZSBzaWRlIGVmZmVjdHMgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxODAwXCIgbWF4PVwiMjEwMFwiJyArIFxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKiogVGhpcyBwYXR0ZXJuIGlzIHBlcmZlY3QgYnV0IHRyaWdnZXJpbmcgdGhlIG51bWVyaWMga2V5cGFkIG9uIG1vYmlsZSBpcyBwZXJmZWN0ZXIgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkezR9XCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LyoqIEZ1biBmYWN0OiBUaGlzIHBhdHRlcm4gd2lsbCB0cmlnZ2VyIHRoZSBudW1lcmljIGtleXBhZCBvbiBtb2JpbGUgKi9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkKlwiIG1heGxlbmd0aD1cIjRcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9sZW5ndGggZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiPkxlbmd0aCA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGluIG1pbnV0ZXMpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJMZW5ndGhcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiOTk5XCInICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIHBhdHRlcm49XCJcXFxcZCpcIiBtYXhsZW5ndGg9XCIzXCIgcmVxdWlyZWQnICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfcmF0aW5nIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIj5SYXRpbmc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJSYXRpbmdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbicgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9mb3JtYXQgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiPkZvcm1hdDwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vICc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiRm9ybWF0XCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfZm9ybWF0ICsgJ1wiJyArJz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnPG9wdGlvbiBzZWxlY3RlZD5PcGVuIHRoaXMgc2VsZWN0IG1lbnU8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIkRWRFwiJyArIERWRHNlbCArICc+RFZEPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJTdHJlYW1pbmdcIicgKyBTVFJzZWwgKyAnPlN0cmVhbWluZzwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiVkhTXCInICsgVkhTc2VsICsgJz5WSFM8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Jzwvc2VsZWN0PicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0JzwvZGl2PidcclxuXHRcdFx0XHRcdDtcclxuXHJcblx0XHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLmFwcGVuZChtb3ZpZV9saXN0aW5nKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoaWR4KzEgPT09IHJlc3AubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FkbWluLnJlYWR5KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pLmZhaWwoIGZ1bmN0aW9uICgganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHQkKCcjbW92aWVfbGlzdF9zdGF0dXMnKS5hbGVydCgnY2xvc2UnKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHJcblx0XHRcdHZhciBlcnJNc2cgPSAnPGRpdiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzXCIgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPicgK1xyXG5cdFx0XHRcdFx0JzxzcGFuIGlkPVwibW92aWVfbGlzdF9zdGF0dXNfbXNnXCI+VGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBtb3ZpZXMuPC9icj5UcnkgcmVmcmVzaGluZyB0aGUgcGFnZSBhbmQgaWYgdGhlIHByb2JsZW0gcGVyc2lzdHMsIHBsZWFzZSBjb250YWN0IHVzLjwvc3Bhbj4nICtcclxuXHRcdFx0XHQnPC9kaXY+JztcclxuXHRcdFx0XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbicpLnByZXBlbmQoZXJyTXNnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0cmVhZHkgOiAoKSA9PiB7XHJcblx0XHQkKCcjbW92aWVfbGlzdF9zdGF0dXMnKS5hbGVydCgnY2xvc2UnKTtcclxuXHJcblx0XHRtb3ZpZV9hZG1pbi5hZGRfbW92aWVfY2xpY2soKTtcclxuXHRcdCQoJy5hZGQtbW92aWUnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHJcblx0XHRcclxuXHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfZmllbGQoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19ob3ZlcigpO1xyXG5cdFx0bW92aWVfYWRtaW4ucmF0aW5nX2NsaWNrKCk7XHJcblx0XHQvLyBtb3ZpZV9hZG1pbi5zYXZlX29uZV9jbGljaygpO1xyXG5cdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGxfY2xpY2soKTtcclxuXHR9XHJcblx0LFxyXG5cdGFkZF9tb3ZpZV9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5hZGQtbW92aWUnKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0bW92aWVfYWRtaW4uYWRkX21vdmllKCk7XHJcblxyXG5cdFx0XHQkKCdpbnB1dCcpLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0YWRkX21vdmllIDogKCkgPT4ge1xyXG5cdFx0dmFyIG1vdmllX3JlY2lkID0gRGF0ZS5ub3coKTtcclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSBtb3ZpZV9hZG1pbi5zZWVpbmdfc3RhcnMoJzEnKTtcclxuXHJcblx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZyBmb3JtLWdyb3VwXCIgJyArXHJcblx0XHRcdFx0J2RhdGEtcmVjaWQ9XCInICsgbW92aWVfcmVjaWQgKydcIicgK1xyXG5cdFx0XHRcdC8vICdkYXRhLXJlY2lkPVwibmV3XCInICtcclxuXHRcdFx0XHQnZGF0YS1oYXNjaGdzPVwiZmFsc2VcIicgK1xyXG5cdFx0XHRcdCdpZD1cIm1vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0J2NsYXNzPVwibW92aWVfbGlzdGluZ19uZXdcIicgK1xyXG5cdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0Ly8gJzxkaXYgY2xhc3M9XCJtb3ZpZV9wb3N0ZXJcIj48L2Rpdj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3RpdGxlIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIj5UaXRsZSA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KDUwIGNoYXJhY3RlcnMgb3IgbGVzcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdCcgdmFsdWU9XCJcIicgK1xyXG5cdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIlRpdGxlXCInICtcclxuXHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwibmV3X21vdmllXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0Ly8gJyBwbGFjZWhvbGRlcj1cIlRoZSBCaWcgRmxpY2sgVGl0bGVcIicgK1xyXG5cdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgbWlubGVuZ3RoPVwiMVwiIG1heGxlbmd0aD1cIjUwXCIgcmVxdWlyZWQnICsgXHJcblx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZGV0YWlsc1wiPicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV95ZWFyIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfeWVhcl8nICsgbW92aWVfcmVjaWQgKyAnXCI+WWVhciA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGZyb20gMTgwMCB0byAyMTAwKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIlwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJZZWFyXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCJuZXdfbW92aWVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBwbGFjZWhvbGRlcj1cIjIwMTlcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGQqXCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2xlbmd0aCBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCI+TGVuZ3RoIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oaW4gbWludXRlcyk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV9sZW5ndGhfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIlwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJMZW5ndGhcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIHBsYWNlaG9sZGVyPVwiMTUwXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgbWF4PVwiNTAwXCIgbWlubGVuZ3RoPVwiMVwiIG1heGxlbmd0aD1cIjNcIiBwYXR0ZXJuPVwiXFxcXGR7NH1cIiByZXF1aXJlZCcgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGQqXCIgbWF4bGVuZ3RoPVwiM1wiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZyBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCI+UmF0aW5nPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICtcclxuXHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiMVwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJSYXRpbmdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9mb3JtYXQgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiPkZvcm1hdDwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdC8vICc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIicgK1xyXG5cdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiRm9ybWF0XCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfZm9ybWF0ICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPG9wdGlvbiBzZWxlY3RlZD5PcGVuIHRoaXMgc2VsZWN0IG1lbnU8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIkRWRFwiPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCIgc2VsZWN0ZWQ+U3RyZWFtaW5nPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJWSFNcIj5WSFM8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0Jzwvc2VsZWN0PicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0JzwvZGl2PidcclxuXHRcdDtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLnByZXBlbmQobW92aWVfbGlzdGluZyk7XHJcblx0fVxyXG5cdCxcclxuXHRzZWVpbmdfc3RhcnMgOiAobW92aWVfcmF0aW5nKSA9PiB7XHJcblx0XHQvKipcclxuXHRcdCAqIFN0YXIgQVNDSUkgY29kZXNcclxuXHRcdCAqIC0gLSAtIC0gLSAtIC0gLSAtXHJcblx0XHQgKiBTb2xpZCBzdGFyOiAmIzk3MzM7XHJcblx0XHQgKiBPdXRsaW5lIHN0YXI6ICYjOTczNDtcclxuXHRcdCAqL1xyXG5cdFx0dmFyIG1vdmllX3JhdGluZ19zdGFycyA9ICcnO1xyXG5cdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhcnNcIj4nO1xyXG5cdFx0LyoqIFNldCB0aGUgbG93ZXN0IHZhbHVlICovXHJcblx0XHR2YXIgcmF0aW5nc3RhciA9IDE7XHJcblx0XHQvKiogQWRkIGEgc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgdGhlIHNlbGVjdGVkIHJhdGluZyB2YWx1ZSBpcyByZWFjaGVkICovXHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vdmllX3JhdGluZzsgaSsrKSB7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczMyA8L3NwYW4+JztcclxuXHRcdFx0XHJcblx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdH1cclxuXHRcdC8qKiBTdWJ0cmFjdCB0aGUgc2VsZWN0ZWQgcmF0aW5nIGZyb20gdGhlIGhpZ2hlc3QgcG9zc2libGUgdG8gZ2V0IGFuIHVuc2VsZWN0ZWQvZmlsbGVyIGNvdW50ICovXHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdCA9IDU7XHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZEN0ID0gbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdC1tb3ZpZV9yYXRpbmc7XHJcblx0XHQvKiogQWRkIGFuIHVuc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgZmlsbGVyIGNvdW50IGlzIHJlYWNoZWQgKi9cclxuXHRcdGZvciAoaSA9IDA7IGkgPCBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3Q7IGkrKykge1xyXG5cdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxzcGFuIGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczNCAgPC9zcGFuPic7XHJcblxyXG5cdFx0XHRyYXRpbmdzdGFyKys7XHJcblx0XHR9XHJcblx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzwvZGl2Pic7XHJcblxyXG5cdFx0cmV0dXJuIG1vdmllX3JhdGluZ19zdGFycztcclxuXHR9XHJcblx0LFxyXG5cdHRyYWNrX2NoYW5nZXNfZmllbGQgOiAoKSA9PiB7XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR2YXIgb2dWYWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cdFx0XHR2YXIgZmxkX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZmxkbmFtZScpO1xyXG5cdFx0XHR2YXIgZmxkX2VsID0gJCh0aGlzKVswXTtcclxuXHRcdFx0XHJcblx0XHRcdC8qKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVmFsaWRpdHlTdGF0ZSAqL1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpO1xyXG5cclxuXHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8qKiBJZiB0aGUgY3VycmVudCB2YWx1ZSBpc24ndCB0aGUgb3JpZ2luYWwgdmFsdWUsIG1hcmsgdGhlIGZpZWxkIGFzIGNoYW5nZWQgKi9cclxuXHRcdFx0aWYgKG9nVmFsICE9PSBjdXJyVmFsKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygndmFsQ2hnJyk7XHJcblxyXG5cdFx0XHRcdC8qKiBEbyBzb21lIHZhbGlkYXRpb24gKi9cclxuXHRcdFx0XHRzd2l0Y2ggKGZsZF9uYW1lKSB7XHJcblx0XHRcdFx0XHRjYXNlICdUaXRsZSc6XHJcblx0XHRcdFx0XHRcdFx0dmFyIGNoa190aXRsZSA9ICQodGhpcykudmFsKCkubGVuZ3RoID4gMCAmJiAkKHRoaXMpLnZhbCgpLmxlbmd0aCA8IDUxO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Noa190aXRsZTogJyArIGNoa190aXRsZSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFjaGtfdGl0bGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnVGl0bGUgbXVzdCBiZSAxIHRvIDUwIGNoYXJhY3RlcnMnKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ1llYXInOlxyXG5cdFx0XHRcdFx0XHQvKiogT25seSBhbGxvdyBudW1iZXJzICovXHJcblx0XHRcdFx0XHRcdC8vIHZhciBmbGRfdmFsID0gZmxkX3ZhbC5yZXBsYWNlKC9bXjAtOV0rL2csICcnKTtcclxuXHRcdFx0XHRcdFx0dmFyIGZsZF92YWwgPSB1dGlscy5pbnB1dF9udW1iZXJzX29ubHkoY3VyclZhbCk7XHJcblx0XHRcdFx0XHRcdCQodGhpcykudmFsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGNoa195ciA9ICQodGhpcykudmFsKCkubGVuZ3RoID09PSA0ICYmICggcGFyc2VJbnQoICQodGhpcykudmFsKCkgKSA+PSAxODAwICYmIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPD0gMjEwMCApO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjaGtfeXI6ICcgKyBjaGtfeXIpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKCFjaGtfeXIpIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJ011c3QgYmUgYSA0IGRpZ2l0IG51bWJlciBiZXR3ZWVuIDE4MDAgYW5kIDIxMDAnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ0xlbmd0aCc6XHJcblx0XHRcdFx0XHRcdC8qKiBPbmx5IGFsbG93IG51bWJlcnMgKi9cclxuXHRcdFx0XHRcdFx0Ly8gdmFyIGZsZF92YWwgPSBmbGRfdmFsLnJlcGxhY2UoL1teMC05XSsvZywgJycpO1xyXG5cdFx0XHRcdFx0XHR2YXIgZmxkX3ZhbCA9IHV0aWxzLmlucHV0X251bWJlcnNfb25seShjdXJyVmFsKTtcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS52YWwoZmxkX3ZhbCk7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgY2hrX2xlbiA9ICggcGFyc2VJbnQoICQodGhpcykudmFsKCkgKSA+PSAxICYmIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPD0gOTk5ICk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Noa19sZW46ICcgKyBjaGtfbGVuKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmICggIWNoa19sZW4gKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdNdXN0IGJlIGEgMyBkaWdpdCBudW1iZXIgZ3JlYXRlciB0aGFuIDEnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcclxuXHJcblx0XHRcdGlmICghZmxkX2lzVmFsaWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19saXN0aW5nKCAkKHRoaXMpICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdjaGFuZ2UnLCAnc2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG9nVmFsID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9ndmFsJyk7XHJcblx0XHRcdHZhciBjdXJyVmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcblx0XHRcdC8qKiBJZiB0aGUgY3VycmVudCB2YWx1ZSBpc24ndCB0aGUgb3JpZ2luYWwgdmFsdWUsIG1hcmsgdGhlIGZpZWxkICovXHJcblx0XHRcdGlmIChvZ1ZhbCAhPT0gY3VyclZhbCkge1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3ZhbENoZycpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3ZhbENoZycpLm5leHRBbGwoJy52YWxDaGdNc2cnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19saXN0aW5nKCAkKHRoaXMpICk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHRyYWNrX2NoYW5nZXNfbGlzdGluZyA6IChqcU9iaikgPT4ge1xyXG5cdFx0dmFyIGhhc0NoZ3MgPSBqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmZpbmQoJ2lucHV0LCBzZWxlY3QnKS5oYXNDbGFzcygndmFsQ2hnJyk7XHJcblxyXG5cdFx0aWYgKGhhc0NoZ3MpIHtcclxuXHRcdFx0anFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLWhhc2NoZ3MnLCB0cnVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1oYXNjaGdzJywgZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NoZWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfaG92ZXIgOiAoKSA9PiB7XHJcblx0XHQvKiogSGF2ZSB0byB1c2UgZGVsZWdhdGVkIGFwcHJvYWNoIHRvIHdvcmsgd2l0aCBpbmplY3RlZCBlbGVtZW50cyAoZS5nLiwgbmV3IG1vdmllKSAqL1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKVxyXG5cdFx0XHQub24oJ21vdXNlZW50ZXInLCAnLm1vdmllX3JhdGluZ19zdGFyJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFxyXG5cdFx0XHRcdC8qKiBNYWtlIGhvdmVyZWQgaXRlbSBpbnRvIHNlbGVjdGVkIHN0YXRlICovXHJcblx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblxyXG5cdFx0XHRcdC8qKiBcclxuXHRcdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGJlZm9yZSBob3ZlcmVkIGl0ZW0gaW50byB0aGUgc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdCQodGhpcykucHJldkFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuaHRtbCgnJiM5NzMzICcpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfcHJldlNpYicpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBhZnRlciBob3ZlcmVkIGl0ZW0gaW50byB0aGUgdW5zZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLm5leHRBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczNCAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0Lm9uKCdtb3VzZWxlYXZlJywgJy5tb3ZpZV9yYXRpbmdfc3RhcicsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfcHJldlNpYicpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfbmV4dFNpYicpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8qKiBSZXNldCBhbGwgc3RhcnMgdG8gb3JpZ2luYWwgc3RhdGUgKi9cclxuXHRcdFx0XHRpZiAoICQodGhpcykuaGFzQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmh0bWwoJyYjOTczMyAnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzQgJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoJy5tb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLmh0bWwoJyYjOTczMyAnKTtcclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCcubW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpLmh0bWwoJyYjOTczNCAnKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblx0LFxyXG5cdHJhdGluZ19jbGljayA6ICgpID0+IHtcclxuXHRcdC8vICQoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignY2xpY2snLCAnLm1vdmllX3JhdGluZ19zdGFyJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIG1vdmllX3JhdGluZ19zZWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcmF0aW5nc3RhcicpO1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqIEZpcmUgY2hhbmdlIGV2ZW50IG9uIGFzc29jaWF0ZWQgaW5wdXQgKi9cclxuXHRcdFx0JCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbChtb3ZpZV9yYXRpbmdfc2VsKS5jaGFuZ2UoKTtcclxuXHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS5hdHRyKCdkYXRhLW9ndmFsJyk7XHJcblx0XHRcdHZhciBjdXJyVmFsID0gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLnZhbCgpO1xyXG5cclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgKi9cclxuXHRcdFx0LyoqIENoYW5nZSBjb2xvcnMgb24gcmF0aW5nIGRpc3BsYXkgdG8gbWltaWMgaW5wdXQgZmllbGRzICovXHJcblx0XHRcdGlmIChvZ1ZhbCAhPT0gY3VyclZhbCkge1xyXG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLm1vdmllX3JhdGluZ19zdGFycycpLmFkZENsYXNzKCd2YWxDaGctY29sb3JzT25seScpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLm1vdmllX3JhdGluZ19zdGFycycpLnJlbW92ZUNsYXNzKCd2YWxDaGctY29sb3JzT25seScpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2Ugc2VsY3RlZCBpdGVtIFxyXG5cdFx0XHQgKiBhbmQgYWxsIHNpYmxpbmcgaXRlbXMgYmVmb3JlIGl0IFxyXG5cdFx0XHQgKiBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSBzZWxlY3RlZCBjb2xvclxyXG5cdFx0XHQgKi9cclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpO1xyXG5cdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJyk7XHJcblxyXG5cdFx0XHQvKiogXHJcblx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgc2VsZWN0ZWQgaXRlbSBpbnRvIHRoZSB1bnNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHVuc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0ICovXHJcblx0XHRcdCQodGhpcykubmV4dEFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9vbmVfY2hlY2sgOiAoKSA9PiB7XHJcblx0XHQvLyBjaGVjayBpZiBmaWVsZHMgYXNzb2NpYXRlZCB0byBnaXZlbiBzYXZlIGJ1dHRvbiBoYXZlIGNoYW5nZWRcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsX2NoZWNrIDogKCkgPT4ge1xyXG5cdFx0aWYgKCAkKCcudmFsQ2hnJykubGVuZ3RoICE9PSAwICkge1xyXG5cdFx0XHQkKCcuc2F2ZS1hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHJcblx0XHRcdC8qKiBJZiBhbiAubXNnX3Vuc2F2ZWRDaGdzIGlzbid0IGFscmVhZHkgcHJlc2VudCwgYWRkIGl0ICovXHJcblx0XHRcdGlmICggJCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfdW5zYXZlZENoZ3MnKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX3Vuc2F2ZWRDaGdzIG1zZy13YXJuaW5nXCI+VGhlcmUgYXJlIHVuc2F2ZWQgY2hhbmdlcyE8L3NtYWxsPicpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuc2F2ZS1hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ191bnNhdmVkQ2hncycpLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9vbmVfY2xpY2sgOiAoKSA9PiB7XHJcblx0XHQkKCcuc2F2ZV9pdGVtJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJCh0aGlzKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi5zYXZlX29uZShtb3ZpZV9yZWNpZCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsX2NsaWNrIDogKCkgPT4ge1xyXG5cdFx0JCgnLnNhdmUtYWxsJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdCQoJy5zYXZlLWFsbCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbCgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2l0ZW0gOiAobW92aWVfcmVjaWQpID0+IHtcclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnSUQnOiBtb3ZpZV9yZWNpZFxyXG5cdFx0fTtcclxuXHRcdHZhciByZXFfb2JqX2ZsZHMgPSB7fTtcclxuXHRcdHZhciBjaGdkRmxkc0FyciA9ICQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCkuZmluZCgnLnZhbENoZycpO1xyXG5cclxuXHRcdC8qKiBcclxuXHRcdCAqIEZvciBlYWNoIGNoYW5nZWQgZmllbGQsIFxyXG5cdFx0ICogZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgdGhhdCBoYXMgdGhlIGFzc29jaWF0ZWQgZmllbGQgbmFtZSBpbiB0aGUgZGF0YSBzdG9yZVxyXG5cdFx0ICogYWxvbmcgd2l0aCB0aGUgZmllbGQgdmFsdWUgXHJcblx0XHQgKiB0byBidWlsZCBhbiBvYmplY3Qgb2Yga2V5L3ZhbHVlIHBhaXJzIFxyXG5cdFx0ICogdG8gc2VuZCBpbiBlYWNoIHJlcXVlc3RcclxuXHRcdCAqL1xyXG5cclxuXHRcdCQuZWFjaChjaGdkRmxkc0FyciwgZnVuY3Rpb24gKGlkeF9mbGQsIGl0bV9mbGQpIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bV9mbGQpLmF0dHIoJ2RhdGEtZmxkbmFtZScpO1xyXG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG1fZmxkKS52YWwoKTtcclxuXHJcblx0XHRcdGlmICggZmxkTmFtZSA9PT0gJ1llYXInIHwgZmxkTmFtZSA9PT0gJ0xlbmd0aCcgfCBmbGROYW1lID09PSAnUmF0aW5nJyApIHtcclxuXHRcdFx0XHRmbGRWYWwgPSBOdW1iZXIoZmxkVmFsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmVxX29ial9mbGRzW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmVxX29iai5maWVsZHMgPSByZXFfb2JqX2ZsZHM7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgc2F2ZUl0ZW1Qcm9tID0gbmV3IFByb21pc2UoIGZ1bmN0aW9uIChwcm9tU3VjY2VzcywgcHJvbUVycm9yKSB7XHJcblx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF91cGRhdGVfbW92aWUnLFxyXG5cdFx0XHRcdHR5cGU6ICdQQVRDSCcsXHJcblx0XHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0XHRkYXRhOiByZXFfc3RyLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdFx0LyoqIFJlc2V0IGZpZWxkcyB0byB1bmNoYW5nZWQgc3R5bGUgKi9cclxuXHRcdFx0XHRcdCQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCkuZmluZCgnLnZhbENoZywgLnZhbENoZy1jb2xvcnNPbmx5JykucmVtb3ZlQ2xhc3MoJ3ZhbENoZyB2YWxDaGctY29sb3JzT25seScpO1xyXG5cclxuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLm1vdmllX3JhdGluZ19zdGFycycpLnJlbW92ZUNsYXNzKCd2YWxDaGctY29sb3JzT25seScpO1xyXG5cclxuXHRcdFx0XHRcdHByb21TdWNjZXNzKCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHByb21FcnJvcigpO1xyXG5cclxuXHRcdFx0XHRcdGFsZXJ0KCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHNhdmVJdGVtUHJvbTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lIDogKG1vdmllX3JlY2lkKSA9PiB7XHJcblx0XHR2YXIgc2F2ZUl0ZW0gPSBtb3ZpZV9hZG1pbi5zYXZlX2l0ZW0obW92aWVfcmVjaWQpO1xyXG5cclxuXHRcdHNhdmVJdGVtLnRoZW4oXHJcblx0XHRcdGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQvKiogRmxhZyBhbiBlbGVtZW50IHNvIHRoZSBtZXNzYWdlIGNhbiBiZSBwbGFjZWQgY29udGV4dHVhbGx5ICovXHJcblx0XHRcdFx0Ly9cclxuXHJcblx0XHRcdFx0bW92aWVfYWRtaW4uc3RhdHVzX21zZygnc2F2ZV9vbmVfc3VjY2VzcycpO1xyXG5cdFx0XHR9LCBcclxuXHRcdFx0ZnVuY3Rpb24gKGVyck9iaikge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyT2JqKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsIDogKCkgPT4ge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfc2F2ZVN0YXR1cycpLnJlbW92ZSgpO1xyXG5cclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ19zYXZpbmdBbGxDaGdzIG1zZy1pbmZvXCI+U2F2aW5nIGFsbCBjaGFuZ2VzLi4uPC9zbWFsbD4nKTtcclxuXHJcblx0XHQvKiogR2F0aGVyIGNoYW5nZXMgYW5kIHNlbmQgUEFUQ0ggcmVxdWVzdCB0byBBUEkgcGVyIG1vdmllICovXHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogQ2hhbmdlcyBuZWVkIHRvIGJlIGdyb3VwZWQgcGVyIHJlY29yZCAoaS5lLiwgbW92aWUpXHJcblx0XHQgKiBcclxuXHRcdCAqIFByZXR0eSBzdXJlIHRoZSBiZXN0IG9wdGlvbiBpcyB0byBcclxuXHRcdCAqIGZsYWcgYSBwYXJlbnQgZWxlbWVudCAoZS5nLiwgXCIubW92aWVfbGlzdGluZ1wiKSBvbiBjaGFuZ2VzLFxyXG5cdFx0ICogdXNpbmcgdGhhdCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQgXHJcblx0XHQgKiB0byB0cmF2ZXJzZSBkb3duIGNoaWxkcmVuXHJcblx0XHQgKiBhbmQgY29sbGVjdCBjaGFuZ2VzLlxyXG5cdFx0ICpcclxuXHRcdCAqIElmIGFsbCBjaGFuZ2VzIGZvciBhIGdpdmVuIHJlY29yZCBhcmUgYmFja2VkIG91dFxyXG5cdFx0ICogY2xlYXIgZmxhZyBvbiBwYXJlbnQgZWxlbWVudFxyXG5cdFx0ICovXHJcblxyXG5cdFx0dmFyIGNoZ2RNb3ZpZXNBcnIgPSAkKCcubW92aWVfbGlzdGluZ1tkYXRhLWhhc2NoZ3M9XCJ0cnVlXCJdJyk7XHJcblxyXG5cdFx0JC5lYWNoKGNoZ2RNb3ZpZXNBcnIsIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgbW92aWVfcmVjaWQgPSAkKGl0bSkuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0dmFyIHNhdmVJdGVtID0gbW92aWVfYWRtaW4uc2F2ZV9pdGVtKG1vdmllX3JlY2lkKTtcclxuXHJcblx0XHRcdHNhdmVJdGVtLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0aWYgKGlkeCsxID09PSBjaGdkTW92aWVzQXJyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9hZG1pbi5zdGF0dXNfbXNnKCdzYXZlX2FsbF9zdWNjZXNzJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgXHJcblx0XHRcdFx0ZnVuY3Rpb24gKGVyck9iaikge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJPYmopO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c3RhdHVzX21zZyA6IChzdGF0dXNfbXNnKSA9PiB7XHJcblx0XHRzd2l0Y2ggKHN0YXR1c19tc2cpIHtcclxuXHRcdFx0Y2FzZSAnc2F2ZV9vbmVfc3VjY2Vzcyc6XHJcblx0XHRcdFx0Ly8gXHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzYXZlX29uZV9lcnJvcic6XHJcblx0XHRcdFx0Ly8gXHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzYXZlX2FsbF9zdWNjZXNzJzpcclxuXHRcdFx0XHQvKiogUmVtb3ZlIGFueSBtZXNzYWdlcyBhYm91dCBzYXZlIHN0YXR1cyAqL1xyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcclxuXHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX3NhdmVTdGF0dXMgbXNnX2NoZ3NTYXZlZCBtc2ctc3VjY2Vzc1wiPkFsbCBjaGFuZ2VzIHNhdmVkLjwvc21hbGw+Jyk7XHJcblxyXG5cdFx0XHRcdC8qKiBBZnRlciBzcGVjaWZpY2VkIGRlbGF5LCBmYWRlIHRoZSBtZXNzYWdlLCB0aGVuIHJlbW92ZSBmcm9tIERPTSAqL1xyXG5cdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ19jaGdzU2F2ZWQnKS5mYWRlT3V0KCdzbG93JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0sIDIwMDApO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc2F2ZV9hbGxfZXJyb3InOlxyXG5cdFx0XHRcdC8vIFxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcbn0pLmluaXQoKTtcclxuIl19
