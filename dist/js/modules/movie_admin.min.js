var movie_admin="object"==typeof movie_admin?movie_admin:{};(movie_admin={init:()=>{$.ajax({url:"/.netlify/functions/at_get_movie?recid=all",dataType:"json"}).done(function(e,a,t){e.length>0&&$.each(e,function(a,t){var i,s,l,o=t.id,n=t.fields,r=n.Title,m=n.Year,_=n.Length,v=n.Rating,d=n.Format,c=(n.Art,movie_admin.seeing_stars(v));switch(d){case"DVD":i="selected";break;case"Streaming":s="selected";break;case"VHS":l="selected"}var g='<div class="movie_listing form-group" data-recid="'+o+'"data-haschgs="false"id="movie_listing_'+o+'"><div class="movie_title form-field-container"><label for="movie_title_'+o+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+o+'" value="'+r+'" data-fldname="Title" data-ogval="'+r+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+o+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+o+'" value="'+m+'" data-fldname="Year" data-ogval="'+m+'" class="form-control" type="number" min="1800" max="2100"></div><div class="movie_length form-field-container"><label for="movie_length_'+o+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+o+'" value="'+_+'" data-fldname="Length" data-ogval="'+_+'" class="form-control" type="number" min="0" max="500"></div><div class="movie_rating form-field-container"><label for="movie_rating_'+o+'">Rating</label>'+c+'<input id="movie_rating_'+o+'" value="'+v+'" data-fldname="Rating" data-ogval="'+v+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format form-field-container"><label for="movie_format_'+o+'">Format</label><select id="movie_format_'+o+'" class="form-control" data-fldname="Format" data-ogval="'+d+'"><option value="DVD"'+i+'>DVD</option><option value="Streaming"'+s+'>Streaming</option><option value="VHS"'+l+">VHS</option></select></div></div></div>";$("#movie_admin_list").append(g),a+1===e.length&&movie_admin.ready()})}).fail(function(e,a,t){$("#movie_list_status").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t);$("#movie_admin").prepend('<div id="movie_list_status" class="alert alert-warning fade show" role="alert"><span id="movie_list_status_msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:()=>{$("#movie_list_status").alert("close"),movie_admin.add_movie_click(),$(".add-movie").prop("disabled",!1),movie_admin.track_changes_field(),movie_admin.rating_hover(),movie_admin.rating_click(),movie_admin.save_all_click()},add_movie_click:()=>{$(".add-movie").click(function(e){movie_admin.add_movie(),$("input").first().focus()})},add_movie:()=>{var e=Date.now(),a='<div class="movie_listing form-group" data-recid="'+e+'"data-haschgs="false"id="movie_listing_'+e+'"class="movie_listing_new"><div class="movie_title form-field-container"><label for="movie_title_'+e+'">Title <small class="text-muted">(50 characters or less)</small></label><input id="movie_title_'+e+'" value="" data-fldname="Title" class="form-control" type="text" minlength="1" maxlength="50" required></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+e+'">Year <small class="text-muted">(from 1800 to 2100)</small></label><input id="movie_year_'+e+'" value="" data-fldname="Year" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+e+'">Length <small class="text-muted">(in minutes)</small></label><input id="movie_length_'+e+'" value="" data-fldname="Length" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+e+'">Rating</label>'+movie_admin.seeing_stars("1")+'<input id="movie_rating_'+e+'" value="1" data-fldname="Rating" class="form-control" type="number" min="1" max="5" hidden required></div><div class="movie_format form-field-container"><label for="movie_format_'+e+'">Format</label><select id="movie_format_'+e+'" class="form-control" data-fldname="Format"><option value="DVD">DVD</option><option value="Streaming" selected>Streaming</option><option value="VHS">VHS</option></select></div></div></div>';$("#movie_admin_list").prepend(a)},seeing_stars:e=>{var a="";a+='<div class="movie_rating_stars">';for(var t=1,i=0;i<e;i++)a+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+t+'">&#9733 </span>',t++;var s=5-e;for(i=0;i<s;i++)a+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+t+'">&#9734  </span>',t++;return a+="</div>"},track_changes_field:()=>{$("#movie_admin_list").on("input change","input",function(e){var a=$(this).attr("data-ogval"),t=$(this).val();if(a!==t){$(this).addClass("valChg");var i=$(this).attr("data-fldname"),s=$(this)[0];switch(s.setCustomValidity(""),i){case"Title":var l=$(this).val().length>0&&$(this).val().length<51;console.log("chk_title: "+l),l?s.setCustomValidity(""):s.setCustomValidity("Title must be 1 to 50 characters");break;case"Year":var o=utils.input_numbers_only(t);$(this).val(o);var n=4===$(this).val().length&&parseInt($(this).val())>=1800&&parseInt($(this).val())<=2100;console.log("chk_yr: "+n),n?s.setCustomValidity(""):s.setCustomValidity("Must be a 4 digit number between 1800 and 2100");break;case"Length":o=utils.input_numbers_only(t);$(this).val(o);var r=parseInt($(this).val())>=1&&parseInt($(this).val())<=999;console.log("chk_len: "+r),r?s.setCustomValidity(""):s.setCustomValidity("Must be a 3 digit number greater than 1")}s.checkValidity()||console.log(s.validationMessage)}else $(this).removeClass("valChg").nextAll(".valChgMsg").remove();movie_admin.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(e){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),movie_admin.track_changes_listing($(this))})},track_changes_listing:e=>{e.closest(".movie_listing").find("input, select").hasClass("valChg")?e.closest(".movie_listing").attr("data-haschgs",!0):e.closest(".movie_listing").attr("data-haschgs",!1),movie_admin.save_all_check()},rating_hover:()=>{$("#movie_admin_list").on("mouseenter",".movie_rating_star",function(e){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")}).on("mouseleave",".movie_rating_star",function(e){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:()=>{$("#movie_admin_list").on("click",".movie_rating_star",function(e){var a=$(this).attr("data-ratingstar"),t=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+t).val(a).change(),$("#movie_rating_"+t).attr("data-ogval")!==$("#movie_rating_"+t).val()?$(this).closest(".movie_rating_stars").addClass("valChg-colorsOnly"):$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:()=>{},save_all_check:()=>{0!==$(".valChg").length?($(".save-all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save-all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:()=>{$(".save_item").click(function(e){$(this).prop("disabled",!0);var a=$(this).attr("data-recid");movie_admin.save_one(a)})},save_all_click:()=>{$(".save-all").click(function(e){$(".save-all").prop("disabled",!0),movie_admin.save_all()})},save_item:e=>{var a={ID:e},t={},i=$("#movie_listing_"+e).find(".valChg");$.each(i,function(e,a){var i=$(a).attr("data-fldname"),s=$(a).val();"Year"===i|"Length"===i|"Rating"===i&&(s=Number(s)),t[i]=s}),a.fields=t;var s=JSON.stringify(a);return new Promise(function(a,t){$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:s,success:function(t,i,s){console.log("success event"),$("#movie_listing_"+e).find(".valChg, .valChg-colorsOnly").removeClass("valChg valChg-colorsOnly"),$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),a()},error:function(e,a,i){var s;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(i),void 0!==e.responseJSON){s=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else s=e.responseText;t(),alert("Error:\n"+s)},complete:function(){console.log("complete event")}})})},save_one:e=>{movie_admin.save_item(e).then(function(){movie_admin.status_msg("save_one_success")},function(e){console.error(e)})},save_all:()=>{$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var e=$('.movie_listing[data-haschgs="true"]');$.each(e,function(a,t){var i=$(t).attr("data-recid");movie_admin.save_item(i).then(function(){a+1===e.length&&movie_admin.status_msg("save_all_success")},function(e){console.error(e)})})},status_msg:e=>{switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(e){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvbW92aWVfYWRtaW4uanMiXSwibmFtZXMiOlsibW92aWVfYWRtaW4iLCJpbml0IiwiJCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwidGV4dFN0YXR1cyIsImpxWEhSIiwibGVuZ3RoIiwiZWFjaCIsImlkeCIsIml0bSIsIkRWRHNlbCIsIlNUUnNlbCIsIlZIU3NlbCIsIm1vdmllX3JlY2lkIiwiaWQiLCJtb3ZpZV9vYmoiLCJmaWVsZHMiLCJtb3ZpZV90aXRsZSIsIlRpdGxlIiwibW92aWVfeWVhciIsIlllYXIiLCJtb3ZpZV9sZW5ndGgiLCJMZW5ndGgiLCJtb3ZpZV9yYXRpbmciLCJSYXRpbmciLCJtb3ZpZV9mb3JtYXQiLCJGb3JtYXQiLCJtb3ZpZV9yYXRpbmdfc3RhcnMiLCJBcnQiLCJzZWVpbmdfc3RhcnMiLCJtb3ZpZV9saXN0aW5nIiwiYXBwZW5kIiwicmVhZHkiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kIiwiYWRkX21vdmllX2NsaWNrIiwicHJvcCIsInRyYWNrX2NoYW5nZXNfZmllbGQiLCJyYXRpbmdfaG92ZXIiLCJyYXRpbmdfY2xpY2siLCJzYXZlX2FsbF9jbGljayIsImNsaWNrIiwiZSIsImFkZF9tb3ZpZSIsImZpcnN0IiwiZm9jdXMiLCJEYXRlIiwibm93IiwicmF0aW5nc3RhciIsImkiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJvbiIsIm9nVmFsIiwidGhpcyIsImF0dHIiLCJjdXJyVmFsIiwidmFsIiwiYWRkQ2xhc3MiLCJmbGRfbmFtZSIsImZsZF9lbCIsInNldEN1c3RvbVZhbGlkaXR5IiwiY2hrX3RpdGxlIiwiZmxkX3ZhbCIsInV0aWxzIiwiaW5wdXRfbnVtYmVyc19vbmx5IiwiY2hrX3lyIiwicGFyc2VJbnQiLCJjaGtfbGVuIiwiY2hlY2tWYWxpZGl0eSIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVtb3ZlQ2xhc3MiLCJuZXh0QWxsIiwicmVtb3ZlIiwidHJhY2tfY2hhbmdlc19saXN0aW5nIiwianFPYmoiLCJjbG9zZXN0IiwiZmluZCIsImhhc0NsYXNzIiwic2F2ZV9hbGxfY2hlY2siLCJodG1sIiwicHJldkFsbCIsInNpYmxpbmdzIiwibW92aWVfcmF0aW5nX3NlbCIsImNoYW5nZSIsInNhdmVfb25lX2NoZWNrIiwic2F2ZV9vbmVfY2xpY2siLCJzYXZlX29uZSIsInNhdmVfYWxsIiwic2F2ZV9pdGVtIiwicmVxX29iaiIsIklEIiwicmVxX29ial9mbGRzIiwiY2hnZEZsZHNBcnIiLCJpZHhfZmxkIiwiaXRtX2ZsZCIsImZsZE5hbWUiLCJmbGRWYWwiLCJOdW1iZXIiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsIlByb21pc2UiLCJwcm9tU3VjY2VzcyIsInByb21FcnJvciIsInR5cGUiLCJjb250ZW50VHlwZSIsImRhdGEiLCJzdWNjZXNzIiwianFYaHIiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJ0aGVuIiwic3RhdHVzX21zZyIsImVyck9iaiIsImNoZ2RNb3ZpZXNBcnIiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZmFkZU91dCJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsWUFBeUMsaUJBQWxCLFlBQStCQSxZQUFjLElBQ3ZFQSxZQUFjLENBQ2RDLEtBQU8sS0FDTkMsRUFBRUMsS0FBSyxDQUNOQyxJQUFLLDZDQUNMQyxTQUFVLFNBQ1JDLEtBQU0sU0FBV0MsRUFBTUMsRUFBWUMsR0FDakNGLEVBQUtHLE9BQVMsR0FDakJSLEVBQUVTLEtBQUtKLEVBQU0sU0FBU0ssRUFBS0MsR0FDMUIsSUFvQklDLEVBQVFDLEVBQVFDLEVBcEJoQkMsRUFBY0osRUFBSUssR0FVbEJDLEVBQWNOLEVBQUlPLE9BQ2xCQyxFQUFlRixFQUFVRyxNQUN6QkMsRUFBZUosRUFBVUssS0FDekJDLEVBQWdCTixFQUFVTyxPQUMxQkMsRUFBZ0JSLEVB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LFFBQVE2RSxNQUFNTyxRQU1sQkQsV0FBY0EsSUFDYixPQUFRQSxHQUNQLElBQUssbUJBR0wsSUFBSyxpQkFFTCxNQUNBLElBQUssbUJBRUp6SCxFQUFFLGtEQUFrRDhFLFNBRXBEOUUsRUFBRSxrQ0FBa0N3QyxRQUFRLHNGQUc1Q29GLE9BQU9DLFdBQVksV0FDbEI3SCxFQUFFLGlEQUFpRDhILFFBQVEsT0FBUSxTQUFVOUUsR0FDNUVoRCxFQUFFMkQsTUFBTW1CLFlBRVAsU0FPSi9FIiwiZmlsZSI6ImpzL21vZHVsZXMvbW92aWVfYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIG1vdmllLWFkbWluLmpzICovXHJcbnZhciBtb3ZpZV9hZG1pbiA9ICggdHlwZW9mIChtb3ZpZV9hZG1pbikgPT09ICdvYmplY3QnICkgPyBtb3ZpZV9hZG1pbiA6IHt9O1xyXG4obW92aWVfYWRtaW4gPSB7XHJcblx0aW5pdCA6ICgpID0+IHtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfZ2V0X21vdmllP3JlY2lkPWFsbCcsXHJcblx0XHRcdGRhdGFUeXBlOiAnanNvbidcclxuXHRcdH0pLmRvbmUoIGZ1bmN0aW9uICggcmVzcCwgdGV4dFN0YXR1cywganFYSFIgKSB7XHJcblx0XHRcdGlmIChyZXNwLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHQkLmVhY2gocmVzcCwgZnVuY3Rpb24oaWR4LCBpdG0pIHtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9IGl0bS5pZDtcclxuXHRcdFx0XHRcdC8qKlxyXG5cdFx0XHRcdFx0ICAqIEZpZWxkczpcclxuXHRcdFx0XHRcdCAgKiBUaXRsZVxyXG5cdFx0XHRcdFx0ICAqIFllYXJcclxuXHRcdFx0XHRcdCAgKiBMZW5ndGhcclxuXHRcdFx0XHRcdCAgKiBSYXRpbmdcclxuXHRcdFx0XHRcdCAgKiBGb3JtYXRcclxuXHRcdFx0XHRcdCAgKiBBcnRcclxuXHRcdFx0XHRcdCAgKi9cclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9vYmogXHRcdD0gaXRtLmZpZWxkcztcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV90aXRsZSBcdD0gbW92aWVfb2JqLlRpdGxlO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3llYXIgXHRcdD0gbW92aWVfb2JqLlllYXI7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfbGVuZ3RoIFx0PSBtb3ZpZV9vYmouTGVuZ3RoO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZyBcdD0gbW92aWVfb2JqLlJhdGluZztcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9mb3JtYXQgXHQ9IG1vdmllX29iai5Gb3JtYXQ7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfYXJ0IFx0XHQ9IG1vdmllX29iai5BcnQ7XHJcblxyXG5cdFx0XHRcdFx0dmFyIG1vdmllX3JhdGluZ19zdGFycyA9IG1vdmllX2FkbWluLnNlZWluZ19zdGFycyhtb3ZpZV9yYXRpbmcpO1xyXG5cclxuXHRcdFx0XHRcdHZhciBEVkRzZWwsIFNUUnNlbCwgVkhTc2VsO1xyXG5cdFx0XHRcdFx0c3dpdGNoIChtb3ZpZV9mb3JtYXQpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSAnRFZEJzpcclxuXHRcdFx0XHRcdFx0XHREVkRzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAnU3RyZWFtaW5nJzpcclxuXHRcdFx0XHRcdFx0XHRTVFJzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAnVkhTJzpcclxuXHRcdFx0XHRcdFx0XHRWSFNzZWwgPSAnc2VsZWN0ZWQnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2xpc3RpbmcgPSAnPGRpdiBjbGFzcz1cIm1vdmllX2xpc3RpbmcgZm9ybS1ncm91cFwiICcgK1xyXG5cdFx0XHRcdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnZGF0YS1oYXNjaGdzPVwiZmFsc2VcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCdpZD1cIm1vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPGRpdiBjbGFzcz1cIm1vdmllX3Bvc3RlclwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfdGl0bGUgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiPlRpdGxlIDxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oNTAgY2hhcmFjdGVycyBvciBsZXNzKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV90aXRsZSArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIlRpdGxlXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3RpdGxlICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgbWlubGVuZ3RoPVwiMVwiIG1heGxlbmd0aD1cIjUwXCInICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZGV0YWlsc1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV95ZWFyIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfeWVhcl8nICsgbW92aWVfcmVjaWQgKyAnXCI+WWVhciA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KGZyb20gMTgwMCB0byAyMTAwKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV95ZWFyICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJZZWFyXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjE4MDBcIiBtYXg9XCIyMTAwXCInICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfbGVuZ3RoIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIj5MZW5ndGggPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihpbiBtaW51dGVzKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX2xlbmd0aCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiTGVuZ3RoXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG1heD1cIjUwMFwiJyArIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZyBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCI+UmF0aW5nPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX3JhdGluZyArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiUmF0aW5nXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMVwiIG1heD1cIjVcIiBoaWRkZW4nICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZm9ybWF0IGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIj5Gb3JtYXQ8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0XCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzZWxlY3QgaWQ9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkZvcm1hdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgKyc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gJzxvcHRpb24gc2VsZWN0ZWQ+T3BlbiB0aGlzIHNlbGVjdCBtZW51PC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJEVkRcIicgKyBEVkRzZWwgKyAnPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCInICsgU1RSc2VsICsgJz5TdHJlYW1pbmc8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlZIU1wiJyArIFZIU3NlbCArICc+VkhTPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L3NlbGVjdD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdCc8L2Rpdj4nXHJcblx0XHRcdFx0XHQ7XHJcblxyXG5cdFx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5hcHBlbmQobW92aWVfbGlzdGluZyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGlkeCsxID09PSByZXNwLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9hZG1pbi5yZWFkeSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KS5mYWlsKCBmdW5jdGlvbiAoIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcclxuXHRcdFx0JCgnI21vdmllX2xpc3Rfc3RhdHVzJykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblxyXG5cdFx0XHR2YXIgZXJyTXNnID0gJzxkaXYgaWQ9XCJtb3ZpZV9saXN0X3N0YXR1c1wiIGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZyBmYWRlIHNob3dcIiByb2xlPVwiYWxlcnRcIj4nICtcclxuXHRcdFx0XHRcdCc8c3BhbiBpZD1cIm1vdmllX2xpc3Rfc3RhdHVzX21zZ1wiPlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB0aGUgbW92aWVzLjwvYnI+VHJ5IHJlZnJlc2hpbmcgdGhlIHBhZ2UgYW5kIGlmIHRoZSBwcm9ibGVtIHBlcnNpc3RzLCBwbGVhc2UgY29udGFjdCB1cy48L3NwYW4+JyArXHJcblx0XHRcdFx0JzwvZGl2Pic7XHJcblx0XHRcdFxyXG5cdFx0XHQkKCcjbW92aWVfYWRtaW4nKS5wcmVwZW5kKGVyck1zZyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHJlYWR5IDogKCkgPT4ge1xyXG5cdFx0JCgnI21vdmllX2xpc3Rfc3RhdHVzJykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0bW92aWVfYWRtaW4uYWRkX21vdmllX2NsaWNrKCk7XHJcblx0XHQkKCcuYWRkLW1vdmllJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcblxyXG5cdFx0XHJcblx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2ZpZWxkKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5yYXRpbmdfaG92ZXIoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19jbGljaygpO1xyXG5cdFx0Ly8gbW92aWVfYWRtaW4uc2F2ZV9vbmVfY2xpY2soKTtcclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NsaWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRhZGRfbW92aWVfY2xpY2sgOiAoKSA9PiB7XHJcblx0XHQkKCcuYWRkLW1vdmllJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdG1vdmllX2FkbWluLmFkZF9tb3ZpZSgpO1xyXG5cclxuXHRcdFx0JCgnaW5wdXQnKS5maXJzdCgpLmZvY3VzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGFkZF9tb3ZpZSA6ICgpID0+IHtcclxuXHRcdHZhciBtb3ZpZV9yZWNpZCA9IERhdGUubm93KCk7XHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJzID0gbW92aWVfYWRtaW4uc2VlaW5nX3N0YXJzKCcxJyk7XHJcblxyXG5cdFx0dmFyIG1vdmllX2xpc3RpbmcgPSAnPGRpdiBjbGFzcz1cIm1vdmllX2xpc3RpbmcgZm9ybS1ncm91cFwiICcgK1xyXG5cdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHQvLyAnZGF0YS1yZWNpZD1cIm5ld1wiJyArXHJcblx0XHRcdFx0J2RhdGEtaGFzY2hncz1cImZhbHNlXCInICtcclxuXHRcdFx0XHQnaWQ9XCJtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdCdjbGFzcz1cIm1vdmllX2xpc3RpbmdfbmV3XCInICtcclxuXHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdC8vICc8ZGl2IGNsYXNzPVwibW92aWVfcG9zdGVyXCI+PC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV90aXRsZSBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCI+VGl0bGUgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPig1MCBjaGFyYWN0ZXJzIG9yIGxlc3MpPC9zbWFsbD48L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHQnIHZhbHVlPVwiXCInICtcclxuXHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdC8vICcgZGF0YS1vZ3ZhbD1cIm5ld19tb3ZpZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdC8vICcgcGxhY2Vob2xkZXI9XCJUaGUgQmlnIEZsaWNrIFRpdGxlXCInICtcclxuXHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCI1MFwiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2RldGFpbHNcIj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfeWVhciBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiPlllYXIgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihmcm9tIDE4MDAgdG8gMjEwMCk8L3NtYWxsPjwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCJcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiWWVhclwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwibmV3X21vdmllXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgcGxhY2Vob2xkZXI9XCIyMDE5XCInICtcclxuXHJcblx0XHRcdFx0XHRcdFx0LyoqIElucHV0IHR5cGU9XCJudW1iZXJcIiBoYXMgYSBudW1iZXIgb2YgdW5kZXNpcmFibGUgc2lkZSBlZmZlY3RzICovXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMTgwMFwiIG1heD1cIjIxMDBcIiBwYXR0ZXJuPVwiXFxcXGR7NH1cIiByZXF1aXJlZD4nICtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvKiogVGhpcyBwYXR0ZXJuIGlzIHBlcmZlY3QgYnV0IHRyaWdnZXJpbmcgdGhlIG51bWVyaWMga2V5cGFkIG9uIG1vYmlsZSBpcyBwZXJmZWN0ZXIgKi9cclxuXHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkezR9XCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkPicgK1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8qKiBGdW4gZmFjdDogVGhpcyBwYXR0ZXJuIHdpbGwgdHJpZ2dlciB0aGUgbnVtZXJpYyBrZXlwYWQgb24gbW9iaWxlICovXHJcblx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIHBhdHRlcm49XCJcXFxcZCpcIiBtYXhsZW5ndGg9XCI0XCIgcmVxdWlyZWQnICsgXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfbGVuZ3RoIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIj5MZW5ndGggPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihpbiBtaW51dGVzKTwvc21hbGw+PC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkxlbmd0aFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2xlbmd0aCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgcGxhY2Vob2xkZXI9XCIxNTBcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiBtYXg9XCI1MDBcIiBtaW5sZW5ndGg9XCIxXCIgbWF4bGVuZ3RoPVwiM1wiIHBhdHRlcm49XCJcXFxcZHs0fVwiIHJlcXVpcmVkPicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGQqXCIgbWF4bGVuZ3RoPVwiM1wiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZyBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCI+UmF0aW5nPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICtcclxuXHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiMVwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJSYXRpbmdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9yYXRpbmcgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9mb3JtYXQgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiPkZvcm1hdDwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdC8vICc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIicgK1xyXG5cdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiRm9ybWF0XCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfZm9ybWF0ICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPG9wdGlvbiBzZWxlY3RlZD5PcGVuIHRoaXMgc2VsZWN0IG1lbnU8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIkRWRFwiPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCIgc2VsZWN0ZWQ+U3RyZWFtaW5nPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJWSFNcIj5WSFM8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0Jzwvc2VsZWN0PicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0JzwvZGl2PidcclxuXHRcdDtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLnByZXBlbmQobW92aWVfbGlzdGluZyk7XHJcblx0fVxyXG5cdCxcclxuXHRzZWVpbmdfc3RhcnMgOiAobW92aWVfcmF0aW5nKSA9PiB7XHJcblx0XHQvKipcclxuXHRcdCAqIFN0YXIgQVNDSUkgY29kZXNcclxuXHRcdCAqIC0gLSAtIC0gLSAtIC0gLSAtXHJcblx0XHQgKiBTb2xpZCBzdGFyOiAmIzk3MzM7XHJcblx0XHQgKiBPdXRsaW5lIHN0YXI6ICYjOTczNDtcclxuXHRcdCAqL1xyXG5cdFx0dmFyIG1vdmllX3JhdGluZ19zdGFycyA9ICcnO1xyXG5cdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhcnNcIj4nO1xyXG5cdFx0LyoqIFNldCB0aGUgbG93ZXN0IHZhbHVlICovXHJcblx0XHR2YXIgcmF0aW5nc3RhciA9IDE7XHJcblx0XHQvKiogQWRkIGEgc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgdGhlIHNlbGVjdGVkIHJhdGluZyB2YWx1ZSBpcyByZWFjaGVkICovXHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vdmllX3JhdGluZzsgaSsrKSB7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczMyA8L3NwYW4+JztcclxuXHRcdFx0XHJcblx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdH1cclxuXHRcdC8qKiBTdWJ0cmFjdCB0aGUgc2VsZWN0ZWQgcmF0aW5nIGZyb20gdGhlIGhpZ2hlc3QgcG9zc2libGUgdG8gZ2V0IGFuIHVuc2VsZWN0ZWQvZmlsbGVyIGNvdW50ICovXHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdCA9IDU7XHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZEN0ID0gbW92aWVfcmF0aW5nX3N0YXJfdG90YWxDdC1tb3ZpZV9yYXRpbmc7XHJcblx0XHQvKiogQWRkIGFuIHVuc2VsZWN0ZWQgaW5kaWNhdG9yIHRvIHRoZSBvYmplY3QgdW50aWwgZmlsbGVyIGNvdW50IGlzIHJlYWNoZWQgKi9cclxuXHRcdGZvciAoaSA9IDA7IGkgPCBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3Q7IGkrKykge1xyXG5cdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzxzcGFuIGNsYXNzPVwibW92aWVfcmF0aW5nX3N0YXIgbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZFwiIGRhdGEtcmF0aW5nc3Rhcj1cIicgKyByYXRpbmdzdGFyICsgJ1wiPiYjOTczNCAgPC9zcGFuPic7XHJcblxyXG5cdFx0XHRyYXRpbmdzdGFyKys7XHJcblx0XHR9XHJcblx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgKz0gJzwvZGl2Pic7XHJcblxyXG5cdFx0cmV0dXJuIG1vdmllX3JhdGluZ19zdGFycztcclxuXHR9XHJcblx0LFxyXG5cdHRyYWNrX2NoYW5nZXNfZmllbGQgOiAoKSA9PiB7XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR2YXIgb2dWYWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgYXMgY2hhbmdlZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xyXG5cdFx0XHRcdHZhciBmbGRfbmFtZSA9ICQodGhpcykuYXR0cignZGF0YS1mbGRuYW1lJyk7XHJcblx0XHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coZmxkX2VsLnZhbGlkaXR5KTtcclxuXHJcblx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHJcblx0XHRcdFx0c3dpdGNoIChmbGRfbmFtZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAnVGl0bGUnOlxyXG5cdFx0XHRcdFx0XHRcdHZhciBjaGtfdGl0bGUgPSAkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDAgJiYgJCh0aGlzKS52YWwoKS5sZW5ndGggPCA1MTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjaGtfdGl0bGU6ICcgKyBjaGtfdGl0bGUpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmICghY2hrX3RpdGxlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJ1RpdGxlIG11c3QgYmUgMSB0byA1MCBjaGFyYWN0ZXJzJyk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdZZWFyJzpcclxuXHRcdFx0XHRcdFx0LyoqIE9ubHkgYWxsb3cgbnVtYmVycyAqL1xyXG5cdFx0XHRcdFx0XHQvLyB2YXIgZmxkX3ZhbCA9IGZsZF92YWwucmVwbGFjZSgvW14wLTldKy9nLCAnJyk7XHJcblx0XHRcdFx0XHRcdHZhciBmbGRfdmFsID0gdXRpbHMuaW5wdXRfbnVtYmVyc19vbmx5KGN1cnJWYWwpO1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLnZhbChmbGRfdmFsKTtcclxuXHJcblx0XHRcdFx0XHRcdHZhciBjaGtfeXIgPSAkKHRoaXMpLnZhbCgpLmxlbmd0aCA9PT0gNCAmJiAoIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPj0gMTgwMCAmJiBwYXJzZUludCggJCh0aGlzKS52YWwoKSApIDw9IDIxMDAgKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnY2hrX3lyOiAnICsgY2hrX3lyKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmICghY2hrX3lyKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdNdXN0IGJlIGEgNCBkaWdpdCBudW1iZXIgYmV0d2VlbiAxODAwIGFuZCAyMTAwJyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdMZW5ndGgnOlxyXG5cdFx0XHRcdFx0XHQvKiogT25seSBhbGxvdyBudW1iZXJzICovXHJcblx0XHRcdFx0XHRcdC8vIHZhciBmbGRfdmFsID0gZmxkX3ZhbC5yZXBsYWNlKC9bXjAtOV0rL2csICcnKTtcclxuXHRcdFx0XHRcdFx0dmFyIGZsZF92YWwgPSB1dGlscy5pbnB1dF9udW1iZXJzX29ubHkoY3VyclZhbCk7XHJcblx0XHRcdFx0XHRcdCQodGhpcykudmFsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGNoa19sZW4gPSAoIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPj0gMSAmJiBwYXJzZUludCggJCh0aGlzKS52YWwoKSApIDw9IDk5OSApO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjaGtfbGVuOiAnICsgY2hrX2xlbik7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoICFjaGtfbGVuICkge1xyXG5cdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnTXVzdCBiZSBhIDMgZGlnaXQgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxJyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgZmxkX2lzVmFsaWQgPSBmbGRfZWwuY2hlY2tWYWxpZGl0eSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoIWZsZF9pc1ZhbGlkKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignY2hhbmdlJywgJ3NlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBvZ1ZhbCA9ICQodGhpcykuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd2YWxDaGcnKS5uZXh0QWxsKCcudmFsQ2hnTXNnJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnRyYWNrX2NoYW5nZXNfbGlzdGluZyggJCh0aGlzKSApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHR0cmFja19jaGFuZ2VzX2xpc3RpbmcgOiAoanFPYmopID0+IHtcclxuXHRcdHZhciBoYXNDaGdzID0ganFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5maW5kKCdpbnB1dCwgc2VsZWN0JykuaGFzQ2xhc3MoJ3ZhbENoZycpO1xyXG5cclxuXHRcdGlmIChoYXNDaGdzKSB7XHJcblx0XHRcdGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuYXR0cignZGF0YS1oYXNjaGdzJywgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtaGFzY2hncycsIGZhbHNlKTtcclxuXHRcdH1cclxuXHJcblx0XHRtb3ZpZV9hZG1pbi5zYXZlX2FsbF9jaGVjaygpO1xyXG5cdH1cclxuXHQsXHJcblx0cmF0aW5nX2hvdmVyIDogKCkgPT4ge1xyXG5cdFx0LyoqIEhhdmUgdG8gdXNlIGRlbGVnYXRlZCBhcHByb2FjaCB0byB3b3JrIHdpdGggaW5qZWN0ZWQgZWxlbWVudHMgKGUuZy4sIG5ldyBtb3ZpZSkgKi9cclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0JylcclxuXHRcdFx0Lm9uKCdtb3VzZWVudGVyJywgJy5tb3ZpZV9yYXRpbmdfc3RhcicsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcclxuXHRcdFx0XHQvKiogTWFrZSBob3ZlcmVkIGl0ZW0gaW50byBzZWxlY3RlZCBzdGF0ZSAqL1xyXG5cdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzMzICcpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBiZWZvcmUgaG92ZXJlZCBpdGVtIGludG8gdGhlIHNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczMyAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKTtcclxuXHJcblx0XHRcdFx0LyoqIFxyXG5cdFx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgaG92ZXJlZCBpdGVtIGludG8gdGhlIHVuc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSB1bnNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JCh0aGlzKS5uZXh0QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5odG1sKCcmIzk3MzQgJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9uZXh0U2liJyk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5vbignbW91c2VsZWF2ZScsICcubW92aWVfcmF0aW5nX3N0YXInLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX25leHRTaWInKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKiogUmVzZXQgYWxsIHN0YXJzIHRvIG9yaWdpbmFsIHN0YXRlICovXHJcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmhhc0NsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpICkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzM0ICcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCcubW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzMgJyk7XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnLm1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKS5odG1sKCcmIzk3MzQgJyk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cdCxcclxuXHRyYXRpbmdfY2xpY2sgOiAoKSA9PiB7XHJcblx0XHQvLyAkKCcubW92aWVfcmF0aW5nX3N0YXInKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2NsaWNrJywgJy5tb3ZpZV9yYXRpbmdfc3RhcicsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBtb3ZpZV9yYXRpbmdfc2VsID0gJCh0aGlzKS5hdHRyKCdkYXRhLXJhdGluZ3N0YXInKTtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJCh0aGlzKS5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtcmVjaWQnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8qKiBGaXJlIGNoYW5nZSBldmVudCBvbiBhc3NvY2lhdGVkIGlucHV0ICovXHJcblx0XHRcdCQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS52YWwobW92aWVfcmF0aW5nX3NlbCkuY2hhbmdlKCk7XHJcblxyXG5cdFx0XHR2YXIgb2dWYWwgPSAkKCcjbW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCkuYXR0cignZGF0YS1vZ3ZhbCcpO1xyXG5cdFx0XHR2YXIgY3VyclZhbCA9ICQoJyNtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkKS52YWwoKTtcclxuXHJcblx0XHRcdC8qKiBJZiB0aGUgY3VycmVudCB2YWx1ZSBpc24ndCB0aGUgb3JpZ2luYWwgdmFsdWUsIG1hcmsgdGhlIGZpZWxkICovXHJcblx0XHRcdC8qKiBDaGFuZ2UgY29sb3JzIG9uIHJhdGluZyBkaXNwbGF5IHRvIG1pbWljIGlucHV0IGZpZWxkcyAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5hZGRDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5yZW1vdmVDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyoqIFxyXG5cdFx0XHQgKiBNYWtlIHNlbGN0ZWQgaXRlbSBcclxuXHRcdFx0ICogYW5kIGFsbCBzaWJsaW5nIGl0ZW1zIGJlZm9yZSBpdCBcclxuXHRcdFx0ICogaW50byB0aGUgc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0ICovXHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKTtcclxuXHRcdFx0JCh0aGlzKS5wcmV2QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpO1xyXG5cclxuXHRcdFx0LyoqIFxyXG5cdFx0XHQgKiBNYWtlIGFsbCBzaWJsaW5nIGl0ZW1zIGFmdGVyIHNlbGVjdGVkIGl0ZW0gaW50byB0aGUgdW5zZWxlY3RlZCBzdGF0ZSBcclxuXHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSB1bnNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdCAqL1xyXG5cdFx0XHQkKHRoaXMpLm5leHRBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lX2NoZWNrIDogKCkgPT4ge1xyXG5cdFx0Ly8gY2hlY2sgaWYgZmllbGRzIGFzc29jaWF0ZWQgdG8gZ2l2ZW4gc2F2ZSBidXR0b24gaGF2ZSBjaGFuZ2VkXHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbF9jaGVjayA6ICgpID0+IHtcclxuXHRcdGlmICggJCgnLnZhbENoZycpLmxlbmd0aCAhPT0gMCApIHtcclxuXHRcdFx0JCgnLnNhdmUtYWxsJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcblxyXG5cdFx0XHQvKiogSWYgYW4gLm1zZ191bnNhdmVkQ2hncyBpc24ndCBhbHJlYWR5IHByZXNlbnQsIGFkZCBpdCAqL1xyXG5cdFx0XHRpZiAoICQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3Vuc2F2ZWRDaGdzJykubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ191bnNhdmVkQ2hncyBtc2ctd2FybmluZ1wiPlRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMhPC9zbWFsbD4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLnNhdmUtYWxsJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfdW5zYXZlZENoZ3MnKS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lX2NsaWNrIDogKCkgPT4ge1xyXG5cdFx0JCgnLnNhdmVfaXRlbScpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHQkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQodGhpcykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4uc2F2ZV9vbmUobW92aWVfcmVjaWQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbF9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5zYXZlLWFsbCcpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHQkKCcuc2F2ZS1hbGwnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGwoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9pdGVtIDogKG1vdmllX3JlY2lkKSA9PiB7XHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J0lEJzogbW92aWVfcmVjaWRcclxuXHRcdH07XHJcblx0XHR2YXIgcmVxX29ial9mbGRzID0ge307XHJcblx0XHR2YXIgY2hnZEZsZHNBcnIgPSAkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmZpbmQoJy52YWxDaGcnKTtcclxuXHJcblx0XHQvKiogXHJcblx0XHQgKiBGb3IgZWFjaCBjaGFuZ2VkIGZpZWxkLCBcclxuXHRcdCAqIGdldCB0aGUgYXR0cmlidXRlIHZhbHVlIHRoYXQgaGFzIHRoZSBhc3NvY2lhdGVkIGZpZWxkIG5hbWUgaW4gdGhlIGRhdGEgc3RvcmVcclxuXHRcdCAqIGFsb25nIHdpdGggdGhlIGZpZWxkIHZhbHVlIFxyXG5cdFx0ICogdG8gYnVpbGQgYW4gb2JqZWN0IG9mIGtleS92YWx1ZSBwYWlycyBcclxuXHRcdCAqIHRvIHNlbmQgaW4gZWFjaCByZXF1ZXN0XHJcblx0XHQgKi9cclxuXHJcblx0XHQkLmVhY2goY2hnZEZsZHNBcnIsIGZ1bmN0aW9uIChpZHhfZmxkLCBpdG1fZmxkKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG1fZmxkKS5hdHRyKCdkYXRhLWZsZG5hbWUnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtX2ZsZCkudmFsKCk7XHJcblxyXG5cdFx0XHRpZiAoIGZsZE5hbWUgPT09ICdZZWFyJyB8IGZsZE5hbWUgPT09ICdMZW5ndGgnIHwgZmxkTmFtZSA9PT0gJ1JhdGluZycgKSB7XHJcblx0XHRcdFx0ZmxkVmFsID0gTnVtYmVyKGZsZFZhbCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJlcV9vYmpfZmxkc1tmbGROYW1lXSA9IGZsZFZhbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJlcV9vYmouZmllbGRzID0gcmVxX29ial9mbGRzO1xyXG5cclxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHNhdmVJdGVtUHJvbSA9IG5ldyBQcm9taXNlKCBmdW5jdGlvbiAocHJvbVN1Y2Nlc3MsIHByb21FcnJvcikge1xyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfdXBkYXRlX21vdmllJyxcclxuXHRcdFx0XHR0eXBlOiAnUEFUQ0gnLFxyXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRcdC8qKiBSZXNldCBmaWVsZHMgdG8gdW5jaGFuZ2VkIHN0eWxlICovXHJcblx0XHRcdFx0XHQkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmZpbmQoJy52YWxDaGcsIC52YWxDaGctY29sb3JzT25seScpLnJlbW92ZUNsYXNzKCd2YWxDaGcgdmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHJcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5yZW1vdmVDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHJcblx0XHRcdFx0XHRwcm9tU3VjY2VzcygpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcclxuXHRcdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcclxuXHJcblx0XHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRwcm9tRXJyb3IoKTtcclxuXHJcblx0XHRcdFx0XHRhbGVydCgnRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBzYXZlSXRlbVByb207XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZSA6IChtb3ZpZV9yZWNpZCkgPT4ge1xyXG5cdFx0dmFyIHNhdmVJdGVtID0gbW92aWVfYWRtaW4uc2F2ZV9pdGVtKG1vdmllX3JlY2lkKTtcclxuXHJcblx0XHRzYXZlSXRlbS50aGVuKFxyXG5cdFx0XHRmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0LyoqIEZsYWcgYW4gZWxlbWVudCBzbyB0aGUgbWVzc2FnZSBjYW4gYmUgcGxhY2VkIGNvbnRleHR1YWxseSAqL1xyXG5cdFx0XHRcdC8vXHJcblxyXG5cdFx0XHRcdG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfb25lX3N1Y2Nlc3MnKTtcclxuXHRcdFx0fSwgXHJcblx0XHRcdGZ1bmN0aW9uIChlcnJPYmopIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVyck9iaik7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbCA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3NhdmVTdGF0dXMnKS5yZW1vdmUoKTtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfc2F2aW5nQWxsQ2hncyBtc2ctaW5mb1wiPlNhdmluZyBhbGwgY2hhbmdlcy4uLjwvc21hbGw+Jyk7XHJcblxyXG5cdFx0LyoqIEdhdGhlciBjaGFuZ2VzIGFuZCBzZW5kIFBBVENIIHJlcXVlc3QgdG8gQVBJIHBlciBtb3ZpZSAqL1xyXG5cclxuXHRcdC8qKiBcclxuXHRcdCAqIENoYW5nZXMgbmVlZCB0byBiZSBncm91cGVkIHBlciByZWNvcmQgKGkuZS4sIG1vdmllKVxyXG5cdFx0ICogXHJcblx0XHQgKiBQcmV0dHkgc3VyZSB0aGUgYmVzdCBvcHRpb24gaXMgdG8gXHJcblx0XHQgKiBmbGFnIGEgcGFyZW50IGVsZW1lbnQgKGUuZy4sIFwiLm1vdmllX2xpc3RpbmdcIikgb24gY2hhbmdlcyxcclxuXHRcdCAqIHVzaW5nIHRoYXQgYXMgdGhlIHN0YXJ0aW5nIHBvaW50IFxyXG5cdFx0ICogdG8gdHJhdmVyc2UgZG93biBjaGlsZHJlblxyXG5cdFx0ICogYW5kIGNvbGxlY3QgY2hhbmdlcy5cclxuXHRcdCAqXHJcblx0XHQgKiBJZiBhbGwgY2hhbmdlcyBmb3IgYSBnaXZlbiByZWNvcmQgYXJlIGJhY2tlZCBvdXRcclxuXHRcdCAqIGNsZWFyIGZsYWcgb24gcGFyZW50IGVsZW1lbnRcclxuXHRcdCAqL1xyXG5cclxuXHRcdHZhciBjaGdkTW92aWVzQXJyID0gJCgnLm1vdmllX2xpc3RpbmdbZGF0YS1oYXNjaGdzPVwidHJ1ZVwiXScpO1xyXG5cclxuXHRcdCQuZWFjaChjaGdkTW92aWVzQXJyLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJChpdG0pLmF0dHIoJ2RhdGEtcmVjaWQnKTtcclxuXHJcblx0XHRcdHZhciBzYXZlSXRlbSA9IG1vdmllX2FkbWluLnNhdmVfaXRlbShtb3ZpZV9yZWNpZCk7XHJcblxyXG5cdFx0XHRzYXZlSXRlbS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGlmIChpZHgrMSA9PT0gY2hnZE1vdmllc0Fyci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0bW92aWVfYWRtaW4uc3RhdHVzX21zZygnc2F2ZV9hbGxfc3VjY2VzcycpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIFxyXG5cdFx0XHRcdGZ1bmN0aW9uIChlcnJPYmopIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyT2JqKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHN0YXR1c19tc2cgOiAoc3RhdHVzX21zZykgPT4ge1xyXG5cdFx0c3dpdGNoIChzdGF0dXNfbXNnKSB7XHJcblx0XHRcdGNhc2UgJ3NhdmVfb25lX3N1Y2Nlc3MnOlxyXG5cdFx0XHRcdC8vIFxyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc2F2ZV9vbmVfZXJyb3InOlxyXG5cdFx0XHRcdC8vIFxyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc2F2ZV9hbGxfc3VjY2Vzcyc6XHJcblx0XHRcdFx0LyoqIFJlbW92ZSBhbnkgbWVzc2FnZXMgYWJvdXQgc2F2ZSBzdGF0dXMgKi9cclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ19zYXZlU3RhdHVzJykucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ19jaGdzU2F2ZWQgbXNnLXN1Y2Nlc3NcIj5BbGwgY2hhbmdlcyBzYXZlZC48L3NtYWxsPicpO1xyXG5cclxuXHRcdFx0XHQvKiogQWZ0ZXIgc3BlY2lmaWNlZCBkZWxheSwgZmFkZSB0aGUgbWVzc2FnZSwgdGhlbiByZW1vdmUgZnJvbSBET00gKi9cclxuXHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfY2hnc1NhdmVkJykuZmFkZU91dCgnc2xvdycsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
