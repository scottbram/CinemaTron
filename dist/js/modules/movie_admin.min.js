var movie_admin="object"==typeof movie_admin?movie_admin:{};(movie_admin={init:()=>{auth.sesh_check().then(function(){movie_admin.sesh_success()}).catch(()=>{movie_admin.sesh_fail()})},sesh_success:()=>{auth.logout_init(),movie_admin.load_movie_list()},sesh_fail:()=>{$("#movie_admin .status-container").alert("close");$("#movie_admin_list").prepend('<div class="status-container alert alert-warning fade show" role="alert"><span class="status-msg"><a id="log_in_prompt" href="#">Log in to edit</a></span></div>'),auth.login_modal_init()},load_movie_list:()=>{$("#movie_admin .status-msg").text("Movies loading"),$("#movie_admin_list_actions").css("visibility","visible"),$.ajax({url:"/.netlify/functions/at_get_movie?recid=all",dataType:"json"}).done(function(e){e.length>0&&$.each(e,function(a,t){var i=t.id,s=t.fields,l=s.Title,o=s.Year,n=s.Length,r=s.Rating,m=s.Format,v=s.Active,_="";v&&(_=" checked");var c,d,g,h=movie_admin.seeing_stars(r);switch(m){case"DVD":c="selected";break;case"Streaming":d="selected";break;case"VHS":g="selected"}var u='<div class="movie_listing" data-recid="'+i+'"data-haschgs="false"id="movie_listing_'+i+'"><div class="movie_title form-field-container"><label for="movie_title_'+i+'">Title</label> <small class="text-muted">(50 characters or less)</small><input id="movie_title_'+i+'" value="'+l+'" data-fldname="Title" data-ogval="'+l+'" class="form-control" type="text" minlength="1" maxlength="50"></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+i+'">Year</label><small class="text-muted">(from 1800 to 2100)</small><input id="movie_year_'+i+'" value="'+o+'" data-fldname="Year" data-ogval="'+o+'" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+i+'">Length</label><small class="text-muted">(in minutes)</small><input id="movie_length_'+i+'" value="'+n+'" data-fldname="Length" data-ogval="'+n+'" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+i+'">Rating</label><small class="text-muted">(Select a rating)</small>'+h+'<input id="movie_rating_'+i+'" value="'+r+'" data-fldname="Rating" data-ogval="'+r+'" class="form-control" type="number" min="1" max="5" hidden></div><div class="movie_format form-field-container"><label for="movie_format_'+i+'">Format</label><select id="movie_format_'+i+'" class="form-control" data-fldname="Format" data-ogval="'+m+'"><option value="DVD"'+c+'>DVD</option><option value="Streaming"'+d+'>Streaming</option><option value="VHS"'+g+'>VHS</option></select></div><div class="movie_active form-field-container custom-control custom-checkbox"><input id="movie_active_'+i+'" data-fldname="Active" data-ogval="'+v+'" class="custom-control-input" type="checkbox"'+_+'><label for="movie_active_'+i+'" class="lbl_checkbox custom-control-label">Active</label></div></div></div>';$("#movie_admin_list").append(u),a+1===e.length&&movie_admin.ready()})}).fail(function(e,a,t){$("#movie_admin .status-container").alert("close"),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t);$("#movie_admin_list").prepend('<div class="status-container alert alert-warning fade show" role="alert"><span class="status-msg">There was a problem loading the movies.</br>Try refreshing the page and if the problem persists, please contact us.</span></div>')})},ready:()=>{$("#movie_admin .status-container").alert("close"),movie_admin.add_movie_click(),$(".add-movie").prop("disabled",!1),movie_admin.track_changes_field(),movie_admin.rating_hover(),movie_admin.rating_click(),movie_admin.save_all_click()},add_movie_click:()=>{$(".add-movie").click(function(){movie_admin.add_movie(),$("input").first().focus()})},add_movie:()=>{var e=Date.now(),a='<div class="movie_listing is-new form-group" data-recid="'+e+'"data-haschgs="false"id="movie_listing_'+e+'"class="movie_listing_new"><div class="movie_title form-field-container"><label for="movie_title_'+e+'">Title</label><small class="text-muted">(50 characters or less)</small><input id="movie_title_'+e+'" value="" data-fldname="Title" class="form-control" type="text" minlength="1" maxlength="50" required></div><div class="movie_details"><div class="movie_year form-field-container"><label for="movie_year_'+e+'">Year</label><small class="text-muted">(from 1800 to 2100)</small><input id="movie_year_'+e+'" value="" data-fldname="Year" class="form-control" type="text" pattern="\\d*" maxlength="4" required></div><div class="movie_length form-field-container"><label for="movie_length_'+e+'">Length</label><small class="text-muted">(in minutes)</small><input id="movie_length_'+e+'" value="" data-fldname="Length" class="form-control" type="text" pattern="\\d*" maxlength="3" required></div><div class="movie_rating form-field-container"><label for="movie_rating_'+e+'">Rating</label><small class="text-muted">(Select a rating)</small>'+movie_admin.seeing_stars("1")+'<input id="movie_rating_'+e+'" value="1" data-fldname="Rating" class="form-control valChg" type="number" min="1" max="5" hidden required></div><div class="movie_format form-field-container"><label for="movie_format_'+e+'">Format</label><select id="movie_format_'+e+'" class="form-control valChg" data-fldname="Format"><option value="DVD">DVD</option><option value="Streaming" selected>Streaming</option><option value="VHS">VHS</option></select></div><div class="movie_active form-field-container custom-control custom-checkbox"><input id="movie_active_'+e+'" data-fldname="Active" class="custom-control-input" type="checkbox" checked><label for="movie_active_'+e+'" class="lbl_checkbox custom-control-label">Active</label></div></div></div>';$("#movie_admin_list").prepend(a),$(".is-new .movie_rating_stars").addClass("valChg-colorsOnly")},seeing_stars:e=>{var a="";a+='<div class="movie_rating_stars">';for(var t=1,i=0;i<e;i++)a+='<span class="movie_rating_star movie_rating_star_selected" data-ratingstar="'+t+'">&#9733 </span>',t++;var s=5-e;for(i=0;i<s;i++)a+='<span class="movie_rating_star movie_rating_star_unselected" data-ratingstar="'+t+'">&#9734  </span>',t++;return a+="</div>"},track_changes_field:()=>{$("#movie_admin_list").on("input change","input",function(){var e,a=$(this).attr("data-ogval"),t=$(this).val(),i=$(this).attr("data-fldname"),s=$(this)[0];if(s.setCustomValidity(""),a!==t)switch($(this).addClass("valChg"),i){case"Title":$(this).val().length>0&&$(this).val().length<51?s.setCustomValidity(""):s.setCustomValidity("Title must be 1 to 50 characters");break;case"Year":e=utils.input_numbers_only(t),$(this).val(e),4===$(this).val().length&&parseInt($(this).val())>=1800&&parseInt($(this).val())<=2100?s.setCustomValidity(""):s.setCustomValidity("Must be a 4 digit number between 1800 and 2100");break;case"Length":e=utils.input_numbers_only(t),$(this).val(e),parseInt($(this).val())>=1&&parseInt($(this).val())<=999?s.setCustomValidity(""):s.setCustomValidity("Must be a 3 digit number greater than 1")}else $(this).removeClass("valChg").nextAll(".valChgMsg").remove();movie_admin.track_changes_listing($(this))}),$("#movie_admin_list").on("change","select",function(){$(this).attr("data-ogval")!==$(this).val()?$(this).addClass("valChg"):$(this).removeClass("valChg").nextAll(".valChgMsg").remove(),movie_admin.track_changes_listing($(this))})},track_changes_listing:e=>{e.closest(".movie_listing").find("input, select").hasClass("valChg")?e.closest(".movie_listing").attr("data-haschgs",!0):e.closest(".movie_listing").attr("data-haschgs",!1),movie_admin.save_all_check()},rating_hover:()=>{$("#movie_admin_list").on("mouseenter",".movie_rating_star",function(){$(this).html("&#9733 "),$(this).prevAll(".movie_rating_star").html("&#9733 ").addClass("movie_rating_hover_prevSib"),$(this).nextAll(".movie_rating_star").html("&#9734 ").addClass("movie_rating_hover_nextSib")}).on("mouseleave",".movie_rating_star",function(){$(this).siblings().removeClass("movie_rating_hover_prevSib").removeClass("movie_rating_hover_nextSib"),$(this).hasClass("movie_rating_star_selected")?$(this).html("&#9733 "):$(this).html("&#9734 "),$(this).siblings(".movie_rating_star_selected").html("&#9733 "),$(this).siblings(".movie_rating_star_unselected").html("&#9734 ")})},rating_click:()=>{$("#movie_admin_list").on("click",".movie_rating_star",function(){var e=$(this).attr("data-ratingstar"),a=$(this).closest(".movie_listing").attr("data-recid");$("#movie_rating_"+a).val(e).change(),$("#movie_rating_"+a).attr("data-ogval")!==$("#movie_rating_"+a).val()?$(this).closest(".movie_rating_stars").addClass("valChg-colorsOnly"):$(this).closest(".movie_rating_stars").removeClass("valChg-colorsOnly"),$(this).addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).prevAll(".movie_rating_star").addClass("movie_rating_star_selected").removeClass("movie_rating_star_unselected"),$(this).nextAll(".movie_rating_star").addClass("movie_rating_star_unselected").removeClass("movie_rating_star_selected")})},save_one_check:()=>{},save_all_check:()=>{0!==$(".valChg").length?($(".save-all").prop("disabled",!1),0===$("#movie_admin_list_actions_msgs .msg_unsavedChgs").length&&$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_unsavedChgs msg-warning">There are unsaved changes!</small>')):($(".save-all").prop("disabled",!0),$("#movie_admin_list_actions_msgs .msg_unsavedChgs").remove())},save_one_click:()=>{$(".save_item").click(function(){$(this).prop("disabled",!0);var e=$(this).attr("data-recid");movie_admin.save_one(e)})},save_all_click:()=>{$(".save-all").click(function(){$(this).prop("disabled",!0),movie_admin.save_all()})},save_item:(e,a)=>{var t={ID:e},i={},s=$("#movie_listing_"+e).find(".valChg");$.each(s,function(e,a){var t=$(a).attr("data-fldname"),s=$(a).val();"Year"===t|"Length"===t|"Rating"===t&&(s=Number(s)),i[t]=s});var l=$("#movie_active_"+e).is(":checked");i.Active=l,t.fields=i;var o=JSON.stringify(t);return new Promise(function(t,i){a?$.ajax({url:"/.netlify/functions/at_create_movie",type:"POST",contentType:"application/json",data:o,success:function(a){var i=a.id;$("#movie_listing_"+e).attr("id","movie_listing_"+i),$("#movie_listing_"+i).attr("data-recid","movie_listing_"+i),$("#movie_listing_"+i).removeClass("is-new"),$("#movie_listing_"+i).find(".valChg, .valChg-colorsOnly").removeClass("valChg valChg-colorsOnly"),$("#movie_listing_"+i).find(".movie_rating_stars").removeClass("valChg-colorsOnly"),t(a)},error:function(e,a,t){var s;if(console.error("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t),void 0!==e.responseJSON){s=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else s=e.responseText;i(),console.error("Error:\n"+s)}}):$.ajax({url:"/.netlify/functions/at_update_movie",type:"PATCH",contentType:"application/json",data:o,success:function(){$("#movie_listing_"+e).find(".valChg, .valChg-colorsOnly").removeClass("valChg valChg-colorsOnly"),$("#movie_listing_"+e).find(".movie_rating_stars").removeClass("valChg-colorsOnly"),t()},error:function(e,a,t){var s;if(console.error("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(a),console.log("errorThrown: "),console.log(t),void 0!==e.responseJSON){s=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else s=e.responseText;i(),console.error("Error:\n"+s),401===e.status&&auth.show_login_modal()}})})},save_one:e=>{movie_admin.save_item(e).then(function(){movie_admin.status_msg("save_one_success")},function(e){console.error(e)})},save_all:()=>{$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_savingAllChgs msg-info">Saving all changes...</small>');var e=$('.movie_listing[data-haschgs="true"]');$.each(e,function(a,t){var i=!1,s=$(t).attr("data-recid");$(t).hasClass("is-new")&&(i=!0),movie_admin.save_item(s,i).then(function(){a+1===e.length&&movie_admin.status_msg("save_all_success")},function(e){console.error(e)})})},status_msg:e=>{switch(e){case"save_one_success":case"save_one_error":break;case"save_all_success":$("#movie_admin_list_actions_msgs .msg_saveStatus").remove(),$("#movie_admin_list_actions_msgs").prepend('<small class="msg_saveStatus msg_chgsSaved msg-success">All changes saved.</small>'),window.setTimeout(function(){$("#movie_admin_list_actions_msgs .msg_chgsSaved").fadeOut("slow",function(){$(this).remove()})},2e3)}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvbW92aWVfYWRtaW4uanMiXSwibmFtZXMiOlsibW92aWVfYWRtaW4iLCJpbml0IiwiYXV0aCIsInNlc2hfY2hlY2siLCJ0aGVuIiwic2VzaF9zdWNjZXNzIiwiY2F0Y2giLCJzZXNoX2ZhaWwiLCJsb2dvdXRfaW5pdCIsImxvYWRfbW92aWVfbGlzdCIsIiQiLCJhbGVydCIsInByZXBlbmQiLCJsb2dpbl9tb2RhbF9pbml0IiwidGV4dCIsImNzcyIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwibGVuZ3RoIiwiZWFjaCIsImlkeCIsIml0bSIsIm1vdmllX3JlY2lkIiwiaWQiLCJtb3ZpZV9vYmoiLCJmaWVsZHMiLCJtb3ZpZV90aXRsZSIsIlRpdGxlIiwibW92aWVfeWVhciIsIlllYXIiLCJtb3ZpZV9sZW5ndGgiLCJMZW5ndGgiLCJtb3ZpZV9yYXRpbmciLCJSYXRpbmciLCJtb3ZpZV9mb3JtYXQiLCJGb3JtYXQiLCJtb3ZpZV9hY3RpdmUiLCJBY3RpdmUiLCJtb3ZpZV9hY3RpdmVfY2hlY2tlZCIsIkRWRHNlbCIsIlNUUnNlbCIsIlZIU3NlbCIsIm1vdmllX3JhdGluZ19zdGFycyIsInNlZWluZ19zdGFycyIsIm1vdmllX2xpc3RpbmciLCJhcHBlbmQiLCJyZWFkeSIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImNvbnNvbGUiLCJsb2ciLCJhZGRfbW92aWVfY2xpY2siLCJwcm9wIiwidHJhY2tfY2hhbmdlc19maWVsZCIsInJhdGluZ19ob3ZlciIsInJhdGluZ19jbGljayIsInNhdmVfYWxsX2NsaWNrIiwiY2xpY2siLCJhZGRfbW92aWUiLCJmaXJzdCIsImZvY3VzIiwiRGF0ZSIsIm5vdyIsImFkZENsYXNzIiwicmF0aW5nc3RhciIsImkiLCJtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QiLCJvbiIsImZsZF92YWwiLCJvZ1ZhbCIsInRoaXMiLCJhdHRyIiwiY3VyclZhbCIsInZhbCIsImZsZF9uYW1lIiwiZmxkX2VsIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJ1dGlscyIsImlucHV0X251bWJlcnNfb25seSIsInBhcnNlSW50IiwicmVtb3ZlQ2xhc3MiLCJuZXh0QWxsIiwicmVtb3ZlIiwidHJhY2tfY2hhbmdlc19saXN0aW5nIiwianFPYmoiLCJjbG9zZXN0IiwiZmluZCIsImhhc0NsYXNzIiwic2F2ZV9hbGxfY2hlY2siLCJodG1sIiwicHJldkFsbCIsInNpYmxpbmdzIiwibW92aWVfcmF0aW5nX3NlbCIsImNoYW5nZSIsInNhdmVfb25lX2NoZWNrIiwic2F2ZV9vbmVfY2xpY2siLCJzYXZlX29uZSIsInNhdmVfYWxsIiwic2F2ZV9pdGVtIiwiaXNOZXciLCJyZXFfb2JqIiwiSUQiLCJyZXFfb2JqX2ZsZHMiLCJjaGdkRmxkc0FyciIsImlkeF9mbGQiLCJpdG1fZmxkIiwiZmxkTmFtZSIsImZsZFZhbCIsIk51bWJlciIsImlzIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJQcm9taXNlIiwicHJvbVN1Y2Nlc3MiLCJwcm9tRXJyb3IiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsIm1vdmllX3JlY2lkX25ldyIsImVycm9yIiwiZXJyX2Rpc3AiLCJyZXNwb25zZUpTT04iLCJyZXNwb25zZVRleHQiLCJzdGF0dXMiLCJzaG93X2xvZ2luX21vZGFsIiwic3RhdHVzX21zZyIsImVyck9iaiIsImNoZ2RNb3ZpZXNBcnIiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZmFkZU91dCJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsWUFBeUMsaUJBQWxCLFlBQStCQSxZQUFjLElBQ3ZFQSxZQUFjLENBQ2RDLEtBQU8sS0FDTkMsS0FBS0MsYUFDSkMsS0FBTSxXQUNOSixZQUFZSyxpQkFDVkMsTUFBTyxLQUVUTixZQUFZTyxlQUlkRixhQUFlLEtBQ2RILEtBQUtNLGNBQ0xSLFlBQVlTLG1CQUdiRixVQUFZLEtBQ1hHLEVBQUUsa0NBQWtDQyxNQUFNLFNB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RUFBY2YsRUFBRWMsR0FBS29ELEtBQUssY0FFekJsRSxFQUFFYyxHQUFLb0UsU0FBUyxZQUNwQlksR0FBUSxHQUdNeEcsWUFBWXVHLFVBQVU5RSxFQUFhK0UsR0FFekNwRyxLQUNSLFdBQ0ttQixFQUFJLElBQU0rRyxFQUFjakgsUUFDM0JyQixZQUFZb0ksV0FBVyxxQkFHekIsU0FBVUMsR0FDVC9FLFFBQVF3RSxNQUFNTyxRQU1sQkQsV0FBY0EsSUFDYixPQUFRQSxHQUNQLElBQUssbUJBR0wsSUFBSyxpQkFFTCxNQUNBLElBQUssbUJBRUoxSCxFQUFFLGtEQUFrRDZFLFNBRXBEN0UsRUFBRSxrQ0FBa0NFLFFBQVEsc0ZBRzVDMkgsT0FBT0MsV0FBWSxXQUNsQjlILEVBQUUsaURBQWlEK0gsUUFBUSxPQUFRLFdBQ2xFL0gsRUFBRWlFLE1BQU1ZLFlBRVAsU0FPSnRGIiwiZmlsZSI6ImpzL21vZHVsZXMvbW92aWVfYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIG1vdmllLWFkbWluLmpzICovXHJcbnZhciBtb3ZpZV9hZG1pbiA9ICggdHlwZW9mIChtb3ZpZV9hZG1pbikgPT09ICdvYmplY3QnICkgPyBtb3ZpZV9hZG1pbiA6IHt9O1xyXG4obW92aWVfYWRtaW4gPSB7XHJcblx0aW5pdCA6ICgpID0+IHtcclxuXHRcdGF1dGguc2VzaF9jaGVjaygpXHJcblx0XHQudGhlbiggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRtb3ZpZV9hZG1pbi5zZXNoX3N1Y2Nlc3MoKTtcclxuXHRcdH0pLmNhdGNoKCAoKSA9PiB7XHJcblx0XHRcdC8qKiBObyB2YWxpZCBzZXNzaW9uIGZvdW5kICovXHJcblx0XHRcdG1vdmllX2FkbWluLnNlc2hfZmFpbCgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzZXNoX3N1Y2Nlc3MgOiAoKSA9PiB7XHJcblx0XHRhdXRoLmxvZ291dF9pbml0KCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5sb2FkX21vdmllX2xpc3QoKTtcclxuXHR9XHJcblx0LFxyXG5cdHNlc2hfZmFpbCA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbiAuc3RhdHVzLWNvbnRhaW5lcicpLmFsZXJ0KCdjbG9zZScpO1xyXG5cclxuXHRcdHZhciBlcnJNc2cgPSAnPGRpdiBjbGFzcz1cInN0YXR1cy1jb250YWluZXIgYWxlcnQgYWxlcnQtd2FybmluZyBmYWRlIHNob3dcIiByb2xlPVwiYWxlcnRcIj4nICtcclxuXHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJzdGF0dXMtbXNnXCI+PGEgaWQ9XCJsb2dfaW5fcHJvbXB0XCIgaHJlZj1cIiNcIj5Mb2cgaW4gdG8gZWRpdDwvYT48L3NwYW4+JyArXHJcblx0XHRcdCc8L2Rpdj4nO1xyXG5cdFx0XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLnByZXBlbmQoZXJyTXNnKTtcclxuXHJcblx0XHRhdXRoLmxvZ2luX21vZGFsX2luaXQoKTtcclxuXHR9XHJcblx0LFxyXG5cdGxvYWRfbW92aWVfbGlzdCA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbiAuc3RhdHVzLW1zZycpLnRleHQoJ01vdmllcyBsb2FkaW5nJyk7XHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2dldF9tb3ZpZT9yZWNpZD1hbGwnLFxyXG5cdFx0XHRkYXRhVHlwZTogJ2pzb24nXHJcblx0XHR9KS5kb25lKCBmdW5jdGlvbiAocmVzcCkge1xyXG5cdFx0XHRpZiAocmVzcC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0JC5lYWNoKHJlc3AsIGZ1bmN0aW9uKGlkeCwgaXRtKSB7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmVjaWQgPSBpdG0uaWQ7XHJcblx0XHRcdFx0XHQvKipcclxuXHRcdFx0XHRcdCAgKiBGaWVsZHM6XHJcblx0XHRcdFx0XHQgICogVGl0bGVcclxuXHRcdFx0XHRcdCAgKiBZZWFyXHJcblx0XHRcdFx0XHQgICogTGVuZ3RoXHJcblx0XHRcdFx0XHQgICogUmF0aW5nXHJcblx0XHRcdFx0XHQgICogRm9ybWF0XHJcblx0XHRcdFx0XHQgICogQXJ0XHJcblx0XHRcdFx0XHQgICovXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfb2JqIFx0XHQ9IGl0bS5maWVsZHM7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfdGl0bGUgXHQ9IG1vdmllX29iai5UaXRsZTtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV95ZWFyIFx0XHQ9IG1vdmllX29iai5ZZWFyO1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2xlbmd0aCBcdD0gbW92aWVfb2JqLkxlbmd0aDtcclxuXHRcdFx0XHRcdHZhciBtb3ZpZV9yYXRpbmcgXHQ9IG1vdmllX29iai5SYXRpbmc7XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfZm9ybWF0IFx0PSBtb3ZpZV9vYmouRm9ybWF0O1xyXG5cdFx0XHRcdFx0Ly8gdmFyIG1vdmllX2FydCBcdFx0PSBtb3ZpZV9vYmouQXJ0O1xyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2FjdGl2ZSBcdD0gbW92aWVfb2JqLkFjdGl2ZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIG1vdmllX2FjdGl2ZV9jaGVja2VkID0gJyc7XHJcblx0XHRcdFx0XHRpZiAobW92aWVfYWN0aXZlKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FjdGl2ZV9jaGVja2VkID0gJyBjaGVja2VkJztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJzID0gbW92aWVfYWRtaW4uc2VlaW5nX3N0YXJzKG1vdmllX3JhdGluZyk7XHJcblxyXG5cdFx0XHRcdFx0dmFyIERWRHNlbCwgU1RSc2VsLCBWSFNzZWw7XHJcblx0XHRcdFx0XHRzd2l0Y2ggKG1vdmllX2Zvcm1hdCkge1xyXG5cdFx0XHRcdFx0XHRjYXNlICdEVkQnOlxyXG5cdFx0XHRcdFx0XHRcdERWRHNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdTdHJlYW1pbmcnOlxyXG5cdFx0XHRcdFx0XHRcdFNUUnNlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICdWSFMnOlxyXG5cdFx0XHRcdFx0XHRcdFZIU3NlbCA9ICdzZWxlY3RlZCc7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZ1wiICcgK1xyXG5cdFx0XHRcdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnZGF0YS1oYXNjaGdzPVwiZmFsc2VcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCdpZD1cIm1vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnPGRpdiBjbGFzcz1cIm1vdmllX3Bvc3RlclwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfdGl0bGUgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfdGl0bGVfJyArIG1vdmllX3JlY2lkICsgJ1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnVGl0bGUnICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JyA8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KDUwIGNoYXJhY3RlcnMgb3IgbGVzcyk8L3NtYWxsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3RpdGxlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX3RpdGxlICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiVGl0bGVcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfdGl0bGUgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBtaW5sZW5ndGg9XCIxXCIgbWF4bGVuZ3RoPVwiNTBcIicgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9kZXRhaWxzXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3llYXIgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnWWVhcicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oZnJvbSAxODAwIHRvIDIxMDApPC9zbWFsbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIicgKyBtb3ZpZV95ZWFyICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJZZWFyXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfeWVhciArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8qKiBJbnB1dCB0eXBlPVwibnVtYmVyXCIgaGFzIHVuZGVzaXJhYmxlIHNpZGUgZWZmZWN0cyAqL1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vICcgdHlwZT1cIm51bWJlclwiIG1pbj1cIjE4MDBcIiBtYXg9XCIyMTAwXCInICsgXHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8qKiBUaGlzIHBhdHRlcm4gaXMgcGVyZmVjdCBidXQgdHJpZ2dlcmluZyB0aGUgbnVtZXJpYyBrZXlwYWQgb24gbW9iaWxlIGlzIHBlcmZlY3RlciAqL1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vICcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGR7NH1cIiBtYXhsZW5ndGg9XCI0XCIgcmVxdWlyZWQnICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKiogRnVuIGZhY3Q6IFRoaXMgcGF0dGVybiB3aWxsIHRyaWdnZXIgdGhlIG51bWVyaWMga2V5cGFkIG9uIG1vYmlsZSAqL1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGQqXCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2xlbmd0aCBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0J0xlbmd0aCcgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oaW4gbWludXRlcyk8L3NtYWxsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJMZW5ndGhcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1vZ3ZhbD1cIicgKyBtb3ZpZV9sZW5ndGggKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiOTk5XCInICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwidGV4dFwiIHBhdHRlcm49XCJcXFxcZCpcIiBtYXhsZW5ndGg9XCIzXCIgcmVxdWlyZWQnICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfcmF0aW5nIGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnUmF0aW5nJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPihTZWxlY3QgYSByYXRpbmcpPC9zbWFsbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIHZhbHVlPVwiJyArIG1vdmllX3JhdGluZyArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiUmF0aW5nXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfcmF0aW5nICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMVwiIG1heD1cIjVcIiBoaWRkZW4nICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfZm9ybWF0IGZvcm0tZmllbGQtY29udGFpbmVyXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwgZm9yPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnRm9ybWF0JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0XCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JzxzZWxlY3QgaWQ9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkZvcm1hdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgKyc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gJzxvcHRpb24gc2VsZWN0ZWQ+T3BlbiB0aGlzIHNlbGVjdCBtZW51PC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJEVkRcIicgKyBEVkRzZWwgKyAnPkRWRDwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiU3RyZWFtaW5nXCInICsgU1RSc2VsICsgJz5TdHJlYW1pbmc8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlZIU1wiJyArIFZIU3NlbCArICc+VkhTPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L3NlbGVjdD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdC8vICc8ZGl2IGNsYXNzPVwibW92aWVfYWN0aXZlIGZvcm0tZmllbGQtY29udGFpbmVyIGZvcm0tY2hlY2tcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfYWN0aXZlIGZvcm0tZmllbGQtY29udGFpbmVyIGN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfYWN0aXZlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiQWN0aXZlXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfYWN0aXZlICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gJyBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JyB0eXBlPVwiY2hlY2tib3hcIicgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtb3ZpZV9hY3RpdmVfY2hlY2tlZCArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8bGFiZWwnICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnIGZvcj1cIm1vdmllX2FjdGl2ZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAnIGNsYXNzPVwibGJsX2NoZWNrYm94IGZvcm0tY2hlY2stbGFiZWxcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJsYmxfY2hlY2tib3ggY3VzdG9tLWNvbnRyb2wtbGFiZWxcIicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0J0FjdGl2ZScgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdCc8L2Rpdj4nXHJcblx0XHRcdFx0XHQ7XHJcblxyXG5cdFx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5hcHBlbmQobW92aWVfbGlzdGluZyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGlkeCsxID09PSByZXNwLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9hZG1pbi5yZWFkeSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KS5mYWlsKCBmdW5jdGlvbiAoIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcclxuXHRcdFx0JCgnI21vdmllX2FkbWluIC5zdGF0dXMtY29udGFpbmVyJykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblxyXG5cdFx0XHR2YXIgZXJyTXNnID0gJzxkaXYgY2xhc3M9XCJzdGF0dXMtY29udGFpbmVyIGFsZXJ0IGFsZXJ0LXdhcm5pbmcgZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+JyArXHJcblx0XHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJzdGF0dXMtbXNnXCI+VGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBtb3ZpZXMuPC9icj5UcnkgcmVmcmVzaGluZyB0aGUgcGFnZSBhbmQgaWYgdGhlIHByb2JsZW0gcGVyc2lzdHMsIHBsZWFzZSBjb250YWN0IHVzLjwvc3Bhbj4nICtcclxuXHRcdFx0XHQnPC9kaXY+JztcclxuXHRcdFx0XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0JykucHJlcGVuZChlcnJNc2cpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRyZWFkeSA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbiAuc3RhdHVzLWNvbnRhaW5lcicpLmFsZXJ0KCdjbG9zZScpO1xyXG5cclxuXHRcdG1vdmllX2FkbWluLmFkZF9tb3ZpZV9jbGljaygpO1xyXG5cdFx0JCgnLmFkZC1tb3ZpZScpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cdFx0XHJcblx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2ZpZWxkKCk7XHJcblx0XHRtb3ZpZV9hZG1pbi5yYXRpbmdfaG92ZXIoKTtcclxuXHRcdG1vdmllX2FkbWluLnJhdGluZ19jbGljaygpO1xyXG5cdFx0Ly8gbW92aWVfYWRtaW4uc2F2ZV9vbmVfY2xpY2soKTtcclxuXHRcdG1vdmllX2FkbWluLnNhdmVfYWxsX2NsaWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRhZGRfbW92aWVfY2xpY2sgOiAoKSA9PiB7XHJcblx0XHQkKCcuYWRkLW1vdmllJykuY2xpY2soIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0bW92aWVfYWRtaW4uYWRkX21vdmllKCk7XHJcblxyXG5cdFx0XHQkKCdpbnB1dCcpLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0YWRkX21vdmllIDogKCkgPT4ge1xyXG5cdFx0dmFyIG1vdmllX3JlY2lkID0gRGF0ZS5ub3coKTtcclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3RhcnMgPSBtb3ZpZV9hZG1pbi5zZWVpbmdfc3RhcnMoJzEnKTtcclxuXHJcblx0XHR2YXIgbW92aWVfbGlzdGluZyA9ICc8ZGl2IGNsYXNzPVwibW92aWVfbGlzdGluZyBpcy1uZXcgZm9ybS1ncm91cFwiICcgK1xyXG5cdFx0XHRcdCdkYXRhLXJlY2lkPVwiJyArIG1vdmllX3JlY2lkICsnXCInICtcclxuXHRcdFx0XHQvLyAnZGF0YS1yZWNpZD1cIm5ld1wiJyArXHJcblx0XHRcdFx0J2RhdGEtaGFzY2hncz1cImZhbHNlXCInICtcclxuXHRcdFx0XHQnaWQ9XCJtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdCdjbGFzcz1cIm1vdmllX2xpc3RpbmdfbmV3XCInICtcclxuXHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdC8vICc8ZGl2IGNsYXNzPVwibW92aWVfcG9zdGVyXCI+PC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV90aXRsZSBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCI+JyArXHJcblx0XHRcdFx0XHRcdCdUaXRsZScgK1xyXG5cdFx0XHRcdFx0JzwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHQnPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPig1MCBjaGFyYWN0ZXJzIG9yIGxlc3MpPC9zbWFsbD4nICtcclxuXHRcdFx0XHRcdCc8aW5wdXQgaWQ9XCJtb3ZpZV90aXRsZV8nICsgbW92aWVfcmVjaWQgKyAnXCInICtcclxuXHRcdFx0XHRcdFx0JyB2YWx1ZT1cIlwiJyArXHJcblx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiVGl0bGVcIicgK1xyXG5cdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCJuZXdfbW92aWVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIicgK1xyXG5cdFx0XHRcdFx0XHQvLyAnIHBsYWNlaG9sZGVyPVwiVGhlIEJpZyBGbGljayBUaXRsZVwiJyArXHJcblx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBtaW5sZW5ndGg9XCIxXCIgbWF4bGVuZ3RoPVwiNTBcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9kZXRhaWxzXCI+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX3llYXIgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV95ZWFyXycgKyBtb3ZpZV9yZWNpZCArICdcIj4nICtcclxuXHRcdFx0XHRcdFx0XHQnWWVhcicgK1xyXG5cdFx0XHRcdFx0XHQnPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0JzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oZnJvbSAxODAwIHRvIDIxMDApPC9zbWFsbD4nICtcclxuXHRcdFx0XHRcdFx0JzxpbnB1dCBpZD1cIm1vdmllX3llYXJfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyB2YWx1ZT1cIlwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBkYXRhLWZsZG5hbWU9XCJZZWFyXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCJuZXdfbW92aWVfJyArIG1vdmllX3JlY2lkICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBwbGFjZWhvbGRlcj1cIjIwMTlcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdHlwZT1cInRleHRcIiBwYXR0ZXJuPVwiXFxcXGQqXCIgbWF4bGVuZ3RoPVwiNFwiIHJlcXVpcmVkJyArIFxyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1vdmllX2xlbmd0aCBmb3JtLWZpZWxkLWNvbnRhaW5lclwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxhYmVsIGZvcj1cIm1vdmllX2xlbmd0aF8nICsgbW92aWVfcmVjaWQgKyAnXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0J0xlbmd0aCcgK1xyXG5cdFx0XHRcdFx0XHQnPC9sYWJlbD4nICtcclxuXHRcdFx0XHRcdFx0JzxzbWFsbCBjbGFzcz1cInRleHQtbXV0ZWRcIj4oaW4gbWludXRlcyk8L3NtYWxsPicgK1xyXG5cdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfbGVuZ3RoXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCJcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiTGVuZ3RoXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfbGVuZ3RoICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImZvcm0tY29udHJvbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBwbGFjZWhvbGRlcj1cIjE1MFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG1heD1cIjUwMFwiIG1pbmxlbmd0aD1cIjFcIiBtYXhsZW5ndGg9XCIzXCIgcGF0dGVybj1cIlxcXFxkezR9XCIgcmVxdWlyZWQnICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIlxcXFxkKlwiIG1heGxlbmd0aD1cIjNcIiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9yYXRpbmcgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9yYXRpbmdfJyArIG1vdmllX3JlY2lkICsgJ1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdCdSYXRpbmcnICtcclxuXHRcdFx0XHRcdFx0JzwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdCc8c21hbGwgY2xhc3M9XCJ0ZXh0LW11dGVkXCI+KFNlbGVjdCBhIHJhdGluZyk8L3NtYWxsPicgK1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9yYXRpbmdfc3RhcnMgK1xyXG5cdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgdmFsdWU9XCIxXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIlJhdGluZ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX3JhdGluZyArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJmb3JtLWNvbnRyb2wgdmFsQ2hnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiNVwiIGhpZGRlbiByZXF1aXJlZCcgKyBcclxuXHRcdFx0XHRcdFx0XHQnPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtb3ZpZV9mb3JtYXQgZm9ybS1maWVsZC1jb250YWluZXJcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCBmb3I9XCJtb3ZpZV9mb3JtYXRfJyArIG1vdmllX3JlY2lkICsgJ1wiPicgK1xyXG5cdFx0XHRcdFx0XHRcdCdGb3JtYXQnICtcclxuXHRcdFx0XHRcdFx0JzwvbGFiZWw+JyArXHJcblx0XHRcdFx0XHRcdC8vICc8c2VsZWN0IGlkPVwibW92aWVfZm9ybWF0XycgKyBtb3ZpZV9yZWNpZCArICdcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIicgK1xyXG5cdFx0XHRcdFx0XHQnPHNlbGVjdCBpZD1cIm1vdmllX2Zvcm1hdF8nICsgbW92aWVfcmVjaWQgKyAnXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgdmFsQ2hnXCInICtcclxuXHRcdFx0XHRcdFx0XHQnIGRhdGEtZmxkbmFtZT1cIkZvcm1hdFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBkYXRhLW9ndmFsPVwiJyArIG1vdmllX2Zvcm1hdCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCc+JyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJzxvcHRpb24gc2VsZWN0ZWQ+T3BlbiB0aGlzIHNlbGVjdCBtZW51PC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxvcHRpb24gdmFsdWU9XCJEVkRcIj5EVkQ8L29wdGlvbj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPG9wdGlvbiB2YWx1ZT1cIlN0cmVhbWluZ1wiIHNlbGVjdGVkPlN0cmVhbWluZzwvb3B0aW9uPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8b3B0aW9uIHZhbHVlPVwiVkhTXCI+VkhTPC9vcHRpb24+JyArXHJcblx0XHRcdFx0XHRcdCc8L3NlbGVjdD4nICtcclxuXHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdC8vICc8ZGl2IGNsYXNzPVwibW92aWVfYWN0aXZlIGZvcm0tZmllbGQtY29udGFpbmVyIGZvcm0tY2hlY2tcIj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibW92aWVfYWN0aXZlIGZvcm0tZmllbGQtY29udGFpbmVyIGN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveFwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGlucHV0IGlkPVwibW92aWVfYWN0aXZlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZGF0YS1mbGRuYW1lPVwiQWN0aXZlXCInICtcclxuXHRcdFx0XHRcdFx0XHQvLyAnIGRhdGEtb2d2YWw9XCInICsgbW92aWVfYWN0aXZlICsgJ1wiJyArXHJcblx0XHRcdFx0XHRcdFx0Ly8gJyBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIicgK1xyXG5cdFx0XHRcdFx0XHRcdCcgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyB0eXBlPVwiY2hlY2tib3hcIicgKyBcclxuXHRcdFx0XHRcdFx0XHQnIGNoZWNrZWQnICtcclxuXHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0JzxsYWJlbCcgK1xyXG5cdFx0XHRcdFx0XHRcdCcgZm9yPVwibW92aWVfYWN0aXZlXycgKyBtb3ZpZV9yZWNpZCArICdcIicgK1xyXG5cdFx0XHRcdFx0XHRcdC8vICcgY2xhc3M9XCJsYmxfY2hlY2tib3ggZm9ybS1jaGVjay1sYWJlbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0JyBjbGFzcz1cImxibF9jaGVja2JveCBjdXN0b20tY29udHJvbC1sYWJlbFwiJyArXHJcblx0XHRcdFx0XHRcdFx0Jz4nICtcclxuXHRcdFx0XHRcdFx0XHQnQWN0aXZlJyArXHJcblx0XHRcdFx0XHRcdCc8L2xhYmVsPicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0JzwvZGl2PidcclxuXHRcdDtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLnByZXBlbmQobW92aWVfbGlzdGluZyk7XHJcblx0XHQkKCcuaXMtbmV3IC5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5hZGRDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHR9XHJcblx0LFxyXG5cdHNlZWluZ19zdGFycyA6IChtb3ZpZV9yYXRpbmcpID0+IHtcclxuXHRcdC8qKlxyXG5cdFx0ICogU3RhciBBU0NJSSBjb2Rlc1xyXG5cdFx0ICogLSAtIC0gLSAtIC0gLSAtIC1cclxuXHRcdCAqIFNvbGlkIHN0YXI6ICYjOTczMztcclxuXHRcdCAqIE91dGxpbmUgc3RhcjogJiM5NzM0O1xyXG5cdFx0ICovXHJcblx0XHR2YXIgbW92aWVfcmF0aW5nX3N0YXJzID0gJyc7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPGRpdiBjbGFzcz1cIm1vdmllX3JhdGluZ19zdGFyc1wiPic7XHJcblx0XHQvKiogU2V0IHRoZSBsb3dlc3QgdmFsdWUgKi9cclxuXHRcdHZhciByYXRpbmdzdGFyID0gMTtcclxuXHRcdC8qKiBBZGQgYSBzZWxlY3RlZCBpbmRpY2F0b3IgdG8gdGhlIG9iamVjdCB1bnRpbCB0aGUgc2VsZWN0ZWQgcmF0aW5nIHZhbHVlIGlzIHJlYWNoZWQgKi9cclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW92aWVfcmF0aW5nOyBpKyspIHtcclxuXHRcdFx0bW92aWVfcmF0aW5nX3N0YXJzICs9ICc8c3BhbiBjbGFzcz1cIm1vdmllX3JhdGluZ19zdGFyIG1vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkXCIgZGF0YS1yYXRpbmdzdGFyPVwiJyArIHJhdGluZ3N0YXIgKyAnXCI+JiM5NzMzIDwvc3Bhbj4nO1xyXG5cdFx0XHRcclxuXHRcdFx0cmF0aW5nc3RhcisrO1xyXG5cdFx0fVxyXG5cdFx0LyoqIFN1YnRyYWN0IHRoZSBzZWxlY3RlZCByYXRpbmcgZnJvbSB0aGUgaGlnaGVzdCBwb3NzaWJsZSB0byBnZXQgYW4gdW5zZWxlY3RlZC9maWxsZXIgY291bnQgKi9cclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3Rhcl90b3RhbEN0ID0gNTtcclxuXHRcdHZhciBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkQ3QgPSBtb3ZpZV9yYXRpbmdfc3Rhcl90b3RhbEN0LW1vdmllX3JhdGluZztcclxuXHRcdC8qKiBBZGQgYW4gdW5zZWxlY3RlZCBpbmRpY2F0b3IgdG8gdGhlIG9iamVjdCB1bnRpbCBmaWxsZXIgY291bnQgaXMgcmVhY2hlZCAqL1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IG1vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWRDdDsgaSsrKSB7XHJcblx0XHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPHNwYW4gY2xhc3M9XCJtb3ZpZV9yYXRpbmdfc3RhciBtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkXCIgZGF0YS1yYXRpbmdzdGFyPVwiJyArIHJhdGluZ3N0YXIgKyAnXCI+JiM5NzM0ICA8L3NwYW4+JztcclxuXHJcblx0XHRcdHJhdGluZ3N0YXIrKztcclxuXHRcdH1cclxuXHRcdG1vdmllX3JhdGluZ19zdGFycyArPSAnPC9kaXY+JztcclxuXHJcblx0XHRyZXR1cm4gbW92aWVfcmF0aW5nX3N0YXJzO1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19maWVsZCA6ICgpID0+IHtcclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0Jykub24oJ2lucHV0IGNoYW5nZScsICdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG9nVmFsID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9ndmFsJyk7XHJcblx0XHRcdHZhciBjdXJyVmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0dmFyIGZsZF9uYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLWZsZG5hbWUnKTtcclxuXHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XHJcblx0XHRcdHZhciBmbGRfdmFsO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7XHJcblxyXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgYXMgY2hhbmdlZCAqL1xyXG5cdFx0XHRpZiAob2dWYWwgIT09IGN1cnJWYWwpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xyXG5cdFx0XHRcdHN3aXRjaCAoZmxkX25hbWUpIHtcclxuXHRcdFx0XHRcdGNhc2UgJ1RpdGxlJzpcclxuXHRcdFx0XHRcdFx0dmFyIGNoa190aXRsZSA9ICQodGhpcykudmFsKCkubGVuZ3RoID4gMCAmJiAkKHRoaXMpLnZhbCgpLmxlbmd0aCA8IDUxO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoIWNoa190aXRsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnVGl0bGUgbXVzdCBiZSAxIHRvIDUwIGNoYXJhY3RlcnMnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ1llYXInOlxyXG5cdFx0XHRcdFx0XHQvKiogT25seSBhbGxvdyBudW1iZXJzICovXHJcblx0XHRcdFx0XHRcdGZsZF92YWwgPSB1dGlscy5pbnB1dF9udW1iZXJzX29ubHkoY3VyclZhbCk7XHJcblx0XHRcdFx0XHRcdCQodGhpcykudmFsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGNoa195ciA9ICQodGhpcykudmFsKCkubGVuZ3RoID09PSA0ICYmICggcGFyc2VJbnQoICQodGhpcykudmFsKCkgKSA+PSAxODAwICYmIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPD0gMjEwMCApO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmICghY2hrX3lyKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdNdXN0IGJlIGEgNCBkaWdpdCBudW1iZXIgYmV0d2VlbiAxODAwIGFuZCAyMTAwJyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdMZW5ndGgnOlxyXG5cdFx0XHRcdFx0XHQvKiogT25seSBhbGxvdyBudW1iZXJzICovXHJcblx0XHRcdFx0XHRcdGZsZF92YWwgPSB1dGlscy5pbnB1dF9udW1iZXJzX29ubHkoY3VyclZhbCk7XHJcblx0XHRcdFx0XHRcdCQodGhpcykudmFsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGNoa19sZW4gPSAoIHBhcnNlSW50KCAkKHRoaXMpLnZhbCgpICkgPj0gMSAmJiBwYXJzZUludCggJCh0aGlzKS52YWwoKSApIDw9IDk5OSApO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmICggIWNoa19sZW4gKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdNdXN0IGJlIGEgMyBkaWdpdCBudW1iZXIgZ3JlYXRlciB0aGFuIDEnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygndmFsQ2hnJykubmV4dEFsbCgnLnZhbENoZ01zZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiogVGhpcyBkZWxpdmVycyB0aGUgY3VzdG9tIHZhbGlkYXRpb24gbWVzc2FnZXMgKi9cclxuXHRcdFx0LyogdmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcclxuXHJcblx0XHRcdGlmICghZmxkX2lzVmFsaWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG5cclxuXHRcdFx0fSAqL1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4udHJhY2tfY2hhbmdlc19saXN0aW5nKCAkKHRoaXMpICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpLm9uKCdjaGFuZ2UnLCAnc2VsZWN0JywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgb2dWYWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuXHRcdFx0LyoqIElmIHRoZSBjdXJyZW50IHZhbHVlIGlzbid0IHRoZSBvcmlnaW5hbCB2YWx1ZSwgbWFyayB0aGUgZmllbGQgKi9cclxuXHRcdFx0aWYgKG9nVmFsICE9PSBjdXJyVmFsKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygndmFsQ2hnJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygndmFsQ2hnJykubmV4dEFsbCgnLnZhbENoZ01zZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtb3ZpZV9hZG1pbi50cmFja19jaGFuZ2VzX2xpc3RpbmcoICQodGhpcykgKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19saXN0aW5nIDogKGpxT2JqKSA9PiB7XHJcblx0XHR2YXIgaGFzQ2hncyA9IGpxT2JqLmNsb3Nlc3QoJy5tb3ZpZV9saXN0aW5nJykuZmluZCgnaW5wdXQsIHNlbGVjdCcpLmhhc0NsYXNzKCd2YWxDaGcnKTtcclxuXHJcblx0XHRpZiAoaGFzQ2hncykge1xyXG5cdFx0XHRqcU9iai5jbG9zZXN0KCcubW92aWVfbGlzdGluZycpLmF0dHIoJ2RhdGEtaGFzY2hncycsIHRydWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0anFPYmouY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLWhhc2NoZ3MnLCBmYWxzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bW92aWVfYWRtaW4uc2F2ZV9hbGxfY2hlY2soKTtcclxuXHR9XHJcblx0LFxyXG5cdHJhdGluZ19ob3ZlciA6ICgpID0+IHtcclxuXHRcdC8qKiBIYXZlIHRvIHVzZSBkZWxlZ2F0ZWQgYXBwcm9hY2ggdG8gd29yayB3aXRoIGluamVjdGVkIGVsZW1lbnRzIChlLmcuLCBuZXcgbW92aWUpICovXHJcblx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdCcpXHJcblx0XHRcdC5vbignbW91c2VlbnRlcicsICcubW92aWVfcmF0aW5nX3N0YXInLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcclxuXHRcdFx0XHQvKiogTWFrZSBob3ZlcmVkIGl0ZW0gaW50byBzZWxlY3RlZCBzdGF0ZSAqL1xyXG5cdFx0XHRcdCQodGhpcykuaHRtbCgnJiM5NzMzICcpO1xyXG5cclxuXHRcdFx0XHQvKiogXHJcblx0XHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBiZWZvcmUgaG92ZXJlZCBpdGVtIGludG8gdGhlIHNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgc2VsZWN0ZWQgY29sb3JcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHQkKHRoaXMpLnByZXZBbGwoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmh0bWwoJyYjOTczMyAnKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX2hvdmVyX3ByZXZTaWInKTtcclxuXHJcblx0XHRcdFx0LyoqIFxyXG5cdFx0XHRcdCAqIE1ha2UgYWxsIHNpYmxpbmcgaXRlbXMgYWZ0ZXIgaG92ZXJlZCBpdGVtIGludG8gdGhlIHVuc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdFx0ICogYW5kIGFkZCBjbGFzcyB0aGF0IHdpbGwgbWFrZSB0aGVtIHRoZSB1bnNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JCh0aGlzKS5uZXh0QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5odG1sKCcmIzk3MzQgJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19ob3Zlcl9uZXh0U2liJyk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5vbignbW91c2VsZWF2ZScsICcubW92aWVfcmF0aW5nX3N0YXInLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfcHJldlNpYicpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfaG92ZXJfbmV4dFNpYicpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8qKiBSZXNldCBhbGwgc3RhcnMgdG8gb3JpZ2luYWwgc3RhdGUgKi9cclxuXHRcdFx0XHRpZiAoICQodGhpcykuaGFzQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykgKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmh0bWwoJyYjOTczMyAnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5odG1sKCcmIzk3MzQgJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQodGhpcykuc2libGluZ3MoJy5tb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLmh0bWwoJyYjOTczMyAnKTtcclxuXHRcdFx0XHQkKHRoaXMpLnNpYmxpbmdzKCcubW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpLmh0bWwoJyYjOTczNCAnKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblx0LFxyXG5cdHJhdGluZ19jbGljayA6ICgpID0+IHtcclxuXHRcdC8vICQoJy5tb3ZpZV9yYXRpbmdfc3RhcicpLmNsaWNrKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3QnKS5vbignY2xpY2snLCAnLm1vdmllX3JhdGluZ19zdGFyJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgbW92aWVfcmF0aW5nX3NlbCA9ICQodGhpcykuYXR0cignZGF0YS1yYXRpbmdzdGFyJyk7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQodGhpcykuY2xvc2VzdCgnLm1vdmllX2xpc3RpbmcnKS5hdHRyKCdkYXRhLXJlY2lkJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvKiogRmlyZSBjaGFuZ2UgZXZlbnQgb24gYXNzb2NpYXRlZCBpbnB1dCAqL1xyXG5cdFx0XHQkKCcjbW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCkudmFsKG1vdmllX3JhdGluZ19zZWwpLmNoYW5nZSgpO1xyXG5cclxuXHRcdFx0dmFyIG9nVmFsID0gJCgnI21vdmllX3JhdGluZ18nICsgbW92aWVfcmVjaWQpLmF0dHIoJ2RhdGEtb2d2YWwnKTtcclxuXHRcdFx0dmFyIGN1cnJWYWwgPSAkKCcjbW92aWVfcmF0aW5nXycgKyBtb3ZpZV9yZWNpZCkudmFsKCk7XHJcblxyXG5cdFx0XHQvKiogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXNuJ3QgdGhlIG9yaWdpbmFsIHZhbHVlLCBtYXJrIHRoZSBmaWVsZCAqL1xyXG5cdFx0XHQvKiogQ2hhbmdlIGNvbG9ycyBvbiByYXRpbmcgZGlzcGxheSB0byBtaW1pYyBpbnB1dCBmaWVsZHMgKi9cclxuXHRcdFx0aWYgKG9nVmFsICE9PSBjdXJyVmFsKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcubW92aWVfcmF0aW5nX3N0YXJzJykuYWRkQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcubW92aWVfcmF0aW5nX3N0YXJzJykucmVtb3ZlQ2xhc3MoJ3ZhbENoZy1jb2xvcnNPbmx5Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKiBcclxuXHRcdFx0ICogTWFrZSBzZWxjdGVkIGl0ZW0gXHJcblx0XHRcdCAqIGFuZCBhbGwgc2libGluZyBpdGVtcyBiZWZvcmUgaXQgXHJcblx0XHRcdCAqIGludG8gdGhlIHNlbGVjdGVkIHN0YXRlIFxyXG5cdFx0XHQgKiBhbmQgYWRkIGNsYXNzIHRoYXQgd2lsbCBtYWtlIHRoZW0gdGhlIHNlbGVjdGVkIGNvbG9yXHJcblx0XHRcdCAqL1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl91bnNlbGVjdGVkJyk7XHJcblx0XHRcdCQodGhpcykucHJldkFsbCgnLm1vdmllX3JhdGluZ19zdGFyJykuYWRkQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3NlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ21vdmllX3JhdGluZ19zdGFyX3Vuc2VsZWN0ZWQnKTtcclxuXHJcblx0XHRcdC8qKiBcclxuXHRcdFx0ICogTWFrZSBhbGwgc2libGluZyBpdGVtcyBhZnRlciBzZWxlY3RlZCBpdGVtIGludG8gdGhlIHVuc2VsZWN0ZWQgc3RhdGUgXHJcblx0XHRcdCAqIGFuZCBhZGQgY2xhc3MgdGhhdCB3aWxsIG1ha2UgdGhlbSB0aGUgdW5zZWxlY3RlZCBjb2xvclxyXG5cdFx0XHQgKi9cclxuXHRcdFx0JCh0aGlzKS5uZXh0QWxsKCcubW92aWVfcmF0aW5nX3N0YXInKS5hZGRDbGFzcygnbW92aWVfcmF0aW5nX3N0YXJfdW5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdtb3ZpZV9yYXRpbmdfc3Rhcl9zZWxlY3RlZCcpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZV9jaGVjayA6ICgpID0+IHtcclxuXHRcdC8vIGNoZWNrIGlmIGZpZWxkcyBhc3NvY2lhdGVkIHRvIGdpdmVuIHNhdmUgYnV0dG9uIGhhdmUgY2hhbmdlZFxyXG5cdH1cclxuXHQsXHJcblx0c2F2ZV9hbGxfY2hlY2sgOiAoKSA9PiB7XHJcblx0XHRpZiAoICQoJy52YWxDaGcnKS5sZW5ndGggIT09IDAgKSB7XHJcblx0XHRcdCQoJy5zYXZlLWFsbCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cclxuXHRcdFx0LyoqIElmIGFuIC5tc2dfdW5zYXZlZENoZ3MgaXNuJ3QgYWxyZWFkeSBwcmVzZW50LCBhZGQgaXQgKi9cclxuXHRcdFx0aWYgKCAkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MgLm1zZ191bnNhdmVkQ2hncycpLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfdW5zYXZlZENoZ3MgbXNnLXdhcm5pbmdcIj5UaGVyZSBhcmUgdW5zYXZlZCBjaGFuZ2VzITwvc21hbGw+Jyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5zYXZlLWFsbCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX3Vuc2F2ZWRDaGdzJykucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX29uZV9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5zYXZlX2l0ZW0nKS5jbGljayggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdHZhciBtb3ZpZV9yZWNpZCA9ICQodGhpcykuYXR0cignZGF0YS1yZWNpZCcpO1xyXG5cclxuXHRcdFx0bW92aWVfYWRtaW4uc2F2ZV9vbmUobW92aWVfcmVjaWQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzYXZlX2FsbF9jbGljayA6ICgpID0+IHtcclxuXHRcdCQoJy5zYXZlLWFsbCcpLmNsaWNrKCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHJcblx0XHRcdG1vdmllX2FkbWluLnNhdmVfYWxsKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfaXRlbSA6IChtb3ZpZV9yZWNpZCwgaXNOZXcpID0+IHtcclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnSUQnOiBtb3ZpZV9yZWNpZFxyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgcmVxX29ial9mbGRzID0ge307XHJcblx0XHR2YXIgY2hnZEZsZHNBcnIgPSAkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmZpbmQoJy52YWxDaGcnKTtcclxuXHJcblx0XHQvKiogXHJcblx0XHQgKiBGb3IgZWFjaCBjaGFuZ2VkIGZpZWxkLCBcclxuXHRcdCAqIGdldCB0aGUgYXR0cmlidXRlIHZhbHVlIHRoYXQgaGFzIHRoZSBhc3NvY2lhdGVkIGZpZWxkIG5hbWUgaW4gdGhlIGRhdGEgc3RvcmVcclxuXHRcdCAqIGFsb25nIHdpdGggdGhlIGZpZWxkIHZhbHVlIFxyXG5cdFx0ICogdG8gYnVpbGQgYW4gb2JqZWN0IG9mIGtleS92YWx1ZSBwYWlycyBcclxuXHRcdCAqIHRvIHNlbmQgaW4gZWFjaCByZXF1ZXN0XHJcblx0XHQgKi9cclxuXHJcblx0XHQkLmVhY2goY2hnZEZsZHNBcnIsIGZ1bmN0aW9uIChpZHhfZmxkLCBpdG1fZmxkKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG1fZmxkKS5hdHRyKCdkYXRhLWZsZG5hbWUnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtX2ZsZCkudmFsKCk7XHJcblxyXG5cdFx0XHRpZiAoIGZsZE5hbWUgPT09ICdZZWFyJyB8IGZsZE5hbWUgPT09ICdMZW5ndGgnIHwgZmxkTmFtZSA9PT0gJ1JhdGluZycgKSB7XHJcblx0XHRcdFx0ZmxkVmFsID0gTnVtYmVyKGZsZFZhbCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJlcV9vYmpfZmxkc1tmbGROYW1lXSA9IGZsZFZhbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHZhciBtb3ZpZV9hY3RpdmUgPSAkKCcjbW92aWVfYWN0aXZlXycgKyBtb3ZpZV9yZWNpZCkuaXMoJzpjaGVja2VkJyk7XHJcblxyXG5cdFx0cmVxX29ial9mbGRzWydBY3RpdmUnXSA9IG1vdmllX2FjdGl2ZTtcclxuXHJcblx0XHRyZXFfb2JqLmZpZWxkcyA9IHJlcV9vYmpfZmxkcztcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdHZhciBzYXZlSXRlbVByb20gPSBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKHByb21TdWNjZXNzLCBwcm9tRXJyb3IpIHtcclxuXHRcdFx0aWYgKGlzTmV3KSB7XHJcblx0XHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfY3JlYXRlX21vdmllJyxcclxuXHRcdFx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdFx0XHRkYXRhOiByZXFfc3RyLFxyXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcclxuXHRcdFx0XHRcdFx0dmFyIG1vdmllX3JlY2lkX25ldyA9IHJlc3AuaWQ7XHJcblxyXG5cdFx0XHRcdFx0XHQvKiogUmVwbGFjZSBvY2N1cmVuY2VzIG9mIG1pbGxpc2Vjb25kIHN0YW1wIElEIHdpdGggbmV3bHktY3JlYXRlZCByZXR1cm5lZCBJRCAqL1xyXG5cdFx0XHRcdFx0XHQkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmF0dHIoJ2lkJywgJ21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkX25ldyk7XHJcblx0XHRcdFx0XHRcdCQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZF9uZXcpLmF0dHIoJ2RhdGEtcmVjaWQnLCAnbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWRfbmV3KTtcclxuXHJcblx0XHRcdFx0XHRcdC8qKiBcclxuXHRcdFx0XHRcdFx0ICogTmVlZCBzb2x1dGlvbiBmb3IgZmluZGluZyBhbGwgb2NjdXJlbmNlcyBvZiB0ZW1wb3JhcnkgSUQgd2l0aCBuZXcgb25lIFxyXG5cdFx0XHRcdFx0XHQgKiBQb3NzaWJsZSBzb2x1dGlvbiBpcyB0byBlbGltaW5hdGUgYWxsIHRoZSBwbGFjZXMgd2hlcmUgdGhhdCB1bmlxdWUgSUQgaXMgdXNlZFxyXG5cdFx0XHRcdFx0XHQgKiBpLmUuLCBqdXN0IHJlbHkgb24gcGFyZW50IGVsZW1lbnQgYXR0cmlidXRlc1xyXG5cdFx0XHRcdFx0XHQgKi9cclxuXHJcblx0XHRcdFx0XHRcdC8qKiBSZXNldCBmaWVsZHMgdG8gdW5jaGFuZ2VkIHN0eWxlcyAqL1xyXG5cdFx0XHRcdFx0XHQkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWRfbmV3KS5yZW1vdmVDbGFzcygnaXMtbmV3Jyk7XHJcblx0XHRcdFx0XHRcdCQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZF9uZXcpLmZpbmQoJy52YWxDaGcsIC52YWxDaGctY29sb3JzT25seScpLnJlbW92ZUNsYXNzKCd2YWxDaGcgdmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHRcdFx0XHRcdFx0JCgnI21vdmllX2xpc3RpbmdfJyArIG1vdmllX3JlY2lkX25ldykuZmluZCgnLm1vdmllX3JhdGluZ19zdGFycycpLnJlbW92ZUNsYXNzKCd2YWxDaGctY29sb3JzT25seScpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRwcm9tU3VjY2VzcyhyZXNwKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblx0XHJcblx0XHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRwcm9tRXJyb3IoKTtcclxuXHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHQvKiBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cdFxyXG5cdFx0XHRcdFx0fSAqL1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X3VwZGF0ZV9tb3ZpZScsXHJcblx0XHRcdFx0XHR0eXBlOiAnUEFUQ0gnLFxyXG5cdFx0XHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdC8qKiBSZXNldCBmaWVsZHMgdG8gdW5jaGFuZ2VkIHN0eWxlICovXHJcblx0XHRcdFx0XHRcdCQoJyNtb3ZpZV9saXN0aW5nXycgKyBtb3ZpZV9yZWNpZCkuZmluZCgnLnZhbENoZywgLnZhbENoZy1jb2xvcnNPbmx5JykucmVtb3ZlQ2xhc3MoJ3ZhbENoZyB2YWxDaGctY29sb3JzT25seScpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHQkKCcjbW92aWVfbGlzdGluZ18nICsgbW92aWVfcmVjaWQpLmZpbmQoJy5tb3ZpZV9yYXRpbmdfc3RhcnMnKS5yZW1vdmVDbGFzcygndmFsQ2hnLWNvbG9yc09ubHknKTtcclxuXHRcclxuXHRcdFx0XHRcdFx0cHJvbVN1Y2Nlc3MoKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblx0XHJcblx0XHRcdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRwcm9tRXJyb3IoKTtcclxuXHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmIChqcVhIUi5zdGF0dXMgPT09IDQwMSkge1xyXG5cdFx0XHRcdFx0XHRcdGF1dGguc2hvd19sb2dpbl9tb2RhbCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0LyogY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHRcclxuXHRcdFx0XHRcdH0gKi9cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHNhdmVJdGVtUHJvbTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfb25lIDogKG1vdmllX3JlY2lkKSA9PiB7XHJcblx0XHR2YXIgc2F2ZUl0ZW0gPSBtb3ZpZV9hZG1pbi5zYXZlX2l0ZW0obW92aWVfcmVjaWQpO1xyXG5cclxuXHRcdHNhdmVJdGVtLnRoZW4oXHJcblx0XHRcdGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQvKiogRmxhZyBhbiBlbGVtZW50IHNvIHRoZSBtZXNzYWdlIGNhbiBiZSBwbGFjZWQgY29udGV4dHVhbGx5ICovXHJcblx0XHRcdFx0Ly9cclxuXHJcblx0XHRcdFx0bW92aWVfYWRtaW4uc3RhdHVzX21zZygnc2F2ZV9vbmVfc3VjY2VzcycpO1xyXG5cdFx0XHR9LCBcclxuXHRcdFx0ZnVuY3Rpb24gKGVyck9iaikge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyT2JqKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblx0LFxyXG5cdHNhdmVfYWxsIDogKCkgPT4ge1xyXG5cdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfc2F2ZVN0YXR1cycpLnJlbW92ZSgpO1xyXG5cclxuXHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19zYXZlU3RhdHVzIG1zZ19zYXZpbmdBbGxDaGdzIG1zZy1pbmZvXCI+U2F2aW5nIGFsbCBjaGFuZ2VzLi4uPC9zbWFsbD4nKTtcclxuXHJcblx0XHQvKiogR2F0aGVyIGNoYW5nZXMgYW5kIHNlbmQgUEFUQ0ggcmVxdWVzdCB0byBBUEkgcGVyIG1vdmllICovXHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogQ2hhbmdlcyBuZWVkIHRvIGJlIGdyb3VwZWQgcGVyIHJlY29yZCAoaS5lLiwgbW92aWUpXHJcblx0XHQgKiBcclxuXHRcdCAqIFByZXR0eSBzdXJlIHRoZSBiZXN0IG9wdGlvbiBpcyB0byBcclxuXHRcdCAqIGZsYWcgYSBwYXJlbnQgZWxlbWVudCAoZS5nLiwgXCIubW92aWVfbGlzdGluZ1wiKSBvbiBjaGFuZ2VzLFxyXG5cdFx0ICogdXNpbmcgdGhhdCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQgXHJcblx0XHQgKiB0byB0cmF2ZXJzZSBkb3duIGNoaWxkcmVuXHJcblx0XHQgKiBhbmQgY29sbGVjdCBjaGFuZ2VzLlxyXG5cdFx0ICpcclxuXHRcdCAqIElmIGFsbCBjaGFuZ2VzIGZvciBhIGdpdmVuIHJlY29yZCBhcmUgYmFja2VkIG91dFxyXG5cdFx0ICogY2xlYXIgZmxhZyBvbiBwYXJlbnQgZWxlbWVudFxyXG5cdFx0ICovXHJcblxyXG5cdFx0dmFyIGNoZ2RNb3ZpZXNBcnIgPSAkKCcubW92aWVfbGlzdGluZ1tkYXRhLWhhc2NoZ3M9XCJ0cnVlXCJdJyk7XHJcblxyXG5cdFx0JC5lYWNoKGNoZ2RNb3ZpZXNBcnIsIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgaXNOZXcgPSBmYWxzZTtcclxuXHRcdFx0dmFyIG1vdmllX3JlY2lkID0gJChpdG0pLmF0dHIoJ2RhdGEtcmVjaWQnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICggJChpdG0pLmhhc0NsYXNzKCdpcy1uZXcnKSApIHtcclxuXHRcdFx0XHRpc05ldyA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzYXZlSXRlbSA9IG1vdmllX2FkbWluLnNhdmVfaXRlbShtb3ZpZV9yZWNpZCwgaXNOZXcpO1xyXG5cclxuXHRcdFx0c2F2ZUl0ZW0udGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZiAoaWR4KzEgPT09IGNoZ2RNb3ZpZXNBcnIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdG1vdmllX2FkbWluLnN0YXR1c19tc2coJ3NhdmVfYWxsX3N1Y2Nlc3MnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiAoZXJyT2JqKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVyck9iaik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzdGF0dXNfbXNnIDogKHN0YXR1c19tc2cpID0+IHtcclxuXHRcdHN3aXRjaCAoc3RhdHVzX21zZykge1xyXG5cdFx0XHRjYXNlICdzYXZlX29uZV9zdWNjZXNzJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfb25lX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX3N1Y2Nlc3MnOlxyXG5cdFx0XHRcdC8qKiBSZW1vdmUgYW55IG1lc3NhZ2VzIGFib3V0IHNhdmUgc3RhdHVzICovXHJcblx0XHRcdFx0JCgnI21vdmllX2FkbWluX2xpc3RfYWN0aW9uc19tc2dzIC5tc2dfc2F2ZVN0YXR1cycpLnJlbW92ZSgpO1xyXG5cclxuXHRcdFx0XHQkKCcjbW92aWVfYWRtaW5fbGlzdF9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfc2F2ZVN0YXR1cyBtc2dfY2hnc1NhdmVkIG1zZy1zdWNjZXNzXCI+QWxsIGNoYW5nZXMgc2F2ZWQuPC9zbWFsbD4nKTtcclxuXHJcblx0XHRcdFx0LyoqIEFmdGVyIHNwZWNpZmljZWQgZGVsYXksIGZhZGUgdGhlIG1lc3NhZ2UsIHRoZW4gcmVtb3ZlIGZyb20gRE9NICovXHJcblx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdCQoJyNtb3ZpZV9hZG1pbl9saXN0X2FjdGlvbnNfbXNncyAubXNnX2NoZ3NTYXZlZCcpLmZhZGVPdXQoJ3Nsb3cnLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NhdmVfYWxsX2Vycm9yJzpcclxuXHRcdFx0XHQvLyBcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
