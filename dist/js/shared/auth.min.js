var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e){e.length>0&&o(e)}).fail(function(o,l,t){e(o,l,t)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(){var o=$(this)[0],e=$(this).val(),l=$(this).closest("form"),t=!1,n=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:l}=utils.validate_email(e);l?o.setCustomValidity(""):o.setCustomValidity("Please check that the email is correct.")}if("password"===$(this).attr("type")){let{valid_pw:t,valid_pw_length:n,valid_pw_length_msg:a,valid_ltrCases:s,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:d}=utils.validate_pw(e);t&&o.setCustomValidity("");let c="";n?$(l).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),c+=a),s?$(l).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),c+=i),r?$(l).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),c+=d),o.setCustomValidity(c)}o.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(o.validationMessage)),""!==$.trim(l.find("input[type=email]").val())&&""!==$.trim(l.find("input[type=password]").val())&&(t=!0),l.find("input[type=email]").is(":valid")&&l.find("input[type=password]").is(":valid")&&(n=!0),t&&n?(!0,$("#auth_login_do").prop("disabled",!1)):(!1,$("#auth_login_do").prop("disabled",!0))})},login_btn_init:()=>{$(".auth-loginout, #log_in_prompt").click(()=>{auth.show_login_modal("toggle")})},login_modal_init:()=>{auth.login_btn_init(),auth.show_login_modal()},show_login_modal:()=>{function o(){$("#auth_login_actions_msgs").empty(),$("#auth_login_do").prop("disabled",!0),$("#auth_login input").prop("disabled",!0),$("#auth_login_modal .modal-body").prepend('<div class="overlay overlay-enlighten" aria-hidden="true"></div>'),$("#auth_login_modal .overlay").prepend('<span class="spinner spinner-border spinner-border-md" role="status" aria-hidden="true"></span>'),auth.login_do()}$.get("components/_auth_login.html",function(e){$("body").append(e),$("#auth_login_modal").on("show.bs.modal",function(){auth.input_validation(),setTimeout(function(){$(".auth_form input").trigger("change")},500),$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(e){console.log(13===e.which),console.log(!$("#auth_login_do").prop("disabled")),13!==e.which||$("#auth_login_do").prop("disabled")||(console.log("enter"),o())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(e){o()})}),$("#auth_login_modal").on("shown.bs.modal",function(){""===$.trim($("#auth_login").find("input[type=email]").val())&&""===$.trim($("#auth_login").find("input[type=password]").val())&&$("#auth_login_email").focus()}),$("#auth_login_modal").on("hidden.bs.modal",function(){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(l),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var l={auth_task:e};$.each($("#"+o+" input"),function(o,e){var t=$(e).attr("data-authfld"),n=$(e).val();l[t]=n}),console.log(l);var t=JSON.stringify(l);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(){window.location.reload(!0)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;t=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,l){var t=$(l).attr("id"),n=$(l).val();o[t]=n}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("jqXhr: "),console.log(l)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_do:()=>{var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,l){var t=$(l).attr("data-authfld"),n=$(l).val();o[t]=n});var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o){console.log("success event"),auth.login_success(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t),$("#auth_login_actions_msgs").prepend('<span class="msg_loginStatus msg-warning">Please check that the login info is correct</span>'),$("#auth_login_actions_msgs").show(),$("#auth_login_do").prop("disabled",!1),$("#auth_login input").prop("disabled",!1),$("#auth_login_modal .modal-body .overlay").remove()},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}},logout_init:()=>{$(".auth-loginout").text("Log out"),$(".auth-loginout").removeClass("disabled"),$(".auth-loginout").removeAttr("tabindex"),$(".auth-loginout").removeAttr("aria-disabled"),$(".auth-loginout").click(function(){auth.logout_do()})},logout_do:()=>{$.ajax({url:"/.netlify/functions/at_auth?auth_task=logout",type:"GET",success:function(o){auth.logout_success()},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},logout_success:()=>{location.reload()}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJsZW5ndGgiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJmbGRfZWwiLCJ0aGlzIiwiZmxkX3ZhbCIsInZhbCIsImZsZF9wYXJlbnRGb3JtIiwiY2xvc2VzdCIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJhdHRyIiwidmFsaWRfZW1sIiwidXRpbHMiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkX3B3IiwidmFsaWRfcHdfbGVuZ3RoIiwidmFsaWRfcHdfbGVuZ3RoX21zZyIsInZhbGlkX2x0ckNhc2VzIiwidmFsaWRfbHRyQ2FzZXNfbXNnIiwidmFsaWRfcHdfc3BjQ2hhciIsInZhbGlkX3B3X3NwY0NoYXJfbXNnIiwidmFsaWRhdGVfcHciLCJjdXN0b21WYWxpZGF0aW9uTXNnIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGVja1ZhbGlkaXR5IiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRpb25NZXNzYWdlIiwidHJpbSIsImlzIiwicHJvcCIsImxvZ2luX2J0bl9pbml0IiwiY2xpY2siLCJzaG93X2xvZ2luX21vZGFsIiwibG9naW5fbW9kYWxfaW5pdCIsImxvZ2luX21vZGFsX2dvIiwiZW1wdHkiLCJwcmVwZW5kIiwibG9naW5fZG8iLCJnZXQiLCJ0aGVHb3R0ZW4iLCJhcHBlbmQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsIm9mZiIsImtleXByZXNzIiwiZSIsIndoaWNoIiwiZm9jdXMiLCJtb2RhbCIsInJlbW92ZSIsImJhY2tkcm9wIiwiYXV0aF9kbyIsImZvcm1faXMiLCJhdXRoX3Rhc2siLCJyZXFfb2JqIiwiZWFjaCIsImlkeCIsIml0bSIsImZsZE5hbWUiLCJmbGRWYWwiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJjb250ZW50VHlwZSIsImRhdGEiLCJzdWNjZXNzIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwiZXJyX3N0YXR1c0NvZGUiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInB3X3NldF9kbyIsInRhc2siLCJqcVhociIsImxvZ2luX3N1Y2Nlc3MiLCJzaG93Iiwic2F2ZUJ0bnMiLCJsb2dvdXRfaW5pdCIsInRleHQiLCJyZW1vdmVBdHRyIiwibG9nb3V0X2RvIiwibG9nb3V0X3N1Y2Nlc3MiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEtBQTJCLGlCQUFYLEtBQXdCQSxLQUFPLEdBQ2xEQSxLQUFPLENBQ1BDLFdBQWEsSUFDTCxJQUFJQyxRQUFTLENBQUNDLEVBQVNDLEtBQzVCQyxFQUFFQyxLQUFLLENBQ1BDLElBQUssOEJBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFVQyxHQUNkQSxFQUFLQyxPQUFTLEdBQ2pCUixFQUFRTyxLQUVQRSxLQUFNLFNBQVdDLEVBQU9DLEVBQVlDLEdBQ3RDWCxFQUFPUyxFQUFPQyxFQUFZQyxPQUs3QkMsaUJBQW1CLEtBQ2xCWCxFQUFFLFFBQVFZLEdBQUcsZUFBZ0IsbUJBQW9CLFdBQ2hELElBQUlDLEVBQVNiLEVBQUVjLE1BQU0sR0FDakJDLEVBQVVmLEVBQUVjLE1BQU1FLE1BQ2xCQyxFQUFpQmpCLEVBQUVjLE1BQU1JLFFBQVEsUUFHakNDLEdBQWtDLEVBQ2xDQyxHQUErQixFQUtuQyxHQUZBUCxFQUFPUSxrQkFBa0IsSUFFSyxVQUF6QnJCLEVBQUVjLE1BQU1RLEtBQUssUUFBc0IsQ0FDdkMsSUFBSUMsVUFBRUEsR0FBY0MsTUFBTUMsZUFBZVYsR0FFcENRLEVBQ0pWLEVBQU9RLGtC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RSxXQUFXTSxPQUNqQjZFLFNBQVNDLGFBQ0gsQ0FDTixJQUFJWSxFQUFXaEcsRUFBRSxrQkFDakJBLEVBQUVzRSxLQUFLMEIsRUFBVSxXQUNYaEcsRUFBRWMsTUFBTTZCLEdBQUcsYUFDZjNDLEVBQUVjLE1BQU04QixLQUFLLFlBQVksS0FJM0I1QyxFQUFFLHFCQUFxQitELE1BQU0sVUFJL0JrQyxZQUFjLEtBQ2JqRyxFQUFFLGtCQUFrQmtHLEtBQUssV0FDekJsRyxFQUFFLGtCQUFrQm9DLFlBQVksWUFDaENwQyxFQUFFLGtCQUFrQm1HLFdBQVcsWUFDL0JuRyxFQUFFLGtCQUFrQm1HLFdBQVcsaUJBQy9CbkcsRUFBRSxrQkFBa0I4QyxNQUFPLFdBQzFCbkQsS0FBS3lHLGVBSVBBLFVBQVksS0FDWHBHLEVBQUVDLEtBQUssQ0FDTkMsSUFBSywrQ0FDTDRFLEtBQU0sTUFDTkcsUUFBUyxTQUFVNUUsR0FDbEJWLEtBQUswRyxrQkFFTmhCLE1BQU8sU0FBVTdFLEVBQU9DLEVBQVlDLEdBYW5DLElBQUk0RSxFQUdKLEdBZEEvQyxRQUFRQyxJQUFJLGVBRVpELFFBQVFDLElBQUksV0FDWkQsUUFBUUMsSUFBSWhDLEdBRVorQixRQUFRQyxJQUFJLGdCQUNaRCxRQUFRQyxJQUFJL0IsR0FFWjhCLFFBQVFDLElBQUksaUJBQ1pELFFBQVFDLElBQUk5QixRQUtzQixJQUF2QkYsRUFBTStFLGFBQThCLENBSzlDRCxFQUpxQjlFLEVBQU0rRSxhQUF5QixXQUl4QixLQUhiL0UsRUFBTStFLGFBQW9CLE1BR1MsS0FGcEMvRSxFQUFNK0UsYUFBc0IsYUFJMUNELEVBQVc5RSxFQUFNaUYsYUFHbEJsRCxRQUFROEMsTUFBTSxXQUFhQyxJQUk1QkksU0FBVSxXQUVUbkQsUUFBUUMsSUFBSSxzQkFNZjZELGVBQWlCLEtBQ2hCbEIsU0FBU0MiLCJmaWxlIjoianMvc2hhcmVkL2F1dGgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIGF1dGguanMgKi9cbnZhciBhdXRoID0gKCB0eXBlb2YgKGF1dGgpID09PSAnb2JqZWN0JyApID8gYXV0aCA6IHt9O1xuKGF1dGggPSB7XG5cdHNlc2hfY2hlY2sgOiAoKSA9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcblx0XHRcdH0pLmRvbmUoIGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRcdGlmIChyZXNwLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3ApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KS5mYWlsKCBmdW5jdGlvbiAoIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcblx0XHRcdFx0cmVqZWN0KGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XG5cdFx0XHR9KTtcblx0XHR9KVxuXHR9XG5cdCxcblx0aW5wdXRfdmFsaWRhdGlvbiA6ICgpID0+IHtcblx0XHQkKCdib2R5Jykub24oJ2lucHV0IGNoYW5nZScsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XG5cdFx0XHR2YXIgZmxkX3ZhbCA9ICQodGhpcykudmFsKCk7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcblx0XHRcdC8vIHZhciBmbGRfcGFyZW50Rm9ybV9pZCA9IGZsZF9wYXJlbnRGb3JtLmF0dHIoJ2lkJyk7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gZmFsc2U7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xuXG5cdFx0XHQvKiogRG8gc29tZSB2YWxpZGF0aW9uICovXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAnZW1haWwnICkge1xuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xuXG5cdFx0XHRcdGlmICggdmFsaWRfZW1sICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdQbGVhc2UgY2hlY2sgdGhhdCB0aGUgZW1haWwgaXMgY29ycmVjdC4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnICkge1xuXHRcdFx0XHRsZXQgeyBcblx0XHRcdFx0XHR2YWxpZF9wdywgXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoLCBcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGhfbXNnLCBcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlcywgXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXNfbXNnLCBcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyLCBcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyX21zZyBcblx0XHRcdFx0fSA9IHV0aWxzLnZhbGlkYXRlX3B3KGZsZF92YWwpO1xuXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCd2YWxpZF9wdzogJyk7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHZhbGlkX3B3KTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmICggdmFsaWRfcHcgKSB7XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBjdXN0b21WYWxpZGF0aW9uTXNnID0gJyc7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19sZW5ndGggKSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfcHdfbGVuZ3RoX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX21pbkxlbmd0aCcpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICF2YWxpZF9sdHJDYXNlcyApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfbHRyQ2FzZXNfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXMnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfc3BjQ2hhciApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19zcGNDaGFyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KGN1c3RvbVZhbGlkYXRpb25Nc2cpO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1ZhbGlkaXR5U3RhdGUgKi9cblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwudmFsaWRpdHk6ICcpO1xuXHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLnZhbGlkaXR5KTsgKi9cblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwuY2hlY2tWYWxpZGl0eSgpOiAnKTtcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC5jaGVja1ZhbGlkaXR5KCkpOyAqL1xuXG5cdFx0XHQvKiogVGhpcyBkZWxpdmVycyB0aGUgY3VzdG9tIHZhbGlkYXRpb24gbWVzc2FnZXMgKi9cblx0XHRcdHZhciBmbGRfaXNWYWxpZCA9IGZsZF9lbC5jaGVja1ZhbGlkaXR5KCk7XG5cblx0XHRcdGlmICghZmxkX2lzVmFsaWQpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdGbGQgaW52YWxpZC4gZmxkX2VsLnZhbGlkYXRpb25NZXNzYWdlOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLnZhbGlkYXRpb25NZXNzYWdlKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApICE9PSAnJyAmJiAkLnRyaW0oIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykudmFsKCkgKSAhPT0gJycgKSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykuaXMoJzp2YWxpZCcpICYmIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykuaXMoJzp2YWxpZCcpICkge1xuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgJiYgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCkge1xuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IHRydWU7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dpbl9idG5faW5pdCA6ICgpID0+IHtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCwgI2xvZ19pbl9wcm9tcHQnKS5jbGljayggKCkgPT4ge1x0XG5cdFx0XHRhdXRoLnNob3dfbG9naW5fbW9kYWwoJ3RvZ2dsZScpO1xuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9naW5fbW9kYWxfaW5pdCA6ICgpID0+IHtcblx0XHRhdXRoLmxvZ2luX2J0bl9pbml0KCk7XG5cblx0XHRhdXRoLnNob3dfbG9naW5fbW9kYWwoKTtcblx0fVxuXHQsXG5cdHNob3dfbG9naW5fbW9kYWwgOiAoKSA9PiB7XG5cdFx0ZnVuY3Rpb24gbG9naW5fbW9kYWxfZ28gKCkge1xuXHRcdFx0JCgnI2F1dGhfbG9naW5fYWN0aW9uc19tc2dzJykuZW1wdHkoKTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCAubW9kYWwtYm9keScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJvdmVybGF5IG92ZXJsYXktZW5saWdodGVuXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9kaXY+Jyk7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCAub3ZlcmxheScpLnByZXBlbmQoJzxzcGFuIGNsYXNzPVwic3Bpbm5lciBzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1tZFwiIHJvbGU9XCJzdGF0dXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+Jyk7XG5cblx0XHRcdGF1dGgubG9naW5fZG8oKTtcblx0XHR9XG5cblx0XHQkLmdldCgnY29tcG9uZW50cy9fYXV0aF9sb2dpbi5odG1sJywgZnVuY3Rpb24gKHRoZUdvdHRlbikge1xuXHRcdFx0JCgnYm9keScpLmFwcGVuZCh0aGVHb3R0ZW4pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRhdXRoLmlucHV0X3ZhbGlkYXRpb24oKTtcblxuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JCgnLmF1dGhfZm9ybSBpbnB1dCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5vZmYoJ2tleXByZXNzJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykua2V5cHJlc3MoIGZ1bmN0aW9uIChlKSB7XG5cblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhlLndoaWNoID09PSAxMyAmJiAhJCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcpICk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZS53aGljaCA9PT0gMTMpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCEkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJykpO1xuXG5cdFx0XHRcdFx0aWYgKGUud2hpY2ggPT09IDEzICYmICEkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJykgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlbnRlcicpO1xuXG5cdFx0XHRcdFx0XHRsb2dpbl9tb2RhbF9nbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5vZmYoJ2NsaWNrJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRsb2dpbl9tb2RhbF9nbygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApID09PSAnJyAmJiAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApID09PSAnJyApIHtcblx0XHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9lbWFpbCcpLmZvY3VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ2Rpc3Bvc2UnKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5yZW1vdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKHtcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnXG5cdFx0XHR9KTtcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ3Nob3cnKTtcblx0XHR9KTtcblx0fVxuXHQsXG5cdGF1dGhfZG8gOiAoZm9ybV9pcykgPT4ge1xuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIGF1dGhfdGFzaztcblxuXHRcdHN3aXRjaCAoZm9ybV9pcykge1xuXHRcdFx0Y2FzZSAnYXV0aF9wd19zZXQnOlxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9wd19zZXQnO1xuXHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhdXRoX2xvZ2luJzpcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfbG9naW4nO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHZhciByZXFfb2JqID0ge1xuXHRcdFx0J2F1dGhfdGFzayc6IGF1dGhfdGFza1xuXHRcdH07XG5cblx0XHQkLmVhY2goICQoJyMnICsgZm9ybV9pcyArICcgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XG5cblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XG5cdFx0fSk7XG5cblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XG5cblx0XHRcdFx0XHRpZiAoZXJyX3N0YXR1c0NvZGUgPT09IDQwMSkge1xuXHRcdFx0XHRcdFx0LyoqIFRoZSB1c2VyIGVudGVyZWQgaW52YWxpZCBjcmVkZW50aWFscyAqL1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnQ29tbXVuaWNhdGUgdGhlIHNwZWNpZmljIGF1dGhlbnRpY2F0aW9uIHByb2JsZW0gdG8gdXNlcicpXG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0cHdfc2V0X2RvIDogKCkgPT4ge1xuXHRcdHZhciByZXFfb2JqID0ge1xuXHRcdFx0J3Rhc2snOiAncHdfc2V0J1xuXHRcdH07XG5cblx0XHQkLmVhY2goICQoJyNhdXRoX3B3X3NldCBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2lkJyk7XG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG0pLnZhbCgpO1xuXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xuXHRcdH0pO1xuXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHR0eXBlOiAnUE9TVCcsXG5cdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0ZGF0YTogcmVxX3N0cixcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3Jlc3A6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhocjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWGhyKTtcblxuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9naW5fZG8gOiAoKSA9PiB7XG5cdFx0dmFyIHJlcV9vYmogPSB7XG5cdFx0XHQnYXV0aF90YXNrJzogJ2F1dGhfbG9naW4nXG5cdFx0fTtcblxuXHRcdCQuZWFjaCggJCgnI2F1dGhfbG9naW4gaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XG5cblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XG5cdFx0fSk7XG5cblx0XHQvLyBjb25zb2xlLmxvZygncmVxX29iajogJyk7XG5cdFx0Ly8gY29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHR0eXBlOiAnUE9TVCcsXG5cdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0ZGF0YTogcmVxX3N0cixcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcblxuXHRcdFx0XHRhdXRoLmxvZ2luX3N1Y2Nlc3MocmVzcCk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXHRcdFx0XHR2YXIgZXJyX2Rpc3BfbXNnO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGVycl9kaXNwX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xuXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2Rpc3BfbXNnICsgJ1xcbicgKyBlcnJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cIm1zZ19sb2dpblN0YXR1cyBtc2ctd2FybmluZ1wiPlBsZWFzZSBjaGVjayB0aGF0IHRoZSBsb2dpbiBpbmZvIGlzIGNvcnJlY3Q8L3NwYW4+Jyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLnNob3coKTtcblxuXHRcdFx0XHQvKiogUmVzZXQgdGhlIG1vZGFsIHN0YXRlICovXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCAubW9kYWwtYm9keSAub3ZlcmxheScpLnJlbW92ZSgpO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9naW5fc3VjY2VzcyA6ICgpID0+IHtcblx0XHQvKiogV2hlbiB0aGVyZSdzIG5vIHJlY2VudGx5IGVkaXRlZCBmaWVsZHMgcHJlc2VudCwgcmVmcmVzaCBwYWdlICovXG5cdFx0aWYgKCAkKCcudmFsQ2hnJykubGVuZ3RoID09PSAwICkge1xuXHRcdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBzYXZlQnRucyA9ICQoJy5zYXZlOmRpc2FibGVkJyk7XG5cdFx0XHQkLmVhY2goc2F2ZUJ0bnMsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmlzKCc6dmlzaWJsZScpICkge1xuXHRcdFx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSlcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcblx0XHR9XG5cdH1cblx0LFxuXHRsb2dvdXRfaW5pdCA6ICgpID0+IHtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCcpLnRleHQoJ0xvZyBvdXQnKTtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0JykucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCcpLnJlbW92ZUF0dHIoJ2FyaWEtZGlzYWJsZWQnKTtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCcpLmNsaWNrKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRhdXRoLmxvZ291dF9kbygpO1xuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9nb3V0X2RvIDogKCkgPT4ge1xuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGg/YXV0aF90YXNrPWxvZ291dCcsXG5cdFx0XHR0eXBlOiAnR0VUJyxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRcdGF1dGgubG9nb3V0X3N1Y2Nlc3MoKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cdFx0XHRcdHZhciBlcnJfZGlzcF9tc2c7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0ZXJyX2Rpc3BfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfZGlzcF9tc2cgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXG5cdFx0XHRcdC8vICQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19sb2dpblN0YXR1cyBtc2ctd2FybmluZ1wiPlBsZWFzZSBjaGVjayB0aGF0IHRoZSBsb2dpbiBpbmZvIGlzIGNvcnJlY3Q8L3NtYWxsPicpO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9nb3V0X3N1Y2Nlc3MgOiAoKSA9PiB7XG5cdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdH1cbn0pO1xuIl19
