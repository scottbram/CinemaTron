var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(e=>{e.length>0&&o(e)}).fail((o,t,l)=>{e(o,t,l)})}),input_validation:()=>{$("body").on("input",".auth_form input",function(){var o=$(this)[0],e=$(this).val(),t=$(this).closest("form"),l=t.attr("id"),a=!1,s=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:t}=utils.validate_email(e);t?o.setCustomValidity(""):o.setCustomValidity("Please check that the email is correct.")}if("password"===$(this).attr("type")){let{valid_pw:l,valid_pw_length:a,valid_pw_length_msg:s,valid_ltrCases_upper:n,valid_ltrCases_upper_msg:i,valid_ltrCases_lower:r,valid_ltrCases_lower_msg:d,valid_number:u,valid_number_msg:c,valid_pw_spcChar:p,valid_pw_spcChar_msg:_}=utils.validate_pw(e);l&&o.setCustomValidity("");let h="";a?$(t).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),h+=s),n?$(t).find(".validHelp_ltrCases_upper").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_ltrCases_upper").removeClass("valid").addClass("invalid"),h+=i),r?$(t).find(".validHelp_ltrCases_lower").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_ltrCases_lower").removeClass("valid").addClass("invalid"),h+=d),u?$(t).find(".validHelp_number").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_number").removeClass("valid").addClass("invalid"),h+=c),p?$(t).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),h+=_),o.setCustomValidity(h),""===h?($("#auth_pw_set_pw_retype").prop("disabled",!1),$("#auth_pw_set_pw_retype").attr("placeholder","")):($("#auth_pw_set_pw_retype").prop("disabled",!0),$("#auth_pw_set_pw_retype").attr("placeholder","Minimum password requirements unmet"))}if("auth_pw_set_pw_retype"===$(this).attr("id")){if($("#auth_pw_set_pw").val()!==$(this).val()){let e="Doesn't match new password!";$(this).attr("title","Doesn't match new password!"),$(this).attr("data-toggle","tooltip"),$(this).attr("data-placement","top"),$(this).tooltip("show"),o.setCustomValidity(e)}else o.setCustomValidity(""),$(this).attr("title",""),$(this).tooltip("hide")}o.checkValidity();""!==$.trim(t.find("input[type=email]").val())&&""!==$.trim(t.find("input[type=password]").val())&&(a=!0);let n=document.getElementById(l).getElementsByTagName("input");(n=[...n]).forEach(o=>{let e=o.getAttribute("type");if("email"===e||"password"===e){if(!o.checkValidity())return;s=!0}}),a&&s?(!0,$("#auth_login_do").prop("disabled",!1)):(!1,$("#auth_login_do").prop("disabled",!0))})},login_btn_init:()=>{$(".auth-loginout, #log_in_prompt").click(()=>{auth.show_login_modal("toggle")})},login_modal_init:()=>{auth.login_btn_init(),auth.show_login_modal()},show_login_modal:()=>{function o(){$("#auth_login_actions_msgs").empty(),$("#auth_login_do").prop("disabled",!0),$("#auth_login input").prop("disabled",!0),$("#auth_login_modal .modal-body").prepend('<div class="overlay overlay-enlighten" aria-hidden="true"></div>'),$("#auth_login_modal .overlay").prepend('<span class="spinner spinner-border spinner-border-md" role="status" aria-hidden="true"></span>'),auth.login_do()}$.get("components/_auth_login.html",function(e){$("body").append(e),$("#auth_login_modal").on("show.bs.modal",function(){auth.input_validation(),setTimeout(function(){$(".auth_form input").trigger("input")},500),$("#auth_login input").off("keyup"),$("#auth_login input").keyup(function(e){var t=!0;let l=document.getElementById("auth_login").getElementsByTagName("input");(l=[...l]).forEach(o=>{o.checkValidity()||(t=!1)}),console.log(`e.which === 13: ${13===e.which}`),console.log(`allFldsValid: ${t}`),13===e.which&&t&&(console.log("enter"),o())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(){o()})}),$("#auth_login_modal").on("shown.bs.modal",function(){""===$.trim($("#auth_login").find("input[type=email]").val())&&""===$.trim($("#auth_login").find("input[type=password]").val())&&$("#auth_login_email").focus()}),$("#auth_login_modal").on("hidden.bs.modal",function(){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(t),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var t={auth_task:e};$.each($("#"+o+" input"),function(o,e){var l=$(e).attr("data-authfld"),a=$(e).val();t[l]=a}),console.log(t);var l=JSON.stringify(t);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:l,success:function(){window.location.reload(!0)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;l=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,t){var l=$(t).attr("id"),a=$(t).val();o[l]=a}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,t){console.log("success event"),console.log("resp: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("jqXhr: "),console.log(t)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},login_do:()=>{var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,t){var l=$(t).attr("data-authfld"),a=$(t).val();o[l]=a});var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o){console.log("success event"),auth.login_success(o)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l),$("#auth_login_actions_msgs").prepend('<span class="msg_loginStatus msg-warning">Please check that the login info is correct</span>'),$("#auth_login_actions_msgs").show(),$("#auth_login_do").prop("disabled",!1),$("#auth_login input").prop("disabled",!1),$("#auth_login_modal .modal-body .overlay").remove()},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}},logout_init:()=>{$(".auth-loginout").text("Log out"),$(".auth-loginout").removeClass("disabled"),$(".auth-loginout").removeAttr("tabindex"),$(".auth-loginout").removeAttr("aria-disabled"),$(".auth-loginout").click(function(){auth.logout_do()})},logout_do:()=>{$.ajax({url:"/.netlify/functions/at_auth?auth_task=logout",type:"GET",success:function(o){auth.logout_success()},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},logout_success:()=>{location.reload()}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJsZW5ndGgiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJmbGRfZWwiLCJ0aGlzIiwiZmxkX3ZhbCIsInZhbCIsImZsZF9wYXJlbnRGb3JtIiwiY2xvc2VzdCIsImZsZF9wYXJlbnRGb3JtX2lkIiwiYXR0ciIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJ2YWxpZF9lbWwiLCJ1dGlscyIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRfcHciLCJ2YWxpZF9wd19sZW5ndGgiLCJ2YWxpZF9wd19sZW5ndGhfbXNnIiwidmFsaWRfbHRyQ2FzZXNfdXBwZXIiLCJ2YWxpZF9sdHJDYXNlc191cHBlcl9tc2ciLCJ2YWxpZF9sdHJDYXNlc19sb3dlciIsInZhbGlkX2x0ckNhc2VzX2xvd2VyX21zZyIsInZhbGlkX251bWJlciIsInZhbGlkX251bWJlcl9tc2ciLCJ2YWxpZF9wd19zcGNDaGFyIiwidmFsaWRfcHdfc3BjQ2hhcl9tc2ciLCJ2YWxpZGF0ZV9wdyIsImN1c3RvbVZhbGlkYXRpb25Nc2ciLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInByb3AiLCJ0b29sdGlwIiwiY2hlY2tWYWxpZGl0eSIsInRyaW0iLCJhdXRoX2lucHV0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZvckVhY2giLCJpdG0iLCJmbGRfdHlwZSIsImdldEF0dHJpYnV0ZSIsImxvZ2luX2J0bl9pbml0IiwiY2xpY2siLCJzaG93X2xvZ2luX21vZGFsIiwibG9naW5fbW9kYWxfaW5pdCIsImxvZ2luX21vZGFsX2dvIiwiZW1wdHkiLCJwcmVwZW5kIiwibG9naW5fZG8iLCJnZXQiLCJ0aGVHb3R0ZW4iLCJhcHBlbmQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsIm9mZiIsImtleXVwIiwiZSIsImFsbEZsZHNWYWxpZCIsImNvbnNvbGUiLCJsb2ciLCJ3aGljaCIsImZvY3VzIiwibW9kYWwiLCJyZW1vdmUiLCJiYWNrZHJvcCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsImVycl9zdGF0dXNDb2RlIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJwd19zZXRfZG8iLCJ0YXNrIiwianFYaHIiLCJsb2dpbl9zdWNjZXNzIiwic2hvdyIsInNhdmVCdG5zIiwiaXMiLCJsb2dvdXRfaW5pdCIsInRleHQiLCJyZW1vdmVBdHRyIiwibG9nb3V0X2RvIiwibG9nb3V0X3N1Y2Nlc3MiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEtBQTJCLGlCQUFYLEtBQXdCQSxLQUFPLEdBQ2xEQSxLQUFPLENBQ1BDLFdBQWEsSUFDTCxJQUFJQyxRQUFTLENBQUNDLEVBQVNDLEtBQzdCQyxFQUFFQyxLQUFLLENBQ05DLElBQUssOEJBQ0xDLFNBQVUsU0FFVkMsS0FBT0MsSUFDSEEsRUFBS0MsT0FBUyxHQUNqQlIsRUFBUU8sS0FHVEUsS0FBTSxDQUFFQyxFQUFPQyxFQUFZQyxLQUMzQlgsRUFBT1MsRUFBT0MsRUFBWUMsT0FLN0JDLGlCQUFtQixLQUNsQlgsRUFBRSxRQUFRWSxHQUFHLFFBQVMsbUJBQW9CLFdBSXpDLElBQUlDLEVBQVNi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RixFQUFNMkYsYUFBb0IsTUFHUyxLQUZwQzNGLEVBQU0yRixhQUFzQixhQUkxQ0QsRUFBVzFGLEVBQU02RixhQUdsQjdCLFFBQVF5QixNQUFNLFdBQWFDLElBSTVCSSxTQUFVLFdBRVQ5QixRQUFRQyxJQUFJLHNCQU1meUMsZUFBaUIsS0FDaEJuQixTQUFTQyIsImZpbGUiOiJqcy9zaGFyZWQvYXV0aC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogYXV0aC5qcyAqL1xudmFyIGF1dGggPSAoIHR5cGVvZiAoYXV0aCkgPT09ICdvYmplY3QnICkgPyBhdXRoIDoge307XG4oYXV0aCA9IHtcblx0c2VzaF9jaGVjayA6ICgpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcblx0XHRcdH0pXG5cdFx0XHQuZG9uZSggKHJlc3ApID0+IHtcblx0XHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzcCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuZmFpbCggKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSA9PiB7XG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuXHRcdFx0fSk7XG5cdFx0fSlcblx0fVxuXHQsXG5cdGlucHV0X3ZhbGlkYXRpb24gOiAoKSA9PiB7XG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCcsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvLyBjb25zb2xlLmxvZygnaW5wdXRfdmFsaWRhdGlvbigpIC5hdXRoX2Zvcm0gaW5wdXQ6IGlucHV0IG9yIGNoZycpO1xuXG5cdFx0XHR2YXIgZmxkX2VsID0gJCh0aGlzKVswXTtcblx0XHRcdHZhciBmbGRfdmFsID0gJCh0aGlzKS52YWwoKTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2lkID0gZmxkX3BhcmVudEZvcm0uYXR0cignaWQnKTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV92YWxpZDtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gZmFsc2U7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xuXG5cdFx0XHQvKiogRG8gc29tZSB2YWxpZGF0aW9uICovXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAnZW1haWwnICkge1xuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xuXG5cdFx0XHRcdGlmICggdmFsaWRfZW1sICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdQbGVhc2UgY2hlY2sgdGhhdCB0aGUgZW1haWwgaXMgY29ycmVjdC4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnICkge1xuXHRcdFx0XHRsZXQgeyBcblx0XHRcdFx0XHR2YWxpZF9wdywgXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoLFxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aF9tc2csXG5cdFx0XHRcdFx0Ly8gdmFsaWRfbHRyQ2FzZXMsXG5cdFx0XHRcdFx0Ly8gdmFsaWRfbHRyQ2FzZXNfbXNnLFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzX3VwcGVyLFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzX3VwcGVyX21zZyxcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlc19sb3dlcixcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlc19sb3dlcl9tc2csXG5cdFx0XHRcdFx0dmFsaWRfbnVtYmVyLFxuXHRcdFx0XHRcdHZhbGlkX251bWJlcl9tc2csXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhcixcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyX21zZ1xuXHRcdFx0XHR9ID0gdXRpbHMudmFsaWRhdGVfcHcoZmxkX3ZhbCk7XG5cblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ3ZhbGlkX3B3OiAnKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2codmFsaWRfcHcpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCB2YWxpZF9wdyApIHtcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGN1c3RvbVZhbGlkYXRpb25Nc2cgPSAnJztcblx0XHRcdFx0XG5cdFx0XHRcdGlmICggIXZhbGlkX3B3X2xlbmd0aCApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX21pbkxlbmd0aCcpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19sZW5ndGhfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qIGlmICggIXZhbGlkX2x0ckNhc2VzICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXMnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9sdHJDYXNlc19tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH0gKi9cblxuXHRcdFx0XHRpZiAoICF2YWxpZF9sdHJDYXNlc191cHBlciApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzX3VwcGVyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfbHRyQ2FzZXNfdXBwZXJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXNfdXBwZXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhdmFsaWRfbHRyQ2FzZXNfbG93ZXIgKSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlc19sb3dlcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX2x0ckNhc2VzX2xvd2VyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzX2xvd2VyJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggIXZhbGlkX251bWJlciApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX251bWJlcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX251bWJlcl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9udW1iZXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfc3BjQ2hhciApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19zcGNDaGFyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KGN1c3RvbVZhbGlkYXRpb25Nc2cpO1xuXG5cdFx0XHRcdGlmIChjdXN0b21WYWxpZGF0aW9uTXNnID09PSAnJykge1xuXHRcdFx0XHRcdCQoJyNhdXRoX3B3X3NldF9wd19yZXR5cGUnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0XHQkKCcjYXV0aF9wd19zZXRfcHdfcmV0eXBlJykuYXR0cigncGxhY2Vob2xkZXInLCAnJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X3B3X3JldHlwZScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X3B3X3JldHlwZScpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ01pbmltdW0gcGFzc3dvcmQgcmVxdWlyZW1lbnRzIHVubWV0Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCAkKHRoaXMpLmF0dHIoJ2lkJykgPT09ICdhdXRoX3B3X3NldF9wd19yZXR5cGUnICkge1xuXHRcdFx0XHRsZXQgbmV3UHcgPSAkKCcjYXV0aF9wd19zZXRfcHcnKS52YWwoKTtcblx0XHRcdFx0bGV0IG5ld1B3X3JldHlwZSA9ICQodGhpcykudmFsKCk7XG5cblx0XHRcdFx0aWYgKG5ld1B3ICE9PSBuZXdQd19yZXR5cGUpIHtcblx0XHRcdFx0XHRsZXQgY3VzdG9tVmFsaWRhdGlvbk1zZyA9ICdEb2VzblxcJ3QgbWF0Y2ggbmV3IHBhc3N3b3JkISc7XG5cblx0XHRcdFx0XHQkKHRoaXMpLmF0dHIoJ3RpdGxlJywgJ0RvZXNuXFwndCBtYXRjaCBuZXcgcGFzc3dvcmQhJyk7XG5cdFx0XHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLXRvZ2dsZScsICd0b29sdGlwJyk7XG5cdFx0XHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLXBsYWNlbWVudCcsICd0b3AnKTtcblxuXHRcdFx0XHRcdCQodGhpcykudG9vbHRpcCgnc2hvdycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGF0aW9uTXNnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQodGhpcykuYXR0cigndGl0bGUnLCAnJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JCh0aGlzKS50b29sdGlwKCdoaWRlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLnZhbGlkaXR5OiAnKTtcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7ICovXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTogJyk7XG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwuY2hlY2tWYWxpZGl0eSgpKTsgKi9cblxuXHRcdFx0LyoqIFRoaXMgZGVsaXZlcnMgdGhlIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2VzICovXG5cdFx0XHR2YXIgZmxkX2lzVmFsaWQgPSBmbGRfZWwuY2hlY2tWYWxpZGl0eSgpO1xuXG5cdFx0XHQvKiBpZiAoIWZsZF9pc1ZhbGlkKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnRmxkIGludmFsaWQuIGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZTogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XG5cblx0XHRcdH0gKi9cblxuXHRcdFx0aWYgKCAkLnRyaW0oIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykudmFsKCkgKSAhPT0gJycgJiYgJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgIT09ICcnICkge1xuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0LyogaWYgKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLmlzKCc6dmFsaWQnKSAmJiBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLmlzKCc6dmFsaWQnKSApIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XG5cdFx0XHR9ICovXG5cdFx0XHRcblx0XHRcdGxldCBhdXRoX2lucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZsZF9wYXJlbnRGb3JtX2lkKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTtcblx0XHRcdFx0YXV0aF9pbnB1dHMgPSBbLi4uYXV0aF9pbnB1dHNdO1xuXG5cdFx0XHRhdXRoX2lucHV0cy5mb3JFYWNoKCAoaXRtKSA9PiB7XG5cdFx0XHRcdGxldCBmbGRfdHlwZSA9IGl0bS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcblxuXHRcdFx0XHRpZiAoZmxkX3R5cGUgPT09ICdlbWFpbCcgfHwgZmxkX3R5cGUgPT09ICdwYXNzd29yZCcpIHtcblx0XHRcdFx0XHRsZXQgZmxkSXNWYWxpZCA9IGl0bS5jaGVja1ZhbGlkaXR5KCk7XG5cblx0XHRcdFx0XHRpZiAoIWZsZElzVmFsaWQpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmIChmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ICYmIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQpIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fdmFsaWQgPSB0cnVlO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9naW5fYnRuX2luaXQgOiAoKSA9PiB7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQsICNsb2dfaW5fcHJvbXB0JykuY2xpY2soICgpID0+IHtcdFxuXHRcdFx0YXV0aC5zaG93X2xvZ2luX21vZGFsKCd0b2dnbGUnKTtcblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX21vZGFsX2luaXQgOiAoKSA9PiB7XG5cdFx0YXV0aC5sb2dpbl9idG5faW5pdCgpO1xuXG5cdFx0YXV0aC5zaG93X2xvZ2luX21vZGFsKCk7XG5cdH1cblx0LFxuXHRzaG93X2xvZ2luX21vZGFsIDogKCkgPT4ge1xuXHRcdGZ1bmN0aW9uIGxvZ2luX21vZGFsX2dvICgpIHtcblx0XHRcdCQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLmVtcHR5KCk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdFxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwgLm1vZGFsLWJvZHknKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwib3ZlcmxheSBvdmVybGF5LWVubGlnaHRlblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvZGl2PicpO1xuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwgLm92ZXJsYXknKS5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cInNwaW5uZXIgc3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItbWRcIiByb2xlPVwic3RhdHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPicpO1xuXG5cdFx0XHRhdXRoLmxvZ2luX2RvKCk7XG5cdFx0fVxuXG5cdFx0JC5nZXQoJ2NvbXBvbmVudHMvX2F1dGhfbG9naW4uaHRtbCcsIGZ1bmN0aW9uICh0aGVHb3R0ZW4pIHtcblx0XHRcdCQoJ2JvZHknKS5hcHBlbmQodGhlR290dGVuKTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5vbignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YXV0aC5pbnB1dF92YWxpZGF0aW9uKCk7XG5cblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQoJy5hdXRoX2Zvcm0gaW5wdXQnKS50cmlnZ2VyKCdpbnB1dCcpO1xuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5vZmYoJ2tleXVwJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykua2V5dXAoIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0dmFyIGFsbEZsZHNWYWxpZCA9IHRydWU7XG5cblx0XHRcdFx0XHRsZXQgYXV0aF9pbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aF9sb2dpbicpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xuXHRcdFx0XHRcdFx0YXV0aF9pbnB1dHMgPSBbLi4uYXV0aF9pbnB1dHNdO1xuXG5cdFx0XHRcdFx0YXV0aF9pbnB1dHMuZm9yRWFjaCggKGl0bSkgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGZsZElzVmFsaWQgPSBpdG0uY2hlY2tWYWxpZGl0eSgpO1xuXG5cdFx0XHRcdFx0XHRpZiAoIWZsZElzVmFsaWQpIHtcblx0XHRcdFx0XHRcdFx0YWxsRmxkc1ZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBlLndoaWNoID09PSAxMzogJHtlLndoaWNoID09PSAxM31gKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgYWxsRmxkc1ZhbGlkOiAke2FsbEZsZHNWYWxpZH1gKTtcblxuXHRcdFx0XHRcdGlmIChlLndoaWNoID09PSAxMyAmJiBhbGxGbGRzVmFsaWQgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdlbnRlcicpO1xuXG5cdFx0XHRcdFx0XHRsb2dpbl9tb2RhbF9nbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5vZmYoJ2NsaWNrJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGxvZ2luX21vZGFsX2dvKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgPT09ICcnICYmICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgPT09ICcnICkge1xuXHRcdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2VtYWlsJykuZm9jdXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnZGlzcG9zZScpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLnJlbW92ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoe1xuXHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYydcblx0XHRcdH0pO1xuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXHRcdH0pO1xuXHR9XG5cdCxcblx0YXV0aF9kbyA6IChmb3JtX2lzKSA9PiB7XG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgYXV0aF90YXNrO1xuXG5cdFx0c3dpdGNoIChmb3JtX2lzKSB7XG5cdFx0XHRjYXNlICdhdXRoX3B3X3NldCc6XG5cdFx0XHRcdGF1dGhfdGFzayA9ICdhdXRoX3B3X3NldCc7XG5cdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2F1dGhfbG9naW4nOlxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9sb2dpbic7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0dmFyIHJlcV9vYmogPSB7XG5cdFx0XHQnYXV0aF90YXNrJzogYXV0aF90YXNrXG5cdFx0fTtcblxuXHRcdCQuZWFjaCggJCgnIycgKyBmb3JtX2lzICsgJyBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0dHlwZTogJ1BPU1QnLFxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcblxuXHRcdFx0XHRcdGlmIChlcnJfc3RhdHVzQ29kZSA9PT0gNDAxKSB7XG5cdFx0XHRcdFx0XHQvKiogVGhlIHVzZXIgZW50ZXJlZCBpbnZhbGlkIGNyZWRlbnRpYWxzICovXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdDb21tdW5pY2F0ZSB0aGUgc3BlY2lmaWMgYXV0aGVudGljYXRpb24gcHJvYmxlbSB0byB1c2VyJylcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cdFx0XHR9LFxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRwd19zZXRfZG8gOiAoKSA9PiB7XG5cdFx0dmFyIHJlcV9vYmogPSB7XG5cdFx0XHQndGFzayc6ICdwd19zZXQnXG5cdFx0fTtcblxuXHRcdCQuZWFjaCggJCgnI2F1dGhfcHdfc2V0IGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignaWQnKTtcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XG5cblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XG5cdFx0fSk7XG5cblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWGhyOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYaHIpO1xuXG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cdFx0XHR9LFxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dpbl9kbyA6ICgpID0+IHtcblx0XHR2YXIgcmVxX29iaiA9IHtcblx0XHRcdCdhdXRoX3Rhc2snOiAnYXV0aF9sb2dpbidcblx0XHR9O1xuXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKCdyZXFfb2JqOiAnKTtcblx0XHQvLyBjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xuXG5cdFx0XHRcdGF1dGgubG9naW5fc3VjY2VzcyhyZXNwKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cdFx0XHRcdHZhciBlcnJfZGlzcF9tc2c7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0ZXJyX2Rpc3BfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfZGlzcF9tc2cgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzcGFuIGNsYXNzPVwibXNnX2xvZ2luU3RhdHVzIG1zZy13YXJuaW5nXCI+UGxlYXNlIGNoZWNrIHRoYXQgdGhlIGxvZ2luIGluZm8gaXMgY29ycmVjdDwvc3Bhbj4nKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fYWN0aW9uc19tc2dzJykuc2hvdygpO1xuXG5cdFx0XHRcdC8qKiBSZXNldCB0aGUgbW9kYWwgc3RhdGUgKi9cblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsIC5tb2RhbC1ib2R5IC5vdmVybGF5JykucmVtb3ZlKCk7XG5cdFx0XHR9LFxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dpbl9zdWNjZXNzIDogKCkgPT4ge1xuXHRcdC8qKiBXaGVuIHRoZXJlJ3Mgbm8gcmVjZW50bHkgZWRpdGVkIGZpZWxkcyBwcmVzZW50LCByZWZyZXNoIHBhZ2UgKi9cblx0XHRpZiAoICQoJy52YWxDaGcnKS5sZW5ndGggPT09IDAgKSB7XG5cdFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHNhdmVCdG5zID0gJCgnLnNhdmU6ZGlzYWJsZWQnKTtcblx0XHRcdCQuZWFjaChzYXZlQnRucywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoICQodGhpcykuaXMoJzp2aXNpYmxlJykgKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXHRcdH1cblx0fVxuXHQsXG5cdGxvZ291dF9pbml0IDogKCkgPT4ge1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0JykudGV4dCgnTG9nIG91dCcpO1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQnKS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0JykucmVtb3ZlQXR0cignYXJpYS1kaXNhYmxlZCcpO1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0JykuY2xpY2soIGZ1bmN0aW9uICgpIHtcblx0XHRcdGF1dGgubG9nb3V0X2RvKCk7XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dvdXRfZG8gOiAoKSA9PiB7XG5cblx0XHQvKipcblx0XHQgKiBOZWVkIHNvbWUgYWN0aXZpdHkgaW5kaWNhdGlvbiBoZXJlXG5cdFx0ICovXG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoP2F1dGhfdGFzaz1sb2dvdXQnLFxuXHRcdFx0dHlwZTogJ0dFVCcsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuXHRcdFx0XHRhdXRoLmxvZ291dF9zdWNjZXNzKCk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXHRcdFx0XHR2YXIgZXJyX2Rpc3BfbXNnO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGVycl9kaXNwX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xuXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2Rpc3BfbXNnICsgJ1xcbicgKyBlcnJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblxuXHRcdFx0XHQvLyAkKCcjYXV0aF9sb2dpbl9hY3Rpb25zX21zZ3MnKS5wcmVwZW5kKCc8c21hbGwgY2xhc3M9XCJtc2dfbG9naW5TdGF0dXMgbXNnLXdhcm5pbmdcIj5QbGVhc2UgY2hlY2sgdGhhdCB0aGUgbG9naW4gaW5mbyBpcyBjb3JyZWN0PC9zbWFsbD4nKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ291dF9zdWNjZXNzIDogKCkgPT4ge1xuXHRcdGxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9XG59KTtcbiJdfQ==
