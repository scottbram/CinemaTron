var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e){e.length>0&&o(e)}).fail(function(o,l,n){e(o,l,n)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(){var o=$(this)[0],e=$(this).val(),l=$(this).closest("form"),n=!1,t=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:l}=utils.validate_email(e);l?o.setCustomValidity(""):o.setCustomValidity("Please check that the email is correct.")}if("password"===$(this).attr("type")){let{valid_pw:n,valid_pw_length:t,valid_pw_length_msg:s,valid_ltrCases:a,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:d}=utils.validate_pw(e);n&&o.setCustomValidity("");let c="";t?$(l).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),c+=s),a?$(l).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),c+=i),r?$(l).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),c+=d),o.setCustomValidity(c)}o.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(o.validationMessage)),""!==$.trim(l.find("input[type=email]").val())&&""!==$.trim(l.find("input[type=password]").val())&&(n=!0),l.find("input[type=email]").is(":valid")&&l.find("input[type=password]").is(":valid")&&(t=!0),n&&t?(!0,$("#auth_login_do").prop("disabled",!1)):(!1,$("#auth_login_do").prop("disabled",!0))})},show_login_modal:()=>{function o(){$("#auth_login_actions_msgs").empty(),$("#auth_login_do").prop("disabled",!0),$("#auth_login input").prop("disabled",!0),$("#auth_login_modal .modal-body").prepend('<div class="overlay overlay-enlighten" aria-hidden="true"></div>'),$("#auth_login_modal .overlay").prepend('<span class="spinner spinner-border spinner-border-md" role="status" aria-hidden="true"></span>'),auth.login_do()}$.get("components/_auth_login.html",function(e){$("body").append(e),$("#auth_login_modal").on("show.bs.modal",function(){auth.input_validation(),setTimeout(function(){$(".auth_form input").trigger("change")},500),$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(e){13!==e.which||$("#auth_login_do").prop("disabled")||o()}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(e){o()})}),$("#auth_login_modal").on("shown.bs.modal",function(){""===$.trim($("#auth_login").find("input[type=email]").val())&&""===$.trim($("#auth_login").find("input[type=password]").val())&&$("#auth_login_email").focus()}),$("#auth_login_modal").on("hidden.bs.modal",function(){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(l),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var l={auth_task:e};$.each($("#"+o+" input"),function(o,e){var n=$(e).attr("data-authfld"),t=$(e).val();l[n]=t}),console.log(l);var n=JSON.stringify(l);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:n,success:function(){window.location.reload(!0)},error:function(o,e,l){var n;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;n=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else n=o.responseText;console.error("Error:\n"+n)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,l){var n=$(l).attr("id"),t=$(l).val();o[n]=t}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("jqXhr: "),console.log(l)},error:function(o,e,l){var n;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){n=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else n=o.responseText;console.error("Error:\n"+n)},complete:function(){console.log("complete event")}})},login_do:()=>{var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,l){var n=$(l).attr("data-authfld"),t=$(l).val();o[n]=t}),console.log("req_obj: "),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o){auth.login_success(o)},error:function(o,e,l){var n;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){n=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else n=o.responseText;console.error("Error:\n"+n),$("#auth_login_actions_msgs").prepend('<small class="msg_loginStatus msg-warning">Please check that the login info is correct</small>'),$("#auth_login_do").prop("disabled",!1),$("#auth_login input").prop("disabled",!1),$("#auth_login_modal .modal-body .overlay").remove()},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}},logout_do:()=>{$.ajax({url:"/.netlify/functions/at_auth?auth_task=logout",type:"GET",success:function(o){auth.logout_success()},error:function(o,e,l){var n;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){n=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else n=o.responseText;console.error("Error:\n"+n)},complete:function(){console.log("complete event")}})},logout_success:()=>{location.reload()}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJsZW5ndGgiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJmbGRfZWwiLCJ0aGlzIiwiZmxkX3ZhbCIsInZhbCIsImZsZF9wYXJlbnRGb3JtIiwiY2xvc2VzdCIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJhdHRyIiwidmFsaWRfZW1sIiwidXRpbHMiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkX3B3IiwidmFsaWRfcHdfbGVuZ3RoIiwidmFsaWRfcHdfbGVuZ3RoX21zZyIsInZhbGlkX2x0ckNhc2VzIiwidmFsaWRfbHRyQ2FzZXNfbXNnIiwidmFsaWRfcHdfc3BjQ2hhciIsInZhbGlkX3B3X3NwY0NoYXJfbXNnIiwidmFsaWRhdGVfcHciLCJjdXN0b21WYWxpZGF0aW9uTXNnIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGVja1ZhbGlkaXR5IiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRpb25NZXNzYWdlIiwidHJpbSIsImlzIiwicHJvcCIsInNob3dfbG9naW5fbW9kYWwiLCJsb2dpbl9tb2RhbF9nbyIsImVtcHR5IiwicHJlcGVuZCIsImxvZ2luX2RvIiwiZ2V0IiwidGhlR290dGVuIiwiYXBwZW5kIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJvZmYiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsImZvY3VzIiwibW9kYWwiLCJyZW1vdmUiLCJiYWNrZHJvcCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJpdG0iLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsImVycl9zdGF0dXNDb2RlIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJwd19zZXRfZG8iLCJ0YXNrIiwianFYaHIiLCJsb2dpbl9zdWNjZXNzIiwic2F2ZUJ0bnMiLCJsb2dvdXRfZG8iLCJsb2dvdXRfc3VjY2VzcyJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsS0FBMkIsaUJBQVgsS0FBd0JBLEtBQU8sR0FDbERBLEtBQU8sQ0FDUEMsV0FBYSxJQUNMLElBQUlDLFFBQVMsQ0FBQ0MsRUFBU0MsS0FDNUJDLEVBQUVDLEtBQUssQ0FDUEMsSUFBSyw4QkFDTEMsU0FBVSxTQUNSQyxLQUFNLFNBQVVDLEdBQ2RBLEVBQUtDLE9BQVMsR0FDakJSLEVBQVFPLEtBRVBFLEtBQU0sU0FBV0MsRUFBT0MsRUFBWUMsR0FDdENYLEVBQU9TLEVBQU9DLEVBQVlDLE9BSzdCQyxpQkFBbUIsS0FDbEJYLEVBQUUsUUFBUVksR0FBRyxlQUFnQixtQkFBb0IsV0FDaEQsSUFBSUMsRUFBU2IsRUFBRWMsTUFBTSxHQUNqQkMsRUFBVWYsRUFBRWMsTUFBTUUsTUFDbEJDLEVBQWlCakIsRUFBRWMsTUFBTUksUUFBUSxRQUdqQ0MsR0FBa0MsRUFDbENDLEdBQStCLEVBS25DLEdBRkFQLEVBQU9RLGtCQUFrQixJQUVLLFVBQXpCckIsRUFBRWMsTUFBTVEsS0FBSyxRQUFzQixDQUN2QyxJQUFJQyxVQUFFQSxHQUFjQyxNQUFNQyxlQUFlVixHQUVwQ1EsRUFDSlYsRUFBT1Esa0JBQWtCLElBRXpCUixFQUFPUSxrQkFBa0IsMkNBSTNCLEdBQThCLGFBQXpCckIsRUFBRWMsTUFBTVEsS0FBSyxRQUF5QixDQUMxQyxJQUFJSSxTQUNI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SXlFLEVBR0osR0FkQTVDLFFBQVFDLElBQUksZUFFWkQsUUFBUUMsSUFBSSxXQUNaRCxRQUFRQyxJQUFJaEMsR0FFWitCLFFBQVFDLElBQUksZ0JBQ1pELFFBQVFDLElBQUkvQixHQUVaOEIsUUFBUUMsSUFBSSxpQkFDWkQsUUFBUUMsSUFBSTlCLFFBS3NCLElBQXZCRixFQUFNNEUsYUFBOEIsQ0FLOUNELEVBSnFCM0UsRUFBTTRFLGFBQXlCLFdBSXhCLEtBSGI1RSxFQUFNNEUsYUFBb0IsTUFHUyxLQUZwQzVFLEVBQU00RSxhQUFzQixhQUkxQ0QsRUFBVzNFLEVBQU04RSxhQUdsQi9DLFFBQVEyQyxNQUFNLFdBQWFDLElBSTVCSSxTQUFVLFdBRVRoRCxRQUFRQyxJQUFJLHNCQU1mc0QsZUFBaUIsS0FDaEJkLFNBQVNDIiwiZmlsZSI6ImpzL3NoYXJlZC9hdXRoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBhdXRoLmpzICovXG52YXIgYXV0aCA9ICggdHlwZW9mIChhdXRoKSA9PT0gJ29iamVjdCcgKSA/IGF1dGggOiB7fTtcbihhdXRoID0ge1xuXHRzZXNoX2NoZWNrIDogKCkgPT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0XHRkYXRhVHlwZTogJ2pzb24nXG5cdFx0XHR9KS5kb25lKCBmdW5jdGlvbiAocmVzcCkge1xuXHRcdFx0XHRpZiAocmVzcC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuZmFpbCggZnVuY3Rpb24gKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuXHRcdFx0fSk7XG5cdFx0fSlcblx0fVxuXHQsXG5cdGlucHV0X3ZhbGlkYXRpb24gOiAoKSA9PiB7XG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnLmF1dGhfZm9ybSBpbnB1dCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBmbGRfZWwgPSAkKHRoaXMpWzBdO1xuXHRcdFx0dmFyIGZsZF92YWwgPSAkKHRoaXMpLnZhbCgpO1xuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XG5cdFx0XHQvLyB2YXIgZmxkX3BhcmVudEZvcm1faWQgPSBmbGRfcGFyZW50Rm9ybS5hdHRyKCdpZCcpO1xuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gZmFsc2U7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IGZhbHNlO1xuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSBmYWxzZTtcblxuXHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xuXHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcblx0XHRcdFxuXHRcdFx0aWYgKCAkKHRoaXMpLmF0dHIoJ3R5cGUnKSA9PT0gJ2VtYWlsJyApIHtcblx0XHRcdFx0bGV0IHsgdmFsaWRfZW1sIH0gPSB1dGlscy52YWxpZGF0ZV9lbWFpbChmbGRfdmFsKTtcblxuXHRcdFx0XHRpZiAoIHZhbGlkX2VtbCApIHtcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnUGxlYXNlIGNoZWNrIHRoYXQgdGhlIGVtYWlsIGlzIGNvcnJlY3QuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCAkKHRoaXMpLmF0dHIoJ3R5cGUnKSA9PT0gJ3Bhc3N3b3JkJyApIHtcblx0XHRcdFx0bGV0IHsgXG5cdFx0XHRcdFx0dmFsaWRfcHcsIFxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aCwgXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoX21zZywgXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXMsIFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzX21zZywgXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhciwgXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhcl9tc2cgXG5cdFx0XHRcdH0gPSB1dGlscy52YWxpZGF0ZV9wdyhmbGRfdmFsKTtcblxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygndmFsaWRfcHc6ICcpO1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyh2YWxpZF9wdyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIHZhbGlkX3B3ICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgY3VzdG9tVmFsaWRhdGlvbk1zZyA9ICcnO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfbGVuZ3RoICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X2xlbmd0aF9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhdmFsaWRfbHRyQ2FzZXMgKSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX2x0ckNhc2VzX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggIXZhbGlkX3B3X3NwY0NoYXIgKSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfcHdfc3BjQ2hhcl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGF0aW9uTXNnKTtcblx0XHRcdH1cblxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLnZhbGlkaXR5OiAnKTtcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7ICovXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTogJyk7XG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwuY2hlY2tWYWxpZGl0eSgpKTsgKi9cblxuXHRcdFx0LyoqIFRoaXMgZGVsaXZlcnMgdGhlIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2VzICovXG5cdFx0XHR2YXIgZmxkX2lzVmFsaWQgPSBmbGRfZWwuY2hlY2tWYWxpZGl0eSgpO1xuXG5cdFx0XHRpZiAoIWZsZF9pc1ZhbGlkKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnRmxkIGludmFsaWQuIGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZTogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCAkLnRyaW0oIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykudmFsKCkgKSAhPT0gJycgJiYgJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgIT09ICcnICkge1xuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLmlzKCc6dmFsaWQnKSAmJiBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLmlzKCc6dmFsaWQnKSApIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ICYmIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQpIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fdmFsaWQgPSB0cnVlO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0c2hvd19sb2dpbl9tb2RhbCA6ICgpID0+IHtcblx0XHRmdW5jdGlvbiBsb2dpbl9tb2RhbF9nbyAoKSB7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9hY3Rpb25zX21zZ3MnKS5lbXB0eSgpO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHRcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsIC5tb2RhbC1ib2R5JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cIm92ZXJsYXkgb3ZlcmxheS1lbmxpZ2h0ZW5cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2Rpdj4nKTtcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsIC5vdmVybGF5JykucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJzcGlubmVyIHNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLW1kXCIgcm9sZT1cInN0YXR1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4nKTtcblxuXHRcdFx0YXV0aC5sb2dpbl9kbygpO1xuXHRcdH1cblxuXHRcdCQuZ2V0KCdjb21wb25lbnRzL19hdXRoX2xvZ2luLmh0bWwnLCBmdW5jdGlvbiAodGhlR290dGVuKSB7XG5cdFx0XHQkKCdib2R5JykuYXBwZW5kKHRoZUdvdHRlbik7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGF1dGguaW5wdXRfdmFsaWRhdGlvbigpO1xuXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkKCcuYXV0aF9mb3JtIGlucHV0JykudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdFxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLm9mZigna2V5cHJlc3MnKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5rZXlwcmVzcyggZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMTMgJiYgISQoJyNhdXRoX2xvZ2luX2RvJykucHJvcCgnZGlzYWJsZWQnKSApIHtcblx0XHRcdFx0XHRcdGxvZ2luX21vZGFsX2dvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLm9mZignY2xpY2snKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGxvZ2luX21vZGFsX2dvKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgPT09ICcnICYmICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgPT09ICcnICkge1xuXHRcdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2VtYWlsJykuZm9jdXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnZGlzcG9zZScpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLnJlbW92ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoe1xuXHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYydcblx0XHRcdH0pO1xuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXHRcdH0pO1xuXHR9XG5cdCxcblx0YXV0aF9kbyA6IChmb3JtX2lzKSA9PiB7XG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgYXV0aF90YXNrO1xuXG5cdFx0c3dpdGNoIChmb3JtX2lzKSB7XG5cdFx0XHRjYXNlICdhdXRoX3B3X3NldCc6XG5cdFx0XHRcdGF1dGhfdGFzayA9ICdhdXRoX3B3X3NldCc7XG5cdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2F1dGhfbG9naW4nOlxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9sb2dpbic7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0dmFyIHJlcV9vYmogPSB7XG5cdFx0XHQnYXV0aF90YXNrJzogYXV0aF90YXNrXG5cdFx0fTtcblxuXHRcdCQuZWFjaCggJCgnIycgKyBmb3JtX2lzICsgJyBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0dHlwZTogJ1BPU1QnLFxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcblxuXHRcdFx0XHRcdGlmIChlcnJfc3RhdHVzQ29kZSA9PT0gNDAxKSB7XG5cdFx0XHRcdFx0XHQvKiogVGhlIHVzZXIgZW50ZXJlZCBpbnZhbGlkIGNyZWRlbnRpYWxzICovXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdDb21tdW5pY2F0ZSB0aGUgc3BlY2lmaWMgYXV0aGVudGljYXRpb24gcHJvYmxlbSB0byB1c2VyJylcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cdFx0XHR9LFxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRwd19zZXRfZG8gOiAoKSA9PiB7XG5cdFx0dmFyIHJlcV9vYmogPSB7XG5cdFx0XHQndGFzayc6ICdwd19zZXQnXG5cdFx0fTtcblxuXHRcdCQuZWFjaCggJCgnI2F1dGhfcHdfc2V0IGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignaWQnKTtcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XG5cblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XG5cdFx0fSk7XG5cblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWGhyOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYaHIpO1xuXG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cdFx0XHR9LFxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dpbl9kbyA6ICgpID0+IHtcblx0XHR2YXIgcmVxX29iaiA9IHtcblx0XHRcdCdhdXRoX3Rhc2snOiAnYXV0aF9sb2dpbidcblx0XHR9O1xuXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdyZXFfb2JqOiAnKTtcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblx0XHRcdFx0YXV0aC5sb2dpbl9zdWNjZXNzKHJlc3ApO1xuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblx0XHRcdFx0dmFyIGVycl9kaXNwX21zZztcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRlcnJfZGlzcF9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9kaXNwX21zZyArICdcXG4nICsgZXJyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNtYWxsIGNsYXNzPVwibXNnX2xvZ2luU3RhdHVzIG1zZy13YXJuaW5nXCI+UGxlYXNlIGNoZWNrIHRoYXQgdGhlIGxvZ2luIGluZm8gaXMgY29ycmVjdDwvc21hbGw+Jyk7XG5cblx0XHRcdFx0LyoqIFJlc2V0IHRoZSBtb2RhbCBzdGF0ZSAqL1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHRcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwgLm1vZGFsLWJvZHkgLm92ZXJsYXknKS5yZW1vdmUoKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX3N1Y2Nlc3MgOiAoKSA9PiB7XG5cdFx0LyoqIFdoZW4gdGhlcmUncyBubyByZWNlbnRseSBlZGl0ZWQgZmllbGRzIHByZXNlbnQsIHJlZnJlc2ggcGFnZSAqL1xuXHRcdGlmICggJCgnLnZhbENoZycpLmxlbmd0aCA9PT0gMCApIHtcblx0XHRcdGxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgc2F2ZUJ0bnMgPSAkKCcuc2F2ZTpkaXNhYmxlZCcpO1xuXHRcdFx0JC5lYWNoKHNhdmVCdG5zLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICggJCh0aGlzKS5pcygnOnZpc2libGUnKSApIHtcblx0XHRcdFx0XHQkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cdFx0fVxuXHR9XG5cdCxcblx0bG9nb3V0X2RvIDogKCkgPT4ge1xuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGg/YXV0aF90YXNrPWxvZ291dCcsXG5cdFx0XHR0eXBlOiAnR0VUJyxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRcdGF1dGgubG9nb3V0X3N1Y2Nlc3MoKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cdFx0XHRcdHZhciBlcnJfZGlzcF9tc2c7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0ZXJyX2Rpc3BfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfZGlzcF9tc2cgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXG5cdFx0XHRcdC8vICQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19sb2dpblN0YXR1cyBtc2ctd2FybmluZ1wiPlBsZWFzZSBjaGVjayB0aGF0IHRoZSBsb2dpbiBpbmZvIGlzIGNvcnJlY3Q8L3NtYWxsPicpO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9nb3V0X3N1Y2Nlc3MgOiAoKSA9PiB7XG5cdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdH1cbn0pO1xuIl19
