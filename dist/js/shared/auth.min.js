var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e){e.length>0&&o(e)}).fail(function(o,l,t){e(o,l,t)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(){var o=$(this)[0],e=$(this).val(),l=$(this).closest("form"),t=!1,a=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:l}=utils.validate_email(e);l?o.setCustomValidity(""):o.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:t,valid_pw_length:a,valid_pw_length_msg:n,valid_ltrCases:s,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:d}=utils.validate_pw(e);t&&o.setCustomValidity("");let c="";a?$(l).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),c+=n),s?$(l).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),c+=i),r?$(l).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),c+=d),o.setCustomValidity(c)}o.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(o.validationMessage)),""!==$.trim(l.find("input[type=email]").val())&&""!==$.trim(l.find("input[type=password]").val())&&(t=!0),l.find("input[type=email]").is(":valid")&&l.find("input[type=password]").is(":valid")&&(a=!0),t&&a?(!0,$("#auth_login_do").attr("disabled",!1)):(!1,$("#auth_login_do").attr("disabled",!0))})},show_login_modal:()=>{$.get("components/_auth_login.html",function(o){$("body").append(o),$("#auth_login_modal").on("show.bs.modal",function(){$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(o){13===o.which&&($("#auth_login_do").attr("disabled",!0),auth.login_do())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(o){o.preventDefault(),$("#auth_login_do").attr("disabled",!0),auth.login_do()})}),$("#auth_login_modal").on("shown.bs.modal",function(){auth.input_validation(),setTimeout(function(){$(".auth_form input").trigger("change")},500),""===$.trim($("#auth_login").find("input[type=email]").val())&&""===$.trim($("#auth_login").find("input[type=password]").val())&&$("#auth_login_email").focus()}),$("#auth_login_modal").on("hidden.bs.modal",function(){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(l),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var l={auth_task:e};$.each($("#"+o+" input"),function(o,e){var t=$(e).attr("data-authfld"),a=$(e).val();l[t]=a}),console.log(l);var t=JSON.stringify(l);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(){window.location.reload(!0)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;t=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,l){var t=$(l).attr("id"),a=$(l).val();o[t]=a}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("jqXhr: "),console.log(l)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_do:()=>{console.log("login_do");var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,l){var t=$(l).attr("data-authfld"),a=$(l).val();o[t]=a}),console.log("req_obj: "),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o){auth.login_success(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJsZW5ndGgiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJmbGRfZWwiLCJ0aGlzIiwiZmxkX3ZhbCIsInZhbCIsImZsZF9wYXJlbnRGb3JtIiwiY2xvc2VzdCIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJhdHRyIiwidmFsaWRfZW1sIiwidXRpbHMiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkX3B3IiwidmFsaWRfcHdfbGVuZ3RoIiwidmFsaWRfcHdfbGVuZ3RoX21zZyIsInZhbGlkX2x0ckNhc2VzIiwidmFsaWRfbHRyQ2FzZXNfbXNnIiwidmFsaWRfcHdfc3BjQ2hhciIsInZhbGlkX3B3X3NwY0NoYXJfbXNnIiwidmFsaWRhdGVfcHciLCJjdXN0b21WYWxpZGF0aW9uTXNnIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGVja1ZhbGlkaXR5IiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRpb25NZXNzYWdlIiwidHJpbSIsImlzIiwic2hvd19sb2dpbl9tb2RhbCIsImdldCIsInRoZUdvdHRlbiIsImFwcGVuZCIsIm9mZiIsImtleXByZXNzIiwiZSIsIndoaWNoIiwibG9naW5fZG8iLCJwcmV2ZW50RGVmYXVsdCIsInNldFRpbWVvdXQiLCJ0cmlnZ2VyIiwiZm9jdXMiLCJtb2RhbCIsInJlbW92ZSIsImJhY2tkcm9wIiwiYXV0aF9kbyIsImZvcm1faXMiLCJhdXRoX3Rhc2siLCJyZXFfb2JqIiwiZWFjaCIsImlkeCIsIml0bSIsImZsZE5hbWUiLCJmbGRWYWwiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJjb250ZW50VHlwZSIsImRhdGEiLCJzdWNjZXNzIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwiZXJyX3N0YXR1c0NvZGUiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInB3X3NldF9kbyIsInRhc2siLCJqcVhociIsImxvZ2luX3N1Y2Nlc3MiLCJzYXZlQnRucyIsInByb3AiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLEtBQTJCLGlCQUFYLEtBQXdCQSxLQUFPLEdBQ2xEQSxLQUFPLENBQ1BDLFdBQWEsSUFDTCxJQUFJQyxRQUFTLENBQUNDLEVBQVNDLEtBQzVCQyxFQUFFQyxLQUFLLENBQ1BDLElBQUssOEJBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFVQyxHQUNkQSxFQUFLQyxPQUFTLEdBQ2pCUixFQUFRTyxLQUVQRSxLQUFNLFNBQVdDLEVBQU9DLEVBQVlDLEdBQ3RDWCxFQUFPUyxFQUFPQyxFQUFZQyxPQUs3QkMsaUJBQW1CLEtBQ2xCWCxFQUFFLFFBQVFZLEdBQUcsZUFBZ0IsbUJBQW9CLFdBQ2hELElBQUlDLEVBQVNiLEVBQUVjLE1BQU0sR0FDakJDLEVBQVVmLEVBQUVjLE1BQU1FLE1BQ2xCQyxFQUFpQmpCLEVBQUVjLE1BQU1JLFFBQVEsUUFHakNDLEdBQWtDLEVBQ2xDQyxHQUErQixFQUtuQyxHQUZBUCxFQUFPUSxrQkFBa0IsSUFFSyxVQUF6QnJCLEVBQUVjLE1BQU1RLEtBQUssUUFBc0IsQ0FDdkMsSUFBSUMsVUFBRUEsR0FBY0MsTUFBTUMsZUFBZVYsR0FFcENRLEVBQ0pWLEVBQU9RLGtCQUFrQixJQUV6QlIsRUFBT1Esa0JBQWtCLDBDQUkzQixHQUE4QixhQUF6QnJCLEVBQUVjLE1BQU1RLEtBQUssUUFBeUIsQ0FDMUMsSUFBSUksU0FDSEEsRUFBUUMsZ0JBQ1JBLEVBQWVDLG9CQUNmQSxFQUFtQkMsZUFDbkJBLEVBQWND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QyxHQWFuQyxJQUFJc0UsRUFFSixHQWJBekMsUUFBUUMsSUFBSSxlQUVaRCxRQUFRQyxJQUFJLFdBQ1pELFFBQVFDLElBQUloQyxHQUVaK0IsUUFBUUMsSUFBSSxnQkFDWkQsUUFBUUMsSUFBSS9CLEdBRVo4QixRQUFRQyxJQUFJLGlCQUNaRCxRQUFRQyxJQUFJOUIsUUFJc0IsSUFBdkJGLEVBQU15RSxhQUE4QixDQUs5Q0QsRUFKcUJ4RSxFQUFNeUUsYUFBeUIsV0FJeEIsS0FIZnpFLEVBQU15RSxhQUFvQixNQUdLLEtBRjlCekUsRUFBTXlFLGFBQXNCLGFBSTFDRCxFQUFXeEUsRUFBTTJFLGFBR2xCNUMsUUFBUXdDLE1BQU0sV0FBYUMsSUFFNUJJLFNBQVUsV0FFVDdDLFFBQVFDLElBQUksc0JBTWZnRCxjQUFnQixLQUVmLEdBQTZCLElBQXhCeEYsRUFBRSxXQUFXTSxPQUNqQnVFLFNBQVNDLGFBQ0gsQ0FDTixJQUFJVyxFQUFXekYsRUFBRSxrQkFDakJBLEVBQUVnRSxLQUFLeUIsRUFBVSxXQUNYekYsRUFBRWMsTUFBTTZCLEdBQUcsYUFDZjNDLEVBQUVjLE1BQU00RSxLQUFLLFlBQVksS0FJM0IxRixFQUFFLHFCQUFxQnlELE1BQU0iLCJmaWxlIjoianMvc2hhcmVkL2F1dGgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIGF1dGguanMgKi9cbnZhciBhdXRoID0gKCB0eXBlb2YgKGF1dGgpID09PSAnb2JqZWN0JyApID8gYXV0aCA6IHt9O1xuKGF1dGggPSB7XG5cdHNlc2hfY2hlY2sgOiAoKSA9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcblx0XHRcdH0pLmRvbmUoIGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRcdGlmIChyZXNwLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3ApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KS5mYWlsKCBmdW5jdGlvbiAoIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcblx0XHRcdFx0cmVqZWN0KGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XG5cdFx0XHR9KTtcblx0XHR9KVxuXHR9XG5cdCxcblx0aW5wdXRfdmFsaWRhdGlvbiA6ICgpID0+IHtcblx0XHQkKCdib2R5Jykub24oJ2lucHV0IGNoYW5nZScsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XG5cdFx0XHR2YXIgZmxkX3ZhbCA9ICQodGhpcykudmFsKCk7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcblx0XHRcdC8vIHZhciBmbGRfcGFyZW50Rm9ybV9pZCA9IGZsZF9wYXJlbnRGb3JtLmF0dHIoJ2lkJyk7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gZmFsc2U7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xuXG5cdFx0XHQvKiogRG8gc29tZSB2YWxpZGF0aW9uICovXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAnZW1haWwnICkge1xuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xuXG5cdFx0XHRcdGlmICggdmFsaWRfZW1sICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdHb25uYSBuZWVkIGEgdmFsaWQgZW1haWwgdGhlcmUsIGNoaWVmLicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdwYXNzd29yZCcgKSB7XG5cdFx0XHRcdGxldCB7IFxuXHRcdFx0XHRcdHZhbGlkX3B3LCBcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGgsIFxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aF9tc2csIFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzLCBcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlc19tc2csIFxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXIsIFxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXJfbXNnIFxuXHRcdFx0XHR9ID0gdXRpbHMudmFsaWRhdGVfcHcoZmxkX3ZhbCk7XG5cblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ3ZhbGlkX3B3OiAnKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2codmFsaWRfcHcpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCB2YWxpZF9wdyApIHtcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGN1c3RvbVZhbGlkYXRpb25Nc2cgPSAnJztcblx0XHRcdFx0XG5cdFx0XHRcdGlmICggIXZhbGlkX3B3X2xlbmd0aCApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX21pbkxlbmd0aCcpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19sZW5ndGhfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggIXZhbGlkX2x0ckNhc2VzICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXMnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9sdHJDYXNlc19tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19zcGNDaGFyICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X3NwY0NoYXJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoY3VzdG9tVmFsaWRhdGlvbk1zZyk7XG5cdFx0XHR9XG5cblx0XHRcdC8qKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVmFsaWRpdHlTdGF0ZSAqL1xuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC52YWxpZGl0eTogJyk7XG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpOyAqL1xuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC5jaGVja1ZhbGlkaXR5KCk6ICcpO1xuXHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLmNoZWNrVmFsaWRpdHkoKSk7ICovXG5cblx0XHRcdC8qKiBUaGlzIGRlbGl2ZXJzIHRoZSBjdXN0b20gdmFsaWRhdGlvbiBtZXNzYWdlcyAqL1xuXHRcdFx0dmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcblxuXHRcdFx0aWYgKCFmbGRfaXNWYWxpZCkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpbnZhbGlkLiBmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2U6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgJiYgZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSAmJiBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkKSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdHNob3dfbG9naW5fbW9kYWwgOiAoKSA9PiB7XG5cdFx0JC5nZXQoJ2NvbXBvbmVudHMvX2F1dGhfbG9naW4uaHRtbCcsIGZ1bmN0aW9uICh0aGVHb3R0ZW4pIHtcblx0XHRcdCQoJ2JvZHknKS5hcHBlbmQodGhlR290dGVuKTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5vbignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5vZmYoJ2tleXByZXNzJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykua2V5cHJlc3MoIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0aWYgKGUud2hpY2ggPT09IDEzKSB7XG5cdFx0XHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGF1dGgubG9naW5fZG8oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub2ZmKCdjbGljaycpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0YXV0aC5sb2dpbl9kbygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YXV0aC5pbnB1dF92YWxpZGF0aW9uKCk7XG5cblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQoJy5hdXRoX2Zvcm0gaW5wdXQnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmICggJC50cmltKCAkKCcjYXV0aF9sb2dpbicpLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykudmFsKCkgKSA9PT0gJycgJiYgJC50cmltKCAkKCcjYXV0aF9sb2dpbicpLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykudmFsKCkgKSA9PT0gJycgKSB7XG5cdFx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZW1haWwnKS5mb2N1cygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKCdkaXNwb3NlJyk7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykucmVtb3ZlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCh7XG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJ1xuXHRcdFx0fSk7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRhdXRoX2RvIDogKGZvcm1faXMpID0+IHtcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciBhdXRoX3Rhc2s7XG5cblx0XHRzd2l0Y2ggKGZvcm1faXMpIHtcblx0XHRcdGNhc2UgJ2F1dGhfcHdfc2V0Jzpcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfcHdfc2V0Jztcblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnYXV0aF9sb2dpbic6XG5cdFx0XHRcdGF1dGhfdGFzayA9ICdhdXRoX2xvZ2luJztcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHR2YXIgcmVxX29iaiA9IHtcblx0XHRcdCdhdXRoX3Rhc2snOiBhdXRoX3Rhc2tcblx0XHR9O1xuXG5cdFx0JC5lYWNoKCAkKCcjJyArIGZvcm1faXMgKyAnIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG0pLnZhbCgpO1xuXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xuXHRcdH0pO1xuXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHR0eXBlOiAnUE9TVCcsXG5cdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0ZGF0YTogcmVxX3N0cixcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xuXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xuXG5cdFx0XHRcdFx0aWYgKGVycl9zdGF0dXNDb2RlID09PSA0MDEpIHtcblx0XHRcdFx0XHRcdC8qKiBUaGUgdXNlciBlbnRlcmVkIGludmFsaWQgY3JlZGVudGlhbHMgKi9cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ0NvbW11bmljYXRlIHRoZSBzcGVjaWZpYyBhdXRoZW50aWNhdGlvbiBwcm9ibGVtIHRvIHVzZXInKVxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdHB3X3NldF9kbyA6ICgpID0+IHtcblx0XHR2YXIgcmVxX29iaiA9IHtcblx0XHRcdCd0YXNrJzogJ3B3X3NldCdcblx0XHR9O1xuXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdpZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0dHlwZTogJ1BPU1QnLFxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYaHI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhocik7XG5cblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xuXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX2RvIDogKCkgPT4ge1xuXG5cdFx0Y29uc29sZS5sb2coJ2xvZ2luX2RvJyk7XG5cblx0XHR2YXIgcmVxX29iaiA9IHtcblx0XHRcdCdhdXRoX3Rhc2snOiAnYXV0aF9sb2dpbidcblx0XHR9O1xuXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdyZXFfb2JqOiAnKTtcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblx0XHRcdFx0YXV0aC5sb2dpbl9zdWNjZXNzKHJlc3ApO1xuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9naW5fc3VjY2VzcyA6ICgpID0+IHtcblx0XHQvKiogV2hlbiB0aGVyZSdzIG5vIHJlY2VudGx5IGVkaXRlZCBmaWVsZHMgcHJlc2VudCwgcmVmcmVzaCBwYWdlICovXG5cdFx0aWYgKCAkKCcudmFsQ2hnJykubGVuZ3RoID09PSAwICkge1xuXHRcdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBzYXZlQnRucyA9ICQoJy5zYXZlOmRpc2FibGVkJyk7XG5cdFx0XHQkLmVhY2goc2F2ZUJ0bnMsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmlzKCc6dmlzaWJsZScpICkge1xuXHRcdFx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSlcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcblx0XHR9XG5cdH1cbn0pO1xuIl19
