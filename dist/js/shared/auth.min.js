var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(e=>{e.length>0&&o(e)}).fail((o,t,l)=>{e(o,t,l)})}),input_validation:()=>{$("body").on("input",".auth_form input",function(){var o=$(this)[0],e=$(o).attr("id"),t=$(this).val(),l=$(this).closest("form"),a=l.attr("id"),s=!1,n=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:e}=utils.validate_email(t);e?o.setCustomValidity(""):o.setCustomValidity("Please check that the email is correct.")}if("password"===$(this).attr("type")&&"auth_pw_set_pw_retype"!==$(this).attr("id")){let{valid_pw:a,valid_pw_length:s,valid_pw_length_msg:n,valid_ltrCases_upper:i,valid_ltrCases_upper_msg:r,valid_ltrCases_lower:d,valid_ltrCases_lower_msg:u,valid_number:c,valid_number_msg:p,valid_pw_spcChar:_,valid_pw_spcChar_msg:h}=utils.validate_pw(t);a&&o.setCustomValidity("");let g="";s?$(l).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),g+=n),i?$(l).find(".validHelp_ltrCases_upper").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases_upper").removeClass("valid").addClass("invalid"),g+=r),d?$(l).find(".validHelp_ltrCases_lower").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases_lower").removeClass("valid").addClass("invalid"),g+=u),c?$(l).find(".validHelp_number").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_number").removeClass("valid").addClass("invalid"),g+=p),_?$(l).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),g+=h),o.setCustomValidity(g),"auth_pw_set_pw"===e&&""===g?$("#auth_pw_set_do").prop("disabled",!1):$("#auth_pw_set_do").prop("disabled",!0)}if("auth_pw_set_pw_retype"===$(this).attr("id")){if($("#auth_pw_set_pw").val()!==$(this).val()){$("#auth_pw_set_do").prop("disabled",!0);let e="Doesn't match new password!";$(this).attr("title","Doesn't match new password!"),$(this).attr("data-toggle","tooltip"),$(this).attr("data-placement","top"),$(this).tooltip("show"),o.setCustomValidity(e)}else $("#auth_pw_set_do").prop("disabled",!1),o.setCustomValidity(""),$(this).attr("title",""),$(this).tooltip("hide")}o.checkValidity();""!==$.trim(l.find("input[type=email]").val())&&""!==$.trim(l.find("input[type=password]").val())&&(s=!0);let i=document.getElementById(a).getElementsByTagName("input");(i=[...i]).forEach(o=>{let e=o.getAttribute("type");if("email"===e||"password"===e){if(!o.checkValidity())return;n=!0}}),s&&n?(!0,$("#auth_login_do").prop("disabled",!1)):(!1,$("#auth_login_do").prop("disabled",!0))})},login_btn_init:()=>{$(".auth-loginout, #log_in_prompt").click(()=>{auth.show_login_modal("toggle")})},login_modal_init:()=>{auth.login_btn_init(),auth.show_login_modal()},show_login_modal:()=>{function o(){$("#auth_login_actions_msgs").empty(),$("#auth_login_do").prop("disabled",!0),$("#auth_login input").prop("disabled",!0),$("#auth_login_modal .modal-body").prepend('<div class="overlay overlay-enlighten" aria-hidden="true"></div>'),$("#auth_login_modal .overlay").prepend('<span class="spinner spinner-border spinner-border-md" role="status" aria-hidden="true"></span>'),auth.login_do()}$.get("components/_auth_login.html",function(e){$("body").append(e),$("#auth_login_modal").on("show.bs.modal",function(){auth.input_validation(),setTimeout(function(){$(".auth_form input").trigger("input")},500),$("#auth_login input").off("keyup"),$("#auth_login input").keyup(function(e){var t=!0;let l=document.getElementById("auth_login").getElementsByTagName("input");(l=[...l]).forEach(o=>{o.checkValidity()||(t=!1)}),console.log(`e.which === 13: ${13===e.which}`),console.log(`allFldsValid: ${t}`),13===e.which&&t&&(console.log("enter"),o())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(){o()})}),$("#auth_login_modal").on("shown.bs.modal",function(){""===$.trim($("#auth_login").find("input[type=email]").val())&&""===$.trim($("#auth_login").find("input[type=password]").val())&&$("#auth_login_email").focus()}),$("#auth_login_modal").on("hidden.bs.modal",function(){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(t),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var t={auth_task:e};$.each($("#"+o+" input"),function(o,e){var l=$(e).attr("data-authfld"),a=$(e).val();t[l]=a}),console.log(t);var l=JSON.stringify(t);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:l,success:function(){window.location.reload(!0)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;l=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={auth_task:"auth_pw_chg"};o.auth_pw=$("#auth_pw_set_pw").val(),console.log(o);var e=JSON.stringify(o);return $.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,t){console.log("success event"),console.log("resp: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("jqXhr: "),console.log(t)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},login_do:()=>{var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,t){var l=$(t).attr("data-authfld"),a=$(t).val();o[l]=a});var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o){console.log("success event"),auth.login_success(o)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l),$("#auth_login_actions_msgs").prepend('<span class="msg_loginStatus msg-warning">Please check that the login info is correct</span>'),$("#auth_login_actions_msgs").show(),$("#auth_login_do").prop("disabled",!1),$("#auth_login input").prop("disabled",!1),$("#auth_login_modal .modal-body .overlay").remove()},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}},logout_init:()=>{$(".auth-loginout").text("Log out"),$(".auth-loginout").removeClass("disabled"),$(".auth-loginout").removeAttr("tabindex"),$(".auth-loginout").removeAttr("aria-disabled"),$(".auth-loginout").click(function(){auth.logout_do()})},logout_do:()=>{$.ajax({url:"/.netlify/functions/at_auth?auth_task=logout",type:"GET",success:function(o){auth.logout_success()},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},logout_success:()=>{location.reload()}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJsZW5ndGgiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJmbGRfZWwiLCJ0aGlzIiwiZmxkX2lkIiwiYXR0ciIsImZsZF92YWwiLCJ2YWwiLCJmbGRfcGFyZW50Rm9ybSIsImNsb3Nlc3QiLCJmbGRfcGFyZW50Rm9ybV9pZCIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJ2YWxpZF9lbWwiLCJ1dGlscyIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRfcHciLCJ2YWxpZF9wd19sZW5ndGgiLCJ2YWxpZF9wd19sZW5ndGhfbXNnIiwidmFsaWRfbHRyQ2FzZXNfdXBwZXIiLCJ2YWxpZF9sdHJDYXNlc191cHBlcl9tc2ciLCJ2YWxpZF9sdHJDYXNlc19sb3dlciIsInZhbGlkX2x0ckNhc2VzX2xvd2VyX21zZyIsInZhbGlkX251bWJlciIsInZhbGlkX251bWJlcl9tc2ciLCJ2YWxpZF9wd19zcGNDaGFyIiwidmFsaWRfcHdfc3BjQ2hhcl9tc2ciLCJ2YWxpZGF0ZV9wdyIsImN1c3RvbVZhbGlkYXRpb25Nc2ciLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInByb3AiLCJ0b29sdGlwIiwiY2hlY2tWYWxpZGl0eSIsInRyaW0iLCJhdXRoX2lucHV0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZvckVhY2giLCJpdG0iLCJmbGRfdHlwZSIsImdldEF0dHJpYnV0ZSIsImxvZ2luX2J0bl9pbml0IiwiY2xpY2siLCJzaG93X2xvZ2luX21vZGFsIiwibG9naW5fbW9kYWxfaW5pdCIsImxvZ2luX21vZGFsX2dvIiwiZW1wdHkiLCJwcmVwZW5kIiwibG9naW5fZG8iLCJnZXQiLCJ0aGVHb3R0ZW4iLCJhcHBlbmQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsIm9mZiIsImtleXVwIiwiZSIsImFsbEZsZHNWYWxpZCIsImNvbnNvbGUiLCJsb2ciLCJ3aGljaCIsImZvY3VzIiwibW9kYWwiLCJyZW1vdmUiLCJiYWNrZHJvcCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsImVycl9zdGF0dXNDb2RlIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJwd19zZXRfZG8iLCJqcVhociIsImxvZ2luX3N1Y2Nlc3MiLCJzaG93Iiwic2F2ZUJ0bnMiLCJpcyIsImxvZ291dF9pbml0IiwidGV4dCIsInJlbW92ZUF0dHIiLCJsb2dvdXRfZG8iLCJsb2dvdXRfc3VjY2VzcyJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsS0FBMkIsaUJBQVgsS0FBd0JBLEtBQU8sR0FDbERBLEtBQU8sQ0FDUEMsV0FBYSxJQUNMLElBQUlDLFFBQVMsQ0FBQ0MsRUFBU0MsS0FDN0JDLEVBQUVDLEtBQUssQ0FDTkMsSUFBSyw4QkFDTEMsU0FBVSxTQUVWQyxLQUFPQyxJQUNIQSxFQUFLQyxPQUFTLEdBQ2pCUixFQUFRTyxLQUdURSxLQUFNLENBQUVDLEVBQU9DLEVBQVlDLEtBQzNCWCxFQUFPUyxFQUFPQyxFQUFZQyxPQUs3QkMsaUJBQW1CLEtBQ2xCWCxFQUFFLFFBQVFZLEdBQUcsUUFBUyxtQkFBb0IsV0FFekMsSUFBSUMsRUFB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UyxLQUZwQzVGLEVBQU00RixhQUFzQixhQUkxQ0QsRUFBVzNGLEVBQU04RixhQUdsQjdCLFFBQVF5QixNQUFNLFdBQWFDLElBSTVCSSxTQUFVLFdBRVQ5QixRQUFRQyxJQUFJLHNCQU1md0MsZUFBaUIsS0FDaEJsQixTQUFTQyIsImZpbGUiOiJqcy9zaGFyZWQvYXV0aC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogYXV0aC5qcyAqL1xudmFyIGF1dGggPSAoIHR5cGVvZiAoYXV0aCkgPT09ICdvYmplY3QnICkgPyBhdXRoIDoge307XG4oYXV0aCA9IHtcblx0c2VzaF9jaGVjayA6ICgpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcblx0XHRcdH0pXG5cdFx0XHQuZG9uZSggKHJlc3ApID0+IHtcblx0XHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzcCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuZmFpbCggKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSA9PiB7XG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuXHRcdFx0fSk7XG5cdFx0fSlcblx0fVxuXHQsXG5cdGlucHV0X3ZhbGlkYXRpb24gOiAoKSA9PiB7XG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCcsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgZmxkX2VsID0gJCh0aGlzKVswXTtcblx0XHRcdHZhciBmbGRfaWQgPSAkKGZsZF9lbCkuYXR0cignaWQnKTtcblx0XHRcdHZhciBmbGRfdmFsID0gJCh0aGlzKS52YWwoKTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2lkID0gZmxkX3BhcmVudEZvcm0uYXR0cignaWQnKTtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV92YWxpZDtcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gZmFsc2U7XG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xuXG5cdFx0XHQvKiogRG8gc29tZSB2YWxpZGF0aW9uICovXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXHRcdFx0XG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAnZW1haWwnICkge1xuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xuXG5cdFx0XHRcdGlmICggdmFsaWRfZW1sICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCdQbGVhc2UgY2hlY2sgdGhhdCB0aGUgZW1haWwgaXMgY29ycmVjdC4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnICYmICQodGhpcykuYXR0cignaWQnKSAhPT0gJ2F1dGhfcHdfc2V0X3B3X3JldHlwZScgKSB7XG5cdFx0XHRcdGxldCB7IFxuXHRcdFx0XHRcdHZhbGlkX3B3LCBcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGgsXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoX21zZyxcblx0XHRcdFx0XHQvLyB2YWxpZF9sdHJDYXNlcyxcblx0XHRcdFx0XHQvLyB2YWxpZF9sdHJDYXNlc19tc2csXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXNfdXBwZXIsXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXNfdXBwZXJfbXNnLFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzX2xvd2VyLFxuXHRcdFx0XHRcdHZhbGlkX2x0ckNhc2VzX2xvd2VyX21zZyxcblx0XHRcdFx0XHR2YWxpZF9udW1iZXIsXG5cdFx0XHRcdFx0dmFsaWRfbnVtYmVyX21zZyxcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyLFxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXJfbXNnXG5cdFx0XHRcdH0gPSB1dGlscy52YWxpZGF0ZV9wdyhmbGRfdmFsKTtcblxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygndmFsaWRfcHc6ICcpO1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyh2YWxpZF9wdyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIHZhbGlkX3B3ICkge1xuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgY3VzdG9tVmFsaWRhdGlvbk1zZyA9ICcnO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfbGVuZ3RoICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X2xlbmd0aF9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyogaWYgKCAhdmFsaWRfbHRyQ2FzZXMgKSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX2x0ckNhc2VzX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcblx0XHRcdFx0fSAqL1xuXG5cdFx0XHRcdGlmICggIXZhbGlkX2x0ckNhc2VzX3VwcGVyICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXNfdXBwZXInKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xuXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9sdHJDYXNlc191cHBlcl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlc191cHBlcicpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICF2YWxpZF9sdHJDYXNlc19sb3dlciApIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzX2xvd2VyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfbHRyQ2FzZXNfbG93ZXJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXNfbG93ZXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhdmFsaWRfbnVtYmVyICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbnVtYmVyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcblxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfbnVtYmVyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX251bWJlcicpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19zcGNDaGFyICkge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XG5cblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X3NwY0NoYXJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoY3VzdG9tVmFsaWRhdGlvbk1zZyk7XG5cblx0XHRcdFx0Ly8gY29uc29sZS5sb2coYGZsZF9pZDogJHtmbGRfaWR9YCk7XG5cblx0XHRcdFx0aWYgKCBmbGRfaWQgPT09ICdhdXRoX3B3X3NldF9wdycgJiYgY3VzdG9tVmFsaWRhdGlvbk1zZyA9PT0gJycpIHtcblx0XHRcdFx0XHQvKiAkKCcjYXV0aF9wd19zZXRfcHdfcmV0eXBlJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X3B3X3JldHlwZScpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJycpOyAqL1xuXG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X2RvJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0LyogJCgnI2F1dGhfcHdfc2V0X3B3X3JldHlwZScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X3B3X3JldHlwZScpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ01pbmltdW0gcGFzc3dvcmQgcmVxdWlyZW1lbnRzIHVubWV0Jyk7ICovXG5cblx0XHRcdFx0XHQkKCcjYXV0aF9wd19zZXRfZG8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCdpZCcpID09PSAnYXV0aF9wd19zZXRfcHdfcmV0eXBlJyApIHtcblx0XHRcdFx0bGV0IG5ld1B3ID0gJCgnI2F1dGhfcHdfc2V0X3B3JykudmFsKCk7XG5cdFx0XHRcdGxldCBuZXdQd19yZXR5cGUgPSAkKHRoaXMpLnZhbCgpO1xuXG5cdFx0XHRcdGlmIChuZXdQdyAhPT0gbmV3UHdfcmV0eXBlKSB7XG5cdFx0XHRcdFx0JCgnI2F1dGhfcHdfc2V0X2RvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuXHRcdFx0XHRcdGxldCBjdXN0b21WYWxpZGF0aW9uTXNnID0gJ0RvZXNuXFwndCBtYXRjaCBuZXcgcGFzc3dvcmQhJztcblxuXHRcdFx0XHRcdCQodGhpcykuYXR0cigndGl0bGUnLCAnRG9lc25cXCd0IG1hdGNoIG5ldyBwYXNzd29yZCEnKTtcblx0XHRcdFx0XHQkKHRoaXMpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ3Rvb2x0aXAnKTtcblx0XHRcdFx0XHQkKHRoaXMpLmF0dHIoJ2RhdGEtcGxhY2VtZW50JywgJ3RvcCcpO1xuXG5cdFx0XHRcdFx0JCh0aGlzKS50b29sdGlwKCdzaG93Jyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KGN1c3RvbVZhbGlkYXRpb25Nc2cpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoJyNhdXRoX3B3X3NldF9kbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkKHRoaXMpLmF0dHIoJ3RpdGxlJywgJycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQodGhpcykudG9vbHRpcCgnaGlkZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8qKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVmFsaWRpdHlTdGF0ZSAqL1xuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC52YWxpZGl0eTogJyk7XG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpOyAqL1xuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC5jaGVja1ZhbGlkaXR5KCk6ICcpO1xuXHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLmNoZWNrVmFsaWRpdHkoKSk7ICovXG5cblx0XHRcdC8qKiBUaGlzIGRlbGl2ZXJzIHRoZSBjdXN0b20gdmFsaWRhdGlvbiBtZXNzYWdlcyAqL1xuXHRcdFx0dmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcblxuXHRcdFx0LyogaWYgKCFmbGRfaXNWYWxpZCkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpbnZhbGlkLiBmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2U6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xuXG5cdFx0XHR9ICovXG5cblx0XHRcdGlmICggJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8qIGlmICggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgJiYgZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSB0cnVlO1xuXHRcdFx0fSAqL1xuXHRcdFx0XG5cdFx0XHRsZXQgYXV0aF9pbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbGRfcGFyZW50Rm9ybV9pZCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7XG5cdFx0XHRcdGF1dGhfaW5wdXRzID0gWy4uLmF1dGhfaW5wdXRzXTtcblxuXHRcdFx0YXV0aF9pbnB1dHMuZm9yRWFjaCggKGl0bSkgPT4ge1xuXHRcdFx0XHRsZXQgZmxkX3R5cGUgPSBpdG0uZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG5cblx0XHRcdFx0aWYgKGZsZF90eXBlID09PSAnZW1haWwnIHx8IGZsZF90eXBlID09PSAncGFzc3dvcmQnKSB7XG5cdFx0XHRcdFx0bGV0IGZsZElzVmFsaWQgPSBpdG0uY2hlY2tWYWxpZGl0eSgpO1xuXG5cdFx0XHRcdFx0aWYgKCFmbGRJc1ZhbGlkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSAmJiBmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkKSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX2J0bl9pbml0IDogKCkgPT4ge1xuXHRcdCQoJy5hdXRoLWxvZ2lub3V0LCAjbG9nX2luX3Byb21wdCcpLmNsaWNrKCAoKSA9PiB7XHRcblx0XHRcdGF1dGguc2hvd19sb2dpbl9tb2RhbCgndG9nZ2xlJyk7XG5cdFx0fSk7XG5cdH1cblx0LFxuXHRsb2dpbl9tb2RhbF9pbml0IDogKCkgPT4ge1xuXHRcdGF1dGgubG9naW5fYnRuX2luaXQoKTtcblxuXHRcdGF1dGguc2hvd19sb2dpbl9tb2RhbCgpO1xuXHR9XG5cdCxcblx0c2hvd19sb2dpbl9tb2RhbCA6ICgpID0+IHtcblx0XHRmdW5jdGlvbiBsb2dpbl9tb2RhbF9nbyAoKSB7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9hY3Rpb25zX21zZ3MnKS5lbXB0eSgpO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHRcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsIC5tb2RhbC1ib2R5JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cIm92ZXJsYXkgb3ZlcmxheS1lbmxpZ2h0ZW5cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2Rpdj4nKTtcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsIC5vdmVybGF5JykucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJzcGlubmVyIHNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLW1kXCIgcm9sZT1cInN0YXR1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4nKTtcblxuXHRcdFx0YXV0aC5sb2dpbl9kbygpO1xuXHRcdH1cblxuXHRcdCQuZ2V0KCdjb21wb25lbnRzL19hdXRoX2xvZ2luLmh0bWwnLCBmdW5jdGlvbiAodGhlR290dGVuKSB7XG5cdFx0XHQkKCdib2R5JykuYXBwZW5kKHRoZUdvdHRlbik7XG5cblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykub24oJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGF1dGguaW5wdXRfdmFsaWRhdGlvbigpO1xuXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkKCcuYXV0aF9mb3JtIGlucHV0JykudHJpZ2dlcignaW5wdXQnKTtcblx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykub2ZmKCdrZXl1cCcpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLmtleXVwKCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdHZhciBhbGxGbGRzVmFsaWQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0bGV0IGF1dGhfaW5wdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhfbG9naW4nKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTtcblx0XHRcdFx0XHRcdGF1dGhfaW5wdXRzID0gWy4uLmF1dGhfaW5wdXRzXTtcblxuXHRcdFx0XHRcdGF1dGhfaW5wdXRzLmZvckVhY2goIChpdG0pID0+IHtcblx0XHRcdFx0XHRcdGxldCBmbGRJc1ZhbGlkID0gaXRtLmNoZWNrVmFsaWRpdHkoKTtcblxuXHRcdFx0XHRcdFx0aWYgKCFmbGRJc1ZhbGlkKSB7XG5cdFx0XHRcdFx0XHRcdGFsbEZsZHNWYWxpZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgZS53aGljaCA9PT0gMTM6ICR7ZS53aGljaCA9PT0gMTN9YCk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYGFsbEZsZHNWYWxpZDogJHthbGxGbGRzVmFsaWR9YCk7XG5cblx0XHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMTMgJiYgYWxsRmxkc1ZhbGlkICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnZW50ZXInKTtcblxuXHRcdFx0XHRcdFx0bG9naW5fbW9kYWxfZ28oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub2ZmKCdjbGljaycpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRsb2dpbl9tb2RhbF9nbygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApID09PSAnJyAmJiAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApID09PSAnJyApIHtcblx0XHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9lbWFpbCcpLmZvY3VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ2Rpc3Bvc2UnKTtcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5yZW1vdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKHtcblx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnXG5cdFx0XHR9KTtcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ3Nob3cnKTtcblx0XHR9KTtcblx0fVxuXHQsXG5cdGF1dGhfZG8gOiAoZm9ybV9pcykgPT4ge1xuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIGF1dGhfdGFzaztcblxuXHRcdHN3aXRjaCAoZm9ybV9pcykge1xuXHRcdFx0Y2FzZSAnYXV0aF9wd19zZXQnOlxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9wd19zZXQnO1xuXHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhdXRoX2xvZ2luJzpcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfbG9naW4nO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHZhciByZXFfb2JqID0ge1xuXHRcdFx0J2F1dGhfdGFzayc6IGF1dGhfdGFza1xuXHRcdH07XG5cblx0XHQkLmVhY2goICQoJyMnICsgZm9ybV9pcyArICcgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XG5cblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XG5cdFx0fSk7XG5cblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcblxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcblx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XG5cblx0XHRcdFx0XHRpZiAoZXJyX3N0YXR1c0NvZGUgPT09IDQwMSkge1xuXHRcdFx0XHRcdFx0LyoqIFRoZSB1c2VyIGVudGVyZWQgaW52YWxpZCBjcmVkZW50aWFscyAqL1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnQ29tbXVuaWNhdGUgdGhlIHNwZWNpZmljIGF1dGhlbnRpY2F0aW9uIHByb2JsZW0gdG8gdXNlcicpXG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0cHdfc2V0X2RvIDogKCkgPT4ge1xuXHRcdHZhciByZXFfb2JqID0ge1xuXHRcdFx0J2F1dGhfdGFzayc6ICdhdXRoX3B3X2NoZydcblx0XHR9O1xuXG5cdFx0LyogJC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdpZCcpO1xuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcblxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcblx0XHR9KTsgKi9cblxuXHRcdHJlcV9vYmpbJ2F1dGhfcHcnXSA9ICQoJyNhdXRoX3B3X3NldF9wdycpLnZhbCgpO1xuXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XG5cblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xuXG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0dHlwZTogJ1BPU1QnLFxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYaHI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhocik7XG5cblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xuXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX2RvIDogKCkgPT4ge1xuXHRcdHZhciByZXFfb2JqID0ge1xuXHRcdFx0J2F1dGhfdGFzayc6ICdhdXRoX2xvZ2luJ1xuXHRcdH07XG5cblx0XHQkLmVhY2goICQoJyNhdXRoX2xvZ2luIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG0pLnZhbCgpO1xuXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xuXHRcdH0pO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coJ3JlcV9vYmo6ICcpO1xuXHRcdC8vIGNvbnNvbGUubG9nKHJlcV9vYmopO1xuXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxuXHRcdFx0dHlwZTogJ1BPU1QnLFxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdGRhdGE6IHJlcV9zdHIsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XG5cblx0XHRcdFx0YXV0aC5sb2dpbl9zdWNjZXNzKHJlc3ApO1xuXHRcdFx0fSxcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcblx0XHRcdFx0dmFyIGVycl9kaXNwX21zZztcblxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcblx0XHRcdFx0XHRlcnJfZGlzcF9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcblxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9kaXNwX21zZyArICdcXG4nICsgZXJyX21zZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XG5cblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fYWN0aW9uc19tc2dzJykucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJtc2dfbG9naW5TdGF0dXMgbXNnLXdhcm5pbmdcIj5QbGVhc2UgY2hlY2sgdGhhdCB0aGUgbG9naW4gaW5mbyBpcyBjb3JyZWN0PC9zcGFuPicpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9hY3Rpb25zX21zZ3MnKS5zaG93KCk7XG5cblx0XHRcdFx0LyoqIFJlc2V0IHRoZSBtb2RhbCBzdGF0ZSAqL1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHRcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwgLm1vZGFsLWJvZHkgLm92ZXJsYXknKS5yZW1vdmUoKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XG5cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ2luX3N1Y2Nlc3MgOiAoKSA9PiB7XG5cdFx0LyoqIFdoZW4gdGhlcmUncyBubyByZWNlbnRseSBlZGl0ZWQgZmllbGRzIHByZXNlbnQsIHJlZnJlc2ggcGFnZSAqL1xuXHRcdGlmICggJCgnLnZhbENoZycpLmxlbmd0aCA9PT0gMCApIHtcblx0XHRcdGxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgc2F2ZUJ0bnMgPSAkKCcuc2F2ZTpkaXNhYmxlZCcpO1xuXHRcdFx0JC5lYWNoKHNhdmVCdG5zLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICggJCh0aGlzKS5pcygnOnZpc2libGUnKSApIHtcblx0XHRcdFx0XHQkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cdFx0fVxuXHR9XG5cdCxcblx0bG9nb3V0X2luaXQgOiAoKSA9PiB7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQnKS50ZXh0KCdMb2cgb3V0Jyk7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHQkKCcuYXV0aC1sb2dpbm91dCcpLnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQnKS5yZW1vdmVBdHRyKCdhcmlhLWRpc2FibGVkJyk7XG5cdFx0JCgnLmF1dGgtbG9naW5vdXQnKS5jbGljayggZnVuY3Rpb24gKCkge1xuXHRcdFx0YXV0aC5sb2dvdXRfZG8oKTtcblx0XHR9KTtcblx0fVxuXHQsXG5cdGxvZ291dF9kbyA6ICgpID0+IHtcblxuXHRcdC8qKlxuXHRcdCAqIE5lZWQgc29tZSBhY3Rpdml0eSBpbmRpY2F0aW9uIGhlcmVcblx0XHQgKi9cblxuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGg/YXV0aF90YXNrPWxvZ291dCcsXG5cdFx0XHR0eXBlOiAnR0VUJyxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRcdGF1dGgubG9nb3V0X3N1Y2Nlc3MoKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XG5cdFx0XHRcdHZhciBlcnJfZGlzcF9tc2c7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XG5cdFx0XHRcdFx0ZXJyX2Rpc3BfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XG5cblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfZGlzcF9tc2cgKyAnXFxuJyArIGVycl9tc2c7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xuXG5cdFx0XHRcdC8vICQoJyNhdXRoX2xvZ2luX2FjdGlvbnNfbXNncycpLnByZXBlbmQoJzxzbWFsbCBjbGFzcz1cIm1zZ19sb2dpblN0YXR1cyBtc2ctd2FybmluZ1wiPlBsZWFzZSBjaGVjayB0aGF0IHRoZSBsb2dpbiBpbmZvIGlzIGNvcnJlY3Q8L3NtYWxsPicpO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9nb3V0X3N1Y2Nlc3MgOiAoKSA9PiB7XG5cdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdH1cbn0pO1xuIl19
