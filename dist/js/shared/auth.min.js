var auth="object"==typeof auth?auth:{};(auth={init:()=>{},sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e,l,t){e.length>0&&o(e)}).fail(function(o,l,t){e(o,l,t)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(o){var e=$(this)[0],l=$(this).val(),t=$(this).closest("form"),n=(t.attr("id"),!1),s=!1;if(e.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:o}=utils.validate_email(l);o?e.setCustomValidity(""):e.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:o,valid_pw_length:n,valid_pw_length_msg:s,valid_ltrCases:a,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:c}=utils.validate_pw(l);o&&e.setCustomValidity("");let d="";n?$(t).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),d+=s),a?$(t).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),d+=i),r?$(t).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),d+=c),e.setCustomValidity(d)}e.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(e.validationMessage)),""!==$.trim(t.find("input[type=email]").val())&&""!==$.trim(t.find("input[type=password]").val())&&(n=!0),t.find("input[type=email]").is(":valid")&&t.find("input[type=password]").is(":valid")&&(s=!0),n&&s?(!0,$("#auth_login_do").attr("disabled",!1)):(!1,$("#auth_login_do").attr("disabled",!0))})},show_login_modal:()=>{$.get("components/_auth_login.html",function(o){$("body").append(o),$("#auth_login_modal").on("show.bs.modal",function(o){auth.input_validation(),$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(o){13===o.which&&($("#auth_login_do").attr("disabled",!0),auth.login_do())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(o){o.preventDefault(),$("#auth_login_do").attr("disabled",!0),auth.login_do()})}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(l),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var l={auth_task:e};$.each($("#"+o+" input"),function(o,e){var t=$(e).attr("data-authfld"),n=$(e).val();l[t]=n}),console.log(l);var t=JSON.stringify(l);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),window.location.reload(!0)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;t=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,l){var t=$(l).attr("id"),n=$(l).val();o[t]=n}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_do:()=>{console.log("login_do");var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,l){var t=$(l).attr("data-authfld"),n=$(l).val();o[t]=n}),console.log("req_obj: "),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),auth.login_success(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_success:o=>{location.reload()}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJpbml0Iiwic2VzaF9jaGVjayIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiJCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwidGV4dFN0YXR1cyIsImpxWEhSIiwibGVuZ3RoIiwiZmFpbCIsImVycm9yVGhyb3duIiwiaW5wdXRfdmFsaWRhdGlvbiIsIm9uIiwiZSIsImZsZF9lbCIsInRoaXMiLCJmbGRfdmFsIiwidmFsIiwiZmxkX3BhcmVudEZvcm0iLCJjbG9zZXN0IiwiZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSIsImF0dHIiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJ2YWxpZF9lbWwiLCJ1dGlscyIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRfcHciLCJ2YWxpZF9wd19sZW5ndGgiLCJ2YWxpZF9wd19sZW5ndGhfbXNnIiwidmFsaWRfbHRyQ2FzZXMiLCJ2YWxpZF9sdHJDYXNlc19tc2ciLCJ2YWxpZF9wd19zcGNDaGFyIiwidmFsaWRfcHdfc3BjQ2hhcl9tc2ciLCJ2YWxpZGF0ZV9wdyIsImN1c3RvbVZhbGlkYXRpb25Nc2ciLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNoZWNrVmFsaWRpdHkiLCJjb25zb2xlIiwibG9nIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ0cmltIiwiaXMiLCJzaG93X2xvZ2luX21vZGFsIiwiZ2V0IiwidGhlR290dGVuIiwiYXBwZW5kIiwib2ZmIiwia2V5cHJlc3MiLCJ3aGljaCIsImxvZ2luX2RvIiwicHJldmVudERlZmF1bHQiLCJtb2RhbCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJpdG0iLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwiZXJyX3N0YXR1c0NvZGUiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInB3X3NldF9kbyIsInRhc2siLCJhbGVydCIsImxvZ2luX3N1Y2Nlc3MiLCJyZXNwT2JqIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxLQUEyQixpQkFBWCxLQUF3QkEsS0FBTyxJQUNsREEsS0FBTyxDQUNQQyxLQUFPLE9BSVBDLFdBQWEsSUFDTCxJQUFJQyxRQUFTLENBQUNDLEVBQVNDLEtBQzVCQyxFQUFFQyxLQUFLLENBQ1BDLElBQUssOEJBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFXQyxFQUFNQyxFQUFZQyxHQUtqQ0YsRUFBS0csT0FBUyxHQUNqQlYsRUFBUU8sS0FFUEksS0FBTSxTQUFXRixFQUFPRCxFQUFZSSxHQUN0Q1gsRUFBT1EsRUFBT0QsRUFBWUksT0FLN0JDLGlCQUFtQixLQUNsQlgsRUFBRSxRQUFRWSxHQUFHLGVBQWdCLG1CQUFvQixTQUFVQyxHQUMxRCxJQUFJQyxFQUFTZCxFQUFFZSxNQUFNLEdBQ2pCQyxFQUFVaEIsRUFBRWUsTUFBTUUsTUFDbEJDLEVBQWlCbEIsRUFBRWUsTUFBTUksUUFBUSxRQUdqQ0MsR0FGb0JGLEVBQWVHLEtBQUssT0FFTixHQUNsQ0MsR0FBK0IsRUFLbkMsR0FGQVIsRUFBT1Msa0JBQWtCLElBRUssVUFBekJ2QixFQUFFZSxNQUFNTSxLQUFLLFFBQXNCLENBQ3ZDLElBQUlHLFVBQUVBLEdBQWNDLE1BQU1DLGVBQWVWLEdBRXBDUSxFQUNKVixFQUFPUyxrQkFBa0IsSUFFekJULEVBQU9TLGtCQUFrQiwwQ0FJM0IsR0FBOEIsYUFBekJ2QixFQUFFZSxNQUFNTSxLQUFLLFFBQXlCLENBQzFDLElBQUlNLFNBQ0hBLEVBQVFDLGdCQUNSQSxFQUFlQyxvQkFDZkEsRUFBbUJDLGVBQ25CQSxF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QXNCLGFBSTFDRCxFQUFXckUsRUFBTXdFLGFBR2xCSSxNQUFNLFdBQWFQLElBRXBCSSxTQUFVLFdBRVR4QyxRQUFRQyxJQUFJLHNCQU1mMkMsY0FBaUJDLElBQ2hCWixTQUFTQyxZQUVSL0UiLCJmaWxlIjoianMvc2hhcmVkL2F1dGgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIGF1dGguanMgKi9cclxudmFyIGF1dGggPSAoIHR5cGVvZiAoYXV0aCkgPT09ICdvYmplY3QnICkgPyBhdXRoIDoge307XHJcbihhdXRoID0ge1xyXG5cdGluaXQgOiAoKSA9PiB7XHJcblx0XHQvLyBhdXRoLnNlc2hfY2hlY2soKTtcclxuXHR9XHJcblx0LFxyXG5cdHNlc2hfY2hlY2sgOiAoKSA9PiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdFx0ZGF0YVR5cGU6ICdqc29uJ1xyXG5cdFx0XHR9KS5kb25lKCBmdW5jdGlvbiAoIHJlc3AsIHRleHRTdGF0dXMsIGpxWEhSICkge1xyXG5cclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnYXV0aF9zZXNoX2NoZWNrIHJlc3A6ICcpO1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3ApO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzcC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3ApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkuZmFpbCggZnVuY3Rpb24gKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XHJcblx0XHRcdFx0cmVqZWN0KGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSlcclxuXHR9XHJcblx0LFxyXG5cdGlucHV0X3ZhbGlkYXRpb24gOiAoKSA9PiB7XHJcblx0XHQkKCdib2R5Jykub24oJ2lucHV0IGNoYW5nZScsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XHJcblx0XHRcdHZhciBmbGRfdmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9pZCA9IGZsZF9wYXJlbnRGb3JtLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV92YWxpZCA9IGZhbHNlO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IGZhbHNlO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xyXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCAkKHRoaXMpLmF0dHIoJ3R5cGUnKSA9PT0gJ2VtYWlsJyApIHtcclxuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRpZiAoIHZhbGlkX2VtbCApIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnR29ubmEgbmVlZCBhIHZhbGlkIGVtYWlsIHRoZXJlLCBjaGllZi4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdwYXNzd29yZCcgKSB7XHJcblx0XHRcdFx0bGV0IHsgXHJcblx0XHRcdFx0XHR2YWxpZF9wdywgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGgsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoX21zZywgXHJcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlcywgXHJcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlc19tc2csIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhciwgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyX21zZyBcclxuXHRcdFx0XHR9ID0gdXRpbHMudmFsaWRhdGVfcHcoZmxkX3ZhbCk7XHJcblxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCd2YWxpZF9wdzogJyk7XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2codmFsaWRfcHcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICggdmFsaWRfcHcgKSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bGV0IGN1c3RvbVZhbGlkYXRpb25Nc2cgPSAnJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19sZW5ndGggKSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX21pbkxlbmd0aCcpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfcHdfbGVuZ3RoX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfbHRyQ2FzZXMgKSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX2x0ckNhc2VzX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19zcGNDaGFyICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X3NwY0NoYXJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KGN1c3RvbVZhbGlkYXRpb25Nc2cpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1ZhbGlkaXR5U3RhdGUgKi9cclxuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC52YWxpZGl0eTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7ICovXHJcblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwuY2hlY2tWYWxpZGl0eSgpOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLmNoZWNrVmFsaWRpdHkoKSk7ICovXHJcblxyXG5cdFx0XHQvKiogVGhpcyBkZWxpdmVycyB0aGUgY3VzdG9tIHZhbGlkYXRpb24gbWVzc2FnZXMgKi9cclxuXHRcdFx0dmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcclxuXHJcblx0XHRcdGlmICghZmxkX2lzVmFsaWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnRmxkIGludmFsaWQuIGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZTogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLnZhbGlkYXRpb25NZXNzYWdlKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ0ZsZCBpcyB2YWxpZCEnKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLmlzKCc6dmFsaWQnKSAmJiBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLmlzKCc6dmFsaWQnKSApIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgJiYgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCkge1xyXG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gdHJ1ZTtcclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gZmFsc2U7XHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdHNob3dfbG9naW5fbW9kYWwgOiAoKSA9PiB7XHJcblx0XHQkLmdldCgnY29tcG9uZW50cy9fYXV0aF9sb2dpbi5odG1sJywgZnVuY3Rpb24gKHRoZUdvdHRlbikge1xyXG5cdFx0XHQkKCdib2R5JykuYXBwZW5kKHRoZUdvdHRlbik7XHJcblxyXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRhdXRoLmlucHV0X3ZhbGlkYXRpb24oKTtcclxuXHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5vZmYoJ2tleXByZXNzJyk7XHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW4gaW5wdXQnKS5rZXlwcmVzcyggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRcdGlmIChlLndoaWNoID09PSAxMykge1xyXG5cdFx0XHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRhdXRoLmxvZ2luX2RvKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub2ZmKCdjbGljaycpO1xyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBpZiAoICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggJCgnI2F1dGhfbG9naW4nKS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgIT09ICcnICkge1xyXG5cdFx0XHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRhdXRoLmxvZ2luX2RvKCk7XHJcblx0XHRcdFx0XHQvLyB9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ25vdCBzbyBzdWJtaXQuLi4nKTtcclxuXHJcblx0XHRcdFx0XHQvLyB9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGF1dGhfZG8gOiAoZm9ybV9pcykgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIGF1dGhfdGFzaztcclxuXHJcblx0XHRzd2l0Y2ggKGZvcm1faXMpIHtcclxuXHRcdFx0Y2FzZSAnYXV0aF9wd19zZXQnOlxyXG5cdFx0XHRcdGF1dGhfdGFzayA9ICdhdXRoX3B3X3NldCc7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdhdXRoX2xvZ2luJzpcclxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9sb2dpbic7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCdhdXRoX3Rhc2snOiBhdXRoX3Rhc2tcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjJyArIGZvcm1faXMgKyAnIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcclxuXHJcblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcclxuXHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGVycl9zdGF0dXNDb2RlID09PSA0MDEpIHtcclxuXHRcdFx0XHRcdFx0LyoqIFRoZSB1c2VyIGVudGVyZWQgaW52YWxpZCBjcmVkZW50aWFscyAqL1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ0NvbW11bmljYXRlIHRoZSBzcGVjaWZpYyBhdXRoZW50aWNhdGlvbiBwcm9ibGVtIHRvIHVzZXInKVxyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRwd19zZXRfZG8gOiAoKSA9PiB7XHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J3Rhc2snOiAncHdfc2V0J1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goICQoJyNhdXRoX3B3X3NldCBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignaWQnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcclxuXHJcblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGFsZXJ0KCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRsb2dpbl9kbyA6ICgpID0+IHtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnbG9naW5fZG8nKTtcclxuXHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J2F1dGhfdGFzayc6ICdhdXRoX2xvZ2luJ1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goICQoJyNhdXRoX2xvZ2luIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcclxuXHJcblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygncmVxX29iajogJyk7XHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0YXV0aC5sb2dpbl9zdWNjZXNzKHJlc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRhbGVydCgnRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0bG9naW5fc3VjY2VzcyA6IChyZXNwT2JqKSA9PiB7XHJcblx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcclxuXHR9XHJcbn0pLmluaXQoKTtcclxuIl19
