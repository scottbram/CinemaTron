var auth="object"==typeof auth?auth:{};auth={sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e,l,t){e.length>0&&o(e)}).fail(function(o,l,t){e(o,l,t)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(o){var e=$(this)[0],l=$(this).val(),t=$(this).closest("form"),a=(t.attr("id"),!1),n=!1;if(e.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:o}=utils.validate_email(l);o?e.setCustomValidity(""):e.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:o,valid_pw_length:a,valid_pw_length_msg:n,valid_ltrCases:s,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:d}=utils.validate_pw(l);o&&e.setCustomValidity("");let c="";a?$(t).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),c+=n),s?$(t).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),c+=i),r?$(t).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),c+=d),e.setCustomValidity(c)}e.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(e.validationMessage)),""!==$.trim(t.find("input[type=email]").val())&&""!==$.trim(t.find("input[type=password]").val())&&(a=!0),t.find("input[type=email]").is(":valid")&&t.find("input[type=password]").is(":valid")&&(n=!0),a&&n?(!0,$("#auth_login_do").attr("disabled",!1)):(!1,$("#auth_login_do").attr("disabled",!0))})},show_login_modal:()=>{$.get("components/_auth_login.html",function(o){$("body").append(o),$("#auth_login_modal").on("show.bs.modal",function(o){auth.input_validation(),setTimeout(function(){$(".auth_form").trigger("change")},500),$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(o){13===o.which&&($("#auth_login_do").attr("disabled",!0),auth.login_do())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(o){o.preventDefault(),$("#auth_login_do").attr("disabled",!0),auth.login_do()})}),$("#auth_login_modal").on("hidden.bs.modal",function(o){$("#auth_login_modal").modal("dispose"),$("#auth_login_modal").remove()}),$("#auth_login_modal").modal({backdrop:"static"}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(console.log(l),o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var l={auth_task:e};$.each($("#"+o+" input"),function(o,e){var t=$(e).attr("data-authfld"),a=$(e).val();l[t]=a}),console.log(l);var t=JSON.stringify(l);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),window.location.reload(!0)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;t=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,l){var t=$(l).attr("id"),a=$(l).val();o[t]=a}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_do:()=>{console.log("login_do");var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,l){var t=$(l).attr("data-authfld"),a=$(l).val();o[t]=a}),console.log("req_obj: "),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,l){console.log("success event"),console.log("resp: "),console.log(o),auth.login_success(o)},error:function(o,e,l){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(l),void 0!==o.responseJSON){t=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else t=o.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},login_success:()=>{if(0===$(".valChg").length)location.reload();else{var o=$(".save:disabled");$.each(o,function(o,e){$(this).is(":visible")&&$(this).prop("disabled",!1)}),$("#auth_login_modal").modal("hide")}}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJzZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3AiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJsZW5ndGgiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJpbnB1dF92YWxpZGF0aW9uIiwib24iLCJlIiwiZmxkX2VsIiwidGhpcyIsImZsZF92YWwiLCJ2YWwiLCJmbGRfcGFyZW50Rm9ybSIsImNsb3Nlc3QiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5IiwiYXR0ciIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQiLCJzZXRDdXN0b21WYWxpZGl0eSIsInZhbGlkX2VtbCIsInV0aWxzIiwidmFsaWRhdGVfZW1haWwiLCJ2YWxpZF9wdyIsInZhbGlkX3B3X2xlbmd0aCIsInZhbGlkX3B3X2xlbmd0aF9tc2ciLCJ2YWxpZF9sdHJDYXNlcyIsInZhbGlkX2x0ckNhc2VzX21zZyIsInZhbGlkX3B3X3NwY0NoYXIiLCJ2YWxpZF9wd19zcGNDaGFyX21zZyIsInZhbGlkYXRlX3B3IiwiY3VzdG9tVmFsaWRhdGlvbk1zZyIsImZpbmQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiY2hlY2tWYWxpZGl0eSIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRyaW0iLCJpcyIsInNob3dfbG9naW5fbW9kYWwiLCJnZXQiLCJ0aGVHb3R0ZW4iLCJhcHBlbmQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsIm9mZiIsImtleXByZXNzIiwid2hpY2giLCJsb2dpbl9kbyIsInByZXZlbnREZWZhdWx0IiwibW9kYWwiLCJyZW1vdmUiLCJiYWNrZHJvcCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJpdG0iLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwiZXJyX3N0YXR1c0NvZGUiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInB3X3NldF9kbyIsInRhc2siLCJsb2dpbl9zdWNjZXNzIiwic2F2ZUJ0bnMiLCJpdGVtIiwicHJvcCJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsS0FBMkIsaUJBQVgsS0FBd0JBLEtBQU8sR0FDbERBLEtBQU8sQ0FDUEMsV0FBYSxJQUNMLElBQUlDLFFBQVMsQ0FBQ0MsRUFBU0MsS0FDNUJDLEVBQUVDLEtBQUssQ0FDUEMsSUFBSyw4QkFDTEMsU0FBVSxTQUNSQyxLQUFNLFNBQVdDLEVBQU1DLEVBQVlDLEdBS2pDRixFQUFLRyxPQUFTLEdBQ2pCVixFQUFRTyxLQUVQSSxLQUFNLFNBQVdGLEVBQU9ELEVBQVlJLEdBQ3RDWCxFQUFPUSxFQUFPRCxFQUFZSSxPQUs3QkMsaUJBQW1CLEtBQ2xCWCxFQUFFLFFBQVFZLEdBQUcsZUFBZ0IsbUJBQW9CLFNBQVVDLEdBQzFELElBQUlDLEVBQVNkLEVBQUVlLE1BQU0sR0FDakJDLEVBQVVoQixFQUFFZSxNQUFNRSxNQUNsQkMsRUFBaUJsQixFQUFFZSxNQUFNSSxRQUFRLFFBR2pDQyxHQUZvQkYsRUFBZUcsS0FBSyxPQUVOLEdBQ2xDQyxHQUErQixFQUtuQyxHQUZBUixFQUFPUyxrQkFBa0IsSUFFSyxVQUF6QnZCLEVBQUVlLE1BQU1NLEtBQUssUUFBc0IsQ0FDdkMsSUFBSUcsVUFBRUEsR0FBY0MsTUFBTUMsZUFBZVYsR0FFcENRLEVBQ0pWLEVBQU9TLGtCQUFrQixJQUV6QlQsRUFBT1Msa0JBQWtCLDBDQUkzQixHQUE4QixhQUF6QnZCLEVBQUVlLE1BQU1NLEtBQUssUUFBeUIsQ0FDMUMsSUFBSU0sU0FDSEEsRUFBUUMsZ0JB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UUFBUUMsSUFBSSxXQUNaRCxRQUFRQyxJQUFJbEMsR0FFWmlDLFFBQVFDLElBQUksZ0JBQ1pELFFBQVFDLElBQUluQyxHQUVaa0MsUUFBUUMsSUFBSSxpQkFDWkQsUUFBUUMsSUFBSS9CLFFBSXNCLElBQXZCSCxFQUFNMEUsYUFBOEIsQ0FLOUNELEVBSnFCekUsRUFBTTBFLGFBQXlCLFdBSXhCLEtBSGYxRSxFQUFNMEUsYUFBb0IsTUFHSyxLQUY5QjFFLEVBQU0wRSxhQUFzQixhQUkxQ0QsRUFBV3pFLEVBQU00RSxhQUdsQjNDLFFBQVF1QyxNQUFNLFdBQWFDLElBRTVCSSxTQUFVLFdBRVQ1QyxRQUFRQyxJQUFJLHNCQU1mOEMsY0FBZ0IsS0FDZixHQUE2QixJQUF4QnZGLEVBQUUsV0FBV1EsT0FDakJxRSxTQUFTQyxhQUNILENBQ04sSUFBSVUsRUFBV3hGLEVBQUUsa0JBQ2pCQSxFQUFFK0QsS0FBS3lCLEVBQVUsU0FBVXhCLEVBQUt5QixHQUMxQnpGLEVBQUVlLE1BQU02QixHQUFHLGFBQ2Y1QyxFQUFFZSxNQUFNMkUsS0FBSyxZQUFZLEtBSTNCMUYsRUFBRSxxQkFBcUJ3RCxNQUFNIiwiZmlsZSI6ImpzL3NoYXJlZC9hdXRoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBhdXRoLmpzICovXHJcbnZhciBhdXRoID0gKCB0eXBlb2YgKGF1dGgpID09PSAnb2JqZWN0JyApID8gYXV0aCA6IHt9O1xyXG4oYXV0aCA9IHtcclxuXHRzZXNoX2NoZWNrIDogKCkgPT4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcclxuXHRcdFx0fSkuZG9uZSggZnVuY3Rpb24gKCByZXNwLCB0ZXh0U3RhdHVzLCBqcVhIUiApIHtcclxuXHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ2F1dGhfc2VzaF9jaGVjayByZXNwOiAnKTtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLmZhaWwoIGZ1bmN0aW9uICgganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pXHJcblx0fVxyXG5cdCxcclxuXHRpbnB1dF92YWxpZGF0aW9uIDogKCkgPT4ge1xyXG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnLmF1dGhfZm9ybSBpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBmbGRfZWwgPSAkKHRoaXMpWzBdO1xyXG5cdFx0XHR2YXIgZmxkX3ZhbCA9ICQodGhpcykudmFsKCk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1faWQgPSBmbGRfcGFyZW50Rm9ybS5hdHRyKCdpZCcpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8qKiBEbyBzb21lIHZhbGlkYXRpb24gKi9cclxuXHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdlbWFpbCcgKSB7XHJcblx0XHRcdFx0bGV0IHsgdmFsaWRfZW1sIH0gPSB1dGlscy52YWxpZGF0ZV9lbWFpbChmbGRfdmFsKTtcclxuXHJcblx0XHRcdFx0aWYgKCB2YWxpZF9lbWwgKSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJ0dvbm5hIG5lZWQgYSB2YWxpZCBlbWFpbCB0aGVyZSwgY2hpZWYuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnICkge1xyXG5cdFx0XHRcdGxldCB7IFxyXG5cdFx0XHRcdFx0dmFsaWRfcHcsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoLCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aF9tc2csIFxyXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXMsIFxyXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXNfbXNnLCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXIsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhcl9tc2cgXHJcblx0XHRcdFx0fSA9IHV0aWxzLnZhbGlkYXRlX3B3KGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygndmFsaWRfcHc6ICcpO1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHZhbGlkX3B3KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIHZhbGlkX3B3ICkge1xyXG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGxldCBjdXN0b21WYWxpZGF0aW9uTXNnID0gJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfbGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X2xlbmd0aF9tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIXZhbGlkX2x0ckNhc2VzICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblxyXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9sdHJDYXNlc19tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXMnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfc3BjQ2hhciApIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblxyXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19zcGNDaGFyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGF0aW9uTXNnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwudmFsaWRpdHk6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpOyAqL1xyXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC5jaGVja1ZhbGlkaXR5KCkpOyAqL1xyXG5cclxuXHRcdFx0LyoqIFRoaXMgZGVsaXZlcnMgdGhlIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2VzICovXHJcblx0XHRcdHZhciBmbGRfaXNWYWxpZCA9IGZsZF9lbC5jaGVja1ZhbGlkaXR5KCk7XHJcblxyXG5cdFx0XHRpZiAoIWZsZF9pc1ZhbGlkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpbnZhbGlkLiBmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2U6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdGbGQgaXMgdmFsaWQhJyk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApICE9PSAnJyAmJiAkLnRyaW0oIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykudmFsKCkgKSAhPT0gJycgKSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgJiYgZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ICYmIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQpIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IHRydWU7XHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IGZhbHNlO1xyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzaG93X2xvZ2luX21vZGFsIDogKCkgPT4ge1xyXG5cdFx0JC5nZXQoJ2NvbXBvbmVudHMvX2F1dGhfbG9naW4uaHRtbCcsIGZ1bmN0aW9uICh0aGVHb3R0ZW4pIHtcclxuXHRcdFx0JCgnYm9keScpLmFwcGVuZCh0aGVHb3R0ZW4pO1xyXG5cclxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5vbignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0YXV0aC5pbnB1dF92YWxpZGF0aW9uKCk7XHJcblxyXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdCQoJy5hdXRoX2Zvcm0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdFx0XHR9LCA1MDApO1xyXG5cclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLm9mZigna2V5cHJlc3MnKTtcclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLmtleXByZXNzKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdFx0aWYgKGUud2hpY2ggPT09IDEzKSB7XHJcblx0XHRcdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGF1dGgubG9naW5fZG8oKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5vZmYoJ2NsaWNrJyk7XHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRcdC8vIGlmICggJC50cmltKCAkKCcjYXV0aF9sb2dpbicpLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykudmFsKCkgKSAhPT0gJycgJiYgJC50cmltKCAkKCcjYXV0aF9sb2dpbicpLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykudmFsKCkgKSAhPT0gJycgKSB7XHJcblx0XHRcdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGF1dGgubG9naW5fZG8oKTtcclxuXHRcdFx0XHRcdC8vIH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnbm90IHNvIHN1Ym1pdC4uLicpO1xyXG5cclxuXHRcdFx0XHRcdC8vIH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoJ2Rpc3Bvc2UnKTtcclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9tb2RhbCcpLnJlbW92ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdCQoJyNhdXRoX2xvZ2luX21vZGFsJykubW9kYWwoe1xyXG5cdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRhdXRoX2RvIDogKGZvcm1faXMpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xyXG5cclxuXHRcdHZhciBhdXRoX3Rhc2s7XHJcblxyXG5cdFx0c3dpdGNoIChmb3JtX2lzKSB7XHJcblx0XHRcdGNhc2UgJ2F1dGhfcHdfc2V0JzpcclxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9wd19zZXQnO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnYXV0aF9sb2dpbic6XHJcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfbG9naW4nO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnYXV0aF90YXNrJzogYXV0aF90YXNrXHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZWFjaCggJCgnIycgKyBmb3JtX2lzICsgJyBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cclxuXHRcdFx0XHRcdGlmIChlcnJfc3RhdHVzQ29kZSA9PT0gNDAxKSB7XHJcblx0XHRcdFx0XHRcdC8qKiBUaGUgdXNlciBlbnRlcmVkIGludmFsaWQgY3JlZGVudGlhbHMgKi9cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdDb21tdW5pY2F0ZSB0aGUgc3BlY2lmaWMgYXV0aGVudGljYXRpb24gcHJvYmxlbSB0byB1c2VyJylcclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0cHdfc2V0X2RvIDogKCkgPT4ge1xyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCd0YXNrJzogJ3B3X3NldCdcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRsb2dpbl9kbyA6ICgpID0+IHtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnbG9naW5fZG8nKTtcclxuXHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J2F1dGhfdGFzayc6ICdhdXRoX2xvZ2luJ1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goICQoJyNhdXRoX2xvZ2luIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdkYXRhLWF1dGhmbGQnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcclxuXHJcblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygncmVxX29iajogJyk7XHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0YXV0aC5sb2dpbl9zdWNjZXNzKHJlc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRsb2dpbl9zdWNjZXNzIDogKCkgPT4ge1xyXG5cdFx0aWYgKCAkKCcudmFsQ2hnJykubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciBzYXZlQnRucyA9ICQoJy5zYXZlOmRpc2FibGVkJyk7XHJcblx0XHRcdCQuZWFjaChzYXZlQnRucywgZnVuY3Rpb24gKGlkeCwgaXRlbSkge1xyXG5cdFx0XHRcdGlmICggJCh0aGlzKS5pcygnOnZpc2libGUnKSApIHtcclxuXHRcdFx0XHRcdCQodGhpcykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcbiJdfQ==
