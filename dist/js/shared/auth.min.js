var auth="object"==typeof auth?auth:{};(auth={init:()=>{auth.sesh_check()},sesh_check:()=>new Promise((o,e)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(e,t,l){e.length>0&&o(e)}).fail(function(o,t,l){e(o,t,l)})}),input_validation:()=>{$("body").on("input change",".auth_form input",function(o){var e=$(this)[0],t=$(this).val(),l=$(this).closest("form"),s=(l.attr("id"),!1),n=!1;if(e.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:o}=utils.validate_email(t);o?e.setCustomValidity(""):e.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:o,valid_pw_length:s,valid_pw_length_msg:n,valid_ltrCases:a,valid_ltrCases_msg:i,valid_pw_spcChar:r,valid_pw_spcChar_msg:c}=utils.validate_pw(t);o&&e.setCustomValidity("");let d="";s?$(l).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),d+=n),a?$(l).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),d+=i),r?$(l).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(l).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),d+=c),e.setCustomValidity(d)}e.checkValidity()||(console.log("Fld invalid. fld_el.validationMessage: "),console.log(e.validationMessage)),""!==$.trim(l.find("input[type=email]").val())&&""!==$.trim(l.find("input[type=password]").val())&&(s=!0),l.find("input[type=email]").is(":valid")&&l.find("input[type=password]").is(":valid")&&(n=!0),s&&n?(!0,$("#auth_login_do").attr("disabled",!1)):(!1,$("#auth_login_do").attr("disabled",!0))})},show_login_modal:()=>{$.get("components/_auth_login.html",function(o){$("body").append(o),$("#auth_login_modal").on("show.bs.modal",function(o){auth.input_validation(),$("#auth_login input").off("keypress"),$("#auth_login input").keypress(function(o){13===o.which&&($("#auth_login_do").attr("disabled",!0),auth.login_do())}),$("#auth_login_do").off("click"),$("#auth_login_do").on("click",function(o){o.preventDefault(),$("#auth_login_do").attr("disabled",!0),auth.login_do()})}),$("#auth_login_modal").modal("show")})},auth_do:o=>{var e;switch(o){case"auth_pw_set":e="auth_pw_set";break;case"auth_login":e="auth_login"}var t={auth_task:e};$.each($("#"+o+" input"),function(o,e){var l=$(e).attr("data-authfld"),s=$(e).val();t[l]=s}),console.log(t);var l=JSON.stringify(t);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:l,success:function(o,e,t){console.log("success event"),console.log("resp: "),console.log(o),window.location.reload(!0)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){let e=o.responseJSON.statusCode;l=e+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message,401===e&&console.log("Communicate the specific authentication problem to user")}else l=o.responseText;console.error("Error:\n"+l)},complete:function(){console.log("complete event")}})},pw_set_do:()=>{var o={task:"pw_set"};$.each($("#auth_pw_set input"),function(e,t){var l=$(t).attr("id"),s=$(t).val();o[l]=s}),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,t){console.log("success event"),console.log("resp: "),console.log(o)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;alert("Error:\n"+l)},complete:function(){console.log("complete event")}})},login_do:()=>{console.log("login_do");var o={auth_task:"auth_login"};$.each($("#auth_login input"),function(e,t){var l=$(t).attr("data-authfld"),s=$(t).val();o[l]=s}),console.log("req_obj: "),console.log(o);var e=JSON.stringify(o);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:e,success:function(o,e,t){console.log("success event"),console.log("resp: "),console.log(o),auth.login_success(o)},error:function(o,e,t){var l;if(console.log("error event"),console.log("jqXHR: "),console.log(o),console.log("textStatus: "),console.log(e),console.log("errorThrown: "),console.log(t),void 0!==o.responseJSON){l=o.responseJSON.statusCode+"\n"+o.responseJSON.error+"\n"+o.responseJSON.message}else l=o.responseText;alert("Error:\n"+l)},complete:function(){console.log("complete event")}})},login_success:o=>{location.reload()}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9hdXRoLmpzIl0sIm5hbWVzIjpbImF1dGgiLCJpbml0Iiwic2VzaF9jaGVjayIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiJCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJyZXNwIiwidGV4dFN0YXR1cyIsImpxWEhSIiwibGVuZ3RoIiwiZmFpbCIsImVycm9yVGhyb3duIiwiaW5wdXRfdmFsaWRhdGlvbiIsIm9uIiwiZSIsImZsZF9lbCIsInRoaXMiLCJmbGRfdmFsIiwidmFsIiwiZmxkX3BhcmVudEZvcm0iLCJjbG9zZXN0IiwiZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSIsImF0dHIiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJ2YWxpZF9lbWwiLCJ1dGlscyIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRfcHciLCJ2YWxpZF9wd19sZW5ndGgiLCJ2YWxpZF9wd19sZW5ndGhfbXNnIiwidmFsaWRfbHRyQ2FzZXMiLCJ2YWxpZF9sdHJDYXNlc19tc2ciLCJ2YWxpZF9wd19zcGNDaGFyIiwidmFsaWRfcHdfc3BjQ2hhcl9tc2ciLCJ2YWxpZGF0ZV9wdyIsImN1c3RvbVZhbGlkYXRpb25Nc2ciLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNoZWNrVmFsaWRpdHkiLCJjb25zb2xlIiwibG9nIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ0cmltIiwiaXMiLCJzaG93X2xvZ2luX21vZGFsIiwiZ2V0IiwidGhlR290dGVuIiwiYXBwZW5kIiwib2ZmIiwia2V5cHJlc3MiLCJ3aGljaCIsImxvZ2luX2RvIiwicHJldmVudERlZmF1bHQiLCJtb2RhbCIsImF1dGhfZG8iLCJmb3JtX2lzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJpdG0iLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlcnJvciIsImVycl9kaXNwIiwicmVzcG9uc2VKU09OIiwiZXJyX3N0YXR1c0NvZGUiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsInB3X3NldF9kbyIsInRhc2siLCJhbGVydCIsImxvZ2luX3N1Y2Nlc3MiLCJyZXNwT2JqIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxLQUEyQixpQkFBWCxLQUF3QkEsS0FBTyxJQUNsREEsS0FBTyxDQUNQQyxLQUFPLEtBQ05ELEtBQUtFLGNBR05BLFdBQWEsSUFDTCxJQUFJQyxRQUFTLENBQUNDLEVBQVNDLEtBQzVCQyxFQUFFQyxLQUFLLENBQ1BDLElBQUssOEJBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFXQyxFQUFNQyxFQUFZQyxHQUtqQ0YsRUFBS0csT0FBUyxHQUNqQlYsRUFBUU8sS0FFUEksS0FBTSxTQUFXRixFQUFPRCxFQUFZSSxHQUN0Q1gsRUFBT1EsRUFBT0QsRUFBWUksT0FLN0JDLGlCQUFtQixLQUNsQlgsRUFBRSxRQUFRWSxHQUFHLGVBQWdCLG1CQUFvQixTQUFVQyxHQUMxRCxJQUFJQyxFQUFTZCxFQUFFZSxNQUFNLEdBQ2pCQyxFQUFVaEIsRUFBRWUsTUFBTUUsTUFDbEJDLEVBQWlCbEIsRUFBRWUsTUFBTUksUUFBUSxRQUdqQ0MsR0FGb0JGLEVBQWVHLEtBQUssT0FFTixHQUNsQ0MsR0FBK0IsRUFLbkMsR0FGQVIsRUFBT1Msa0JBQWtCLElBRUssVUFBekJ2QixFQUFFZSxNQUFNTSxLQUFLLFFBQXNCLENBQ3ZDLElBQUlHLFVBQUVBLEdBQWNDLE1BQU1DLGVBQWVWLEdBRXBDUSxFQUNKVixFQUFPUyxrQkFBa0IsSUFFekJULEVBQU9TLGtCQUFrQiwwQ0FJM0IsR0FBOEIsYUFBekJ2QixFQUFFZSxNQUFNTSxLQUFLLFFBQXlCLENBQzFDLElBQUlNLFNBQ0hBLEVBQVFDLGdCQUNSQSxFQUFlQyxvQkFDZkEsRUFB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Q0QsRUFBV3JFLEVBQU13RSxhQUdsQkksTUFBTSxXQUFhUCxJQUVwQkksU0FBVSxXQUVUeEMsUUFBUUMsSUFBSSxzQkFNZjJDLGNBQWlCQyxJQUNoQlosU0FBU0MsWUFFUi9FIiwiZmlsZSI6ImpzL3NoYXJlZC9hdXRoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBhdXRoLmpzICovXHJcbnZhciBhdXRoID0gKCB0eXBlb2YgKGF1dGgpID09PSAnb2JqZWN0JyApID8gYXV0aCA6IHt9O1xyXG4oYXV0aCA9IHtcclxuXHRpbml0IDogKCkgPT4ge1xyXG5cdFx0YXV0aC5zZXNoX2NoZWNrKCk7XHJcblx0fVxyXG5cdCxcclxuXHRzZXNoX2NoZWNrIDogKCkgPT4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcclxuXHRcdFx0fSkuZG9uZSggZnVuY3Rpb24gKCByZXNwLCB0ZXh0U3RhdHVzLCBqcVhIUiApIHtcclxuXHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ2F1dGhfc2VzaF9jaGVjayByZXNwOiAnKTtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLmZhaWwoIGZ1bmN0aW9uICgganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pXHJcblx0fVxyXG5cdCxcclxuXHRpbnB1dF92YWxpZGF0aW9uIDogKCkgPT4ge1xyXG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnLmF1dGhfZm9ybSBpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBmbGRfZWwgPSAkKHRoaXMpWzBdO1xyXG5cdFx0XHR2YXIgZmxkX3ZhbCA9ICQodGhpcykudmFsKCk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1faWQgPSBmbGRfcGFyZW50Rm9ybS5hdHRyKCdpZCcpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8qKiBEbyBzb21lIHZhbGlkYXRpb24gKi9cclxuXHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdlbWFpbCcgKSB7XHJcblx0XHRcdFx0bGV0IHsgdmFsaWRfZW1sIH0gPSB1dGlscy52YWxpZGF0ZV9lbWFpbChmbGRfdmFsKTtcclxuXHJcblx0XHRcdFx0aWYgKCB2YWxpZF9lbWwgKSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJ0dvbm5hIG5lZWQgYSB2YWxpZCBlbWFpbCB0aGVyZSwgY2hpZWYuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnICkge1xyXG5cdFx0XHRcdGxldCB7IFxyXG5cdFx0XHRcdFx0dmFsaWRfcHcsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoLCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aF9tc2csIFxyXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXMsIFxyXG5cdFx0XHRcdFx0dmFsaWRfbHRyQ2FzZXNfbXNnLCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXIsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhcl9tc2cgXHJcblx0XHRcdFx0fSA9IHV0aWxzLnZhbGlkYXRlX3B3KGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygndmFsaWRfcHc6ICcpO1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHZhbGlkX3B3KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIHZhbGlkX3B3ICkge1xyXG5cdFx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGxldCBjdXN0b21WYWxpZGF0aW9uTXNnID0gJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfbGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X2xlbmd0aF9tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIXZhbGlkX2x0ckNhc2VzICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblxyXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9sdHJDYXNlc19tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfbHRyQ2FzZXMnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfc3BjQ2hhciApIHtcclxuXHRcdFx0XHRcdCQoZmxkX3BhcmVudEZvcm0pLmZpbmQoJy52YWxpZEhlbHBfc3BjQ2hhcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblxyXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19zcGNDaGFyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGF0aW9uTXNnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwudmFsaWRpdHk6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpOyAqL1xyXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC5jaGVja1ZhbGlkaXR5KCkpOyAqL1xyXG5cclxuXHRcdFx0LyoqIFRoaXMgZGVsaXZlcnMgdGhlIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2VzICovXHJcblx0XHRcdHZhciBmbGRfaXNWYWxpZCA9IGZsZF9lbC5jaGVja1ZhbGlkaXR5KCk7XHJcblxyXG5cdFx0XHRpZiAoIWZsZF9pc1ZhbGlkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpbnZhbGlkLiBmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2U6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdGbGQgaXMgdmFsaWQhJyk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApICE9PSAnJyAmJiAkLnRyaW0oIGZsZF9wYXJlbnRGb3JtLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJykudmFsKCkgKSAhPT0gJycgKSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgJiYgZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ICYmIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQpIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IHRydWU7XHJcblx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IGZhbHNlO1xyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luX2RvJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRzaG93X2xvZ2luX21vZGFsIDogKCkgPT4ge1xyXG5cdFx0JC5nZXQoJ2NvbXBvbmVudHMvX2F1dGhfbG9naW4uaHRtbCcsIGZ1bmN0aW9uICh0aGVHb3R0ZW4pIHtcclxuXHRcdFx0JCgnYm9keScpLmFwcGVuZCh0aGVHb3R0ZW4pO1xyXG5cclxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5vbignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0YXV0aC5pbnB1dF92YWxpZGF0aW9uKCk7XHJcblxyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykub2ZmKCdrZXlwcmVzcycpO1xyXG5cdFx0XHRcdCQoJyNhdXRoX2xvZ2luIGlucHV0Jykua2V5cHJlc3MoIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMTMpIHtcclxuXHRcdFx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0YXV0aC5sb2dpbl9kbygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLm9mZignY2xpY2snKTtcclxuXHRcdFx0XHQkKCcjYXV0aF9sb2dpbl9kbycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gaWYgKCAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS52YWwoKSApICE9PSAnJyAmJiAkLnRyaW0oICQoJyNhdXRoX2xvZ2luJykuZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRcdFx0JCgnI2F1dGhfbG9naW5fZG8nKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0YXV0aC5sb2dpbl9kbygpO1xyXG5cdFx0XHRcdFx0Ly8gfSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdub3Qgc28gc3VibWl0Li4uJyk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0JCgnI2F1dGhfbG9naW5fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRhdXRoX2RvIDogKGZvcm1faXMpID0+IHtcclxuXHRcdHZhciBhdXRoX3Rhc2s7XHJcblxyXG5cdFx0c3dpdGNoIChmb3JtX2lzKSB7XHJcblx0XHRcdGNhc2UgJ2F1dGhfcHdfc2V0JzpcclxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9wd19zZXQnO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnYXV0aF9sb2dpbic6XHJcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfbG9naW4nO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnYXV0aF90YXNrJzogYXV0aF90YXNrXHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZWFjaCggJCgnIycgKyBmb3JtX2lzICsgJyBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cclxuXHRcdFx0XHRcdGlmIChlcnJfc3RhdHVzQ29kZSA9PT0gNDAxKSB7XHJcblx0XHRcdFx0XHRcdC8qKiBUaGUgdXNlciBlbnRlcmVkIGludmFsaWQgY3JlZGVudGlhbHMgKi9cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdDb21tdW5pY2F0ZSB0aGUgc3BlY2lmaWMgYXV0aGVudGljYXRpb24gcHJvYmxlbSB0byB1c2VyJylcclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0cHdfc2V0X2RvIDogKCkgPT4ge1xyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCd0YXNrJzogJ3B3X3NldCdcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRhbGVydCgnRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0bG9naW5fZG8gOiAoKSA9PiB7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coJ2xvZ2luX2RvJyk7XHJcblxyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCdhdXRoX3Rhc2snOiAnYXV0aF9sb2dpbidcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coJ3JlcV9vYmo6ICcpO1xyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHRcdGF1dGgubG9naW5fc3VjY2VzcyhyZXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcclxuXHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGxvZ2luX3N1Y2Nlc3MgOiAocmVzcE9iaikgPT4ge1xyXG5cdFx0bG9jYXRpb24ucmVsb2FkKCk7XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
