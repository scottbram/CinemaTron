var sitewide="object"==typeof sitewide?sitewide:{};(sitewide={init:()=>{sitewide.track_changes_auth(),$("#auth_pw_set, #auth_login").on("submit",function(e){if(e.preventDefault(),""!==$.trim($(this).find("input[type=email]").val())&&""!==$.trim($(this).find("input[type=password]").val())){console.log("submit");let e=$(this).attr("id");sitewide.auth_do(e)}else console.log("not so submit...")}),window.setTimeout(function(){$("body").css("visibility","visible")},200)},track_changes_auth:()=>{$("body").on("input change",".auth_form input",function(e){var o=$(this)[0],s=$(this).val(),t=$(this).closest("form"),n=(t.attr("id"),!1),l=!1;if(""!==$.trim(t.find("input[type=email]").val())&&""!==$.trim(t.find("input[type=password]").val())&&(n=!0),t.find("input[type=email]").is(":valid")&&t.find("input[type=password]").is(":valid")&&(l=!0),n&&l&&(!0,t.find("button[type=submit]").attr("disabled",!1)),o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:e}=utils.validate_email(s);e?o.setCustomValidity(""):o.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:e,valid_pw_length:n,valid_pw_length_msg:l,valid_cases:i,valid_cases_msg:a,valid_pw_spcChar:r,valid_pw_spcChar_msg:c}=utils.validate_pw(s);console.log("valid_pw: "),console.log(e),e&&o.setCustomValidity("");let d="";n?$(t).find("#auth_pw_set_hint_minLength").removeClass("invalid").addClass("valid"):($(t).find("#auth_pw_set_hint_minLength").removeClass("valid").addClass("invalid"),d+=l),i?$(t).find("#auth_pw_set_hint_cases").removeClass("invalid").addClass("valid"):($(t).find("#auth_pw_set_hint_cases").removeClass("valid").addClass("invalid"),d+=a),r?$(t).find("#auth_pw_set_hint_spcChar").removeClass("invalid").addClass("valid"):($(t).find("#auth_pw_set_hint_spcChar").removeClass("valid").addClass("invalid"),d+=c),o.setCustomValidity(d)}o.checkValidity()?console.log("Fld is valid!"):(console.log("Fld invalid. fld_el.validationMessage: "),console.log(o.validationMessage))})},auth_do:e=>{var o;switch(e){case"auth_pw_set":o="pw_set";break;case"auth_login":o="login"}var s={auth_task:o};$.each($("#"+e+" input"),function(e,o){var t=$(o).attr("data-authfld"),n=$(o).val();s[t]=n}),console.log(s);var t=JSON.stringify(s);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){t=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else t=e.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})},auth_pw_set_do:()=>{var e={task:"pw_set"};$.each($("#auth_pw_set input"),function(o,s){var t=$(s).attr("id"),n=$(s).val();e[t]=n}),console.log(e);var o=JSON.stringify(e);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:o,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){t=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else t=e.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})},auth_login_do:()=>{var e={task:"login"};$.each($("#auth_login input"),function(o,s){var t=$(s).attr("id"),n=$(s).val();e[t]=n}),console.log(e);var o=JSON.stringify(e);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:o,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){t=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else t=e.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9zaXRlLmpzIl0sIm5hbWVzIjpbInNpdGV3aWRlIiwiaW5pdCIsInRyYWNrX2NoYW5nZXNfYXV0aCIsIiQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJ0aGlzIiwiZmluZCIsInZhbCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtX2lzIiwiYXR0ciIsImF1dGhfZG8iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiY3NzIiwiZmxkX2VsIiwiZmxkX3ZhbCIsImZsZF9wYXJlbnRGb3JtIiwiY2xvc2VzdCIsImZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkIiwiaXMiLCJzZXRDdXN0b21WYWxpZGl0eSIsInZhbGlkX2VtbCIsInV0aWxzIiwidmFsaWRhdGVfZW1haWwiLCJ2YWxpZF9wdyIsInZhbGlkX3B3X2xlbmd0aCIsInZhbGlkX3B3X2xlbmd0aF9tc2ciLCJ2YWxpZF9jYXNlcyIsInZhbGlkX2Nhc2VzX21zZyIsInZhbGlkX3B3X3NwY0NoYXIiLCJ2YWxpZF9wd19zcGNDaGFyX21zZyIsInZhbGlkYXRlX3B3IiwiY3VzdG9tVmFsaWRhdGlvbk1zZyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGVja1ZhbGlkaXR5IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJhdXRoX3Rhc2siLCJyZXFfb2JqIiwiZWFjaCIsImlkeCIsIml0bSIsImZsZE5hbWUiLCJmbGRWYWwiLCJyZXFfc3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsInJlc3AiLCJ0ZXh0U3RhdHVzIiwianFYaHIiLCJlcnJvciIsImpxWEhSIiwiZXJyb3JUaHJvd24iLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsInJlc3BvbnNlVGV4dCIsImFsZXJ0IiwiY29tcGxldGUiLCJhdXRoX3B3X3NldF9kbyIsInRhc2siLCJhdXRoX2xvZ2luX2RvIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxTQUFtQyxpQkFBZixTQUE0QkEsU0FBVyxJQUM5REEsU0FBVyxDQUNYQyxLQUFPLEtBQ05ELFNBQVNFLHFCQW1CVEMsRUFBRSw2QkFBNkJDLEdBQUcsU0FBVSxTQUFVQyxHQUdyRCxHQUZBQSxFQUFFQyxpQkFFeUQsS0FBdERILEVBQUVJLEtBQU1KLEVBQUVLLE1BQU1DLEtBQUsscUJBQXFCQyxRQUEyRSxLQUF6RFAsRUFBRUksS0FBTUosRUFBRUssTUFBTUMsS0FBSyx3QkFBd0JDLE9BQWlCLENBRTlIQyxRQUFRQyxJQUFJLFVBRVosSUFBSUMsRUFBVVYsRUFBRUssTUFBTU0sS0FBSyxNQUMzQmQsU0FBU2UsUUFBUUYsUUFHakJGLFFBQVFDLElBQUksc0JBTWRJLE9BQU9DLFdBQVksV0FDbEJkLEVBQUUsUUFBUWUsSUFBSSxhQUFjLFlBQzFCLE1BR0poQixtQkFBcUIsS0FDcEJDLEVBQUUsUUFBUUMsR0FBRyxlQUFnQixtQkFBb0IsU0FBVUMsR0FDMUQsSUFBSWMsRUFBU2hCLEVBQUVLLE1BQU0sR0FDakJZLEVBQVVqQixFQUFFSyxNQUFNRSxNQUNsQlcsRUFBaUJsQixFQUFFSyxNQUFNYyxRQUFRLFFBR2pDQyxHQUZvQkYsRUFBZVAsS0FBSyxPQUVOLEdBQ2xDVSxHQUErQixFQXdCbkMsR0F0QmtFLEtBQTdEckIsRUFBRUksS0FBTWMsRUFBZVosS0FBSyxxQkFBcUJDLFFBQWtGLEtBQWhFUCxFQUFFSSxLQUFNYyxFQUFlWixLQUFLLHdCQUF3QkMsU0FDM0hhLEdBQWtDLEdBUzlCRixFQUFlWixLQUFLLHFCQUFxQmdCLEdBQUcsV0FBYUosRUFBZVosS0FBSyx3QkFBd0JnQixHQUFHLFlBQzVHRCxHQUErQixHQUc1QkQsR0FBbUNDLEtBQ2YsRUFDdkJILEVBQWVaLEtBQUssdUJBQXVCSyxLQUFLLFlBQVksSUFJN0RLLEVBQU9PLGtCQUFrQixJQUVLLFVBQXpCdkIsRUFBRUssTUFBTU0sS0FBSyxRQUFzQixDQUl2QyxJQUFJYSxVQUFFQSxHQUFjQyxNQUFNQyxlQUFlVCxHQUVwQ08sRUFDSlIsRUFBT08sa0JBQWtCLElBRXpCUCxFQUFPTyxrQkFBa0IsMENBSTNCLEdBQThCLGFBQXpCdkIsRUFBRUssTUFBTU0sS0FBSyxRQUF5QixDQUkxQyxJQUFJZ0IsU0FDSEEsRUFBUUMsZ0JBQ1JBLEVBQWVDLG9CQUNmQSxFQUFtQkMsWUFDbkJBLEVBQVdDLGdCQUNYQSxFQUFlQyxpQkFDZkEsRUFBZ0JDLHFCQUNoQkEsR0FDR1IsTUFBTVMsWUFBWWpCLEdBRXRCVCxRQUFRQyxJQUFJLGNBQ1pELFFBQVFDLElBQUlrQixHQUVQQSxHQUNKWCxFQUFPTyxrQkFBa0IsSUFLMUIsSUFBSVksRUFBc0IsR0FLcEJQLEVBS0w1QixFQUFFa0IsR0FBZ0JaLEtBQUssK0JBQStCOEIsWUFBWSxXQUFXQyxTQUFTLFVBSnRGckMsRUFBRWtCLEdBQWdCWixLQUFLLCtCQUErQjhCLFlBQVksU0FBU0MsU0FBUyxXQUVwRkYsR0FBdUJOLEdBUWxCQyxFQUtMOUIsRUFBRWtCLEdBQWdCWixLQUFLLDJCQUEyQjhCLFlBQVksV0FBV0MsU0FBUyxVQUpsRnJDLEVBQUVrQixHQUFnQlosS0FBSywyQkFBMkI4QixZQUFZLFNBQVNDLFNBQVMsV0FFaEZGLEdBQXVCSixHQVFsQkMsRUFLTGhDLEVBQUVrQixHQUFnQlosS0FBSyw2QkFBNkI4QixZQUFZLFdBQVdDLFNBQVMsVUFKcEZyQyxFQUFFa0IsR0FBZ0JaLEtBQUssNkJBQTZCOEIsWUFBWSxTQUFTQyxTQUFTLFdBRWxGRixHQUF1QkYsR0FLeEJqQixFQUFPTyxrQkFBa0JZLEdBVVJuQixFQUFPc0IsZ0JBU3hCOUIsUUFBUUMsSUFBSSxrQkFMWkQsUUFBUUMsSUFBSSwyQ0FDWkQsUUFBUUMsSUFBSU8sRUFBT3VCLHVCQVV0QjNCLFFBQVdGLElBQ1YsSUFBSThCLEVBRUosT0FBUTlCLEdBQ1AsSUFBSyxjQUNKOEIsRUFBWSxTQUNiLE1BQ0EsSUFBSyxhQUNKQSxFQUFZLFFBR2QsSUFBSUMsRUFBVSxDQUNiRCxVQUFhQSxHQUdkeEMsRUFBRTBDLEtBQU0xQyxFQUFFLElBQU1VLEVBQVUsVUFBVyxTQUFVaUMsRUFBS0MsR0FDbkQsSUFBSUMsRUFBVTdDLEVBQUU0QyxHQUFLakMsS0FBSyxnQkFDdEJtQyxFQUFTOUMsRUFBRTRDLEdBQUtyQyxNQUVwQmtDLEVBQVFJLEdBQVdDLElBR3BCdEMsUUFBUUMsSUFBSWdDLEdBRVosSUFBSU0sRUFBVUMsS0FBS0MsVUFBVVIsR0FFN0J6QyxFQUFFa0QsS0FBSyxDQUNOQyxJQUFLLDhCQUNMQyxLQUFNLE9BQ05DLFlBQWEsbUJBQ2JDLEtBQU1QLEVBQ05RLFFBQVMsU0FBVUMsRUFBTUMsRUFBWUMsR0FFcENsRCxRQUFRQyxJQUFJLGlCQUVaRCxRQUFRQyxJQUFJLFVBQ1pELFFBQVFDLElBQUkrQyxJQUdiRyxNQUFPLFNBQVVDLEVBQU9ILEVBQVlJLEdBYW5DLElBQUlDLEVBRUosR0FiQXRELFFBQVFDLElBQUksZUFFWkQsUUFBUUMsSUFBSSxXQUNaRCxRQUFRQyxJQUFJbUQsR0FFWnBELFFBQVFDLElBQUksZ0JBQ1pELFFBQVFDLElBQUlnRCxHQUVaakQsUUFBUUMsSUFBSSxpQkFDWkQsUUFBUUMsSUFBSW9ELFFBSXNCLElBQXZCRCxFQUFNRyxhQUE4QixDQUs5Q0QsRUFKcUJGLEVBQU1HLGFBQXlCLFdBSXhCLEtBSGZILEVBQU1HLGFBQW9CLE1BR0ssS0FGOUJILEVBQU1HLGFBQXNCLGFBSTFDRCxFQUFXRixFQUFNSSxhQUdsQkMsTUFBTSxXQUFhSCxJQUVwQkksU0FBVSxXQUVUMUQsUUFBUUMsSUFBSSxzQkFNZjBELGVBQWlCLEtBQ2hCLElBQUkxQixFQUFVLENBQ2IyQixLQUFRLFVBR1RwRSxFQUFFMEMsS0FBTTFDLEVBQUUsc0JBQXVCLFNBQVUyQyxFQUFLQyxHQUMvQyxJQUFJQyxFQUFVN0MsRUFBRTRDLEdBQUtqQyxLQUFLLE1BQ3RCbUMsRUFBUzlDLEVBQUU0QyxHQUFLckMsTUFFcEJrQyxFQUFRSSxHQUFXQyxJQUdwQnRDLFFBQVFDLElBQUlnQyxHQUVaLElBQUlNLEVBQVVDLEtBQUtDLFVBQVVSLEdBRTdCekMsRUFBRWtELEtBQUssQ0FDTkMsSUFBSyw4QkFDTEMsS0FBTSxPQUNOQyxZQUFhLG1CQUNiQyxLQUFNUCxFQUNOUSxRQUFTLFNBQVVDLEVBQU1DLEVBQVlDLEdBRXBDbEQsUUFBUUMsSUFBSSxpQkFFWkQsUUFBUUMsSUFBSSxVQUNaRCxRQUFRQyxJQUFJK0MsSUFHYkcsTUFBTyxTQUFVQyxFQUFPSCxFQUFZSSxHQWFuQyxJQUFJQyxFQUVKLEdBYkF0RCxRQUFRQyxJQUFJLGVBRVpELFFBQVFDLElBQUksV0FDWkQsUUFBUUMsSUFBSW1ELEdBRVpwRCxRQUFRQyxJQUFJLGdCQUNaRCxRQUFRQyxJQUFJZ0QsR0FFWmpELFFBQVFDLElBQUksaUJBQ1pELFFBQVFDLElBQUlvRCxRQUlzQixJQUF2QkQsRUFBTUcsYUFBOEIsQ0FLOUNELEVBSnFCRixFQUFNRyxhQUF5QixXQUl4QixLQUhmSCxFQUFNRyxhQUFvQixNQUdLLEtBRjlCSCxFQUFNRyxhQUFzQixhQUkxQ0QsRUFBV0YsRUFBTUksYUFHbEJDLE1BQU0sV0FBYUgsSUFFcEJJLFNBQVUsV0FFVDFELFFBQVFDLElBQUksc0JBTWY0RCxjQUFnQixLQUNmLElBQUk1QixFQUFVLENBQ2IyQixLQUFRLFNBR1RwRSxFQUFFMEMsS0FBTTFDLEVBQUUscUJBQXNCLFNBQVUyQyxFQUFLQyxHQUM5QyxJQUFJQyxFQUFVN0MsRUFBRTRDLEdBQUtqQyxLQUFLLE1BQ3RCbUMsRUFBUzlDLEVBQUU0QyxHQUFLckMsTUFFcEJrQyxFQUFRSSxHQUFXQyxJQUdwQnRDLFFBQVFDLElBQUlnQyxHQUVaLElBQUlNLEVBQVVDLEtBQUtDLFVBQVVSLEdBRTdCekMsRUFBRWtELEtBQUssQ0FDTkMsSUFBSyw4QkFDTEMsS0FBTSxPQUNOQyxZQUFhLG1CQUNiQyxLQUFNUCxFQUNOUSxRQUFTLFNBQVVDLEVBQU1DLEVBQVlDLEdBRXBDbEQsUUFBUUMsSUFBSSxpQkFFWkQsUUFBUUMsSUFBSSxVQUNaRCxRQUFRQyxJQUFJK0MsSUFHYkcsTUFBTyxTQUFVQyxFQUFPSCxFQUFZSSxHQWFuQyxJQUFJQyxFQUVKLEdBYkF0RCxRQUFRQyxJQUFJLGVBRVpELFFBQVFDLElBQUksV0FDWkQsUUFBUUMsSUFBSW1ELEdBRVpwRCxRQUFRQyxJQUFJLGdCQUNaRCxRQUFRQyxJQUFJZ0QsR0FFWmpELFFBQVFDLElBQUksaUJBQ1pELFFBQVFDLElBQUlvRCxRQUlzQixJQUF2QkQsRUFBTUcsYUFBOEIsQ0FLOUNELEVBSnFCRixFQUFNRyxhQUF5QixXQUl4QixLQUhmSCxFQUFNRyxhQUFvQixNQUdLLEtBRjlCSCxFQUFNRyxhQUFzQixhQUkxQ0QsRUFBV0YsRUFBTUksYUFHbEJDLE1BQU0sV0FBYUgsSUFFcEJJLFNBQVUsV0FFVDFELFFBQVFDLElBQUksd0JBS2JYIiwiZmlsZSI6ImpzL3NoYXJlZC9zaXRlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBzaXRlLmpzICovXHJcbnZhciBzaXRld2lkZSA9ICggdHlwZW9mIChzaXRld2lkZSkgPT09ICdvYmplY3QnICkgPyBzaXRld2lkZSA6IHt9O1xyXG4oc2l0ZXdpZGUgPSB7XHJcblx0aW5pdCA6ICgpID0+IHtcclxuXHRcdHNpdGV3aWRlLnRyYWNrX2NoYW5nZXNfYXV0aCgpO1xyXG5cclxuXHRcdC8qICQoJyNhdXRoX3B3X3NldCcpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggJCgnI2F1dGhfcHdfc2V0X2VtYWlsJykudmFsKCkgKSAhPT0gJycgJiYgJC50cmltKCAkKCcjYXV0aF9wd19zZXRfcHcnKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2l0ZXdpZGUubG9naW5fZG8oKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnbm90IHNvIHN1Ym1pdC4uLicpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7ICovXHJcblx0XHQvKiAkKCcjbG9naW4tZG8nKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0c2l0ZXdpZGUubG9naW5fZG8oKTtcclxuXHRcdH0pOyAqL1xyXG5cdFx0JCgnI2F1dGhfcHdfc2V0LCAjYXV0aF9sb2dpbicpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgIT09ICcnICkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWJtaXQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgZm9ybV9pcyA9ICQodGhpcykuYXR0cignaWQnKTtcclxuXHRcdFx0XHRzaXRld2lkZS5hdXRoX2RvKGZvcm1faXMpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdub3Qgc28gc3VibWl0Li4uJyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKiogTWVhZ2VyIGF0dGVtcHQgdG8gbWl0aWdhdGUgRk9VVCAqL1xyXG5cdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JCgnYm9keScpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcblx0XHR9LCAyMDApO1xyXG5cdH1cclxuXHQsXHJcblx0dHJhY2tfY2hhbmdlc19hdXRoIDogKCkgPT4ge1xyXG5cdFx0JCgnYm9keScpLm9uKCdpbnB1dCBjaGFuZ2UnLCAnLmF1dGhfZm9ybSBpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdHZhciBmbGRfZWwgPSAkKHRoaXMpWzBdO1xyXG5cdFx0XHR2YXIgZmxkX3ZhbCA9ICQodGhpcykudmFsKCk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1faWQgPSBmbGRfcGFyZW50Rm9ybS5hdHRyKCdpZCcpO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgPSBmYWxzZTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICggJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyogY29uc29sZS5sb2coJ2VtYWlsIHZhbGlkOicpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKCdwdyB2YWxpZCcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKTsgKi9cclxuXHJcblx0XHRcdGlmICggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1lbWFpbF0nKS5pcygnOnZhbGlkJykgJiYgZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5pcygnOnZhbGlkJykgKSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ICYmIGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfdmFsaWQpIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV92YWxpZCA9IHRydWU7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm0uZmluZCgnYnV0dG9uW3R5cGU9c3VibWl0XScpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiogRG8gc29tZSB2YWxpZGF0aW9uICovXHJcblx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoICQodGhpcykuYXR0cigndHlwZScpID09PSAnZW1haWwnICkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdnb25uYSB2YWxpZGF0ZSBhbiBlbWFpbCcpO1xyXG5cclxuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRpZiAoIHZhbGlkX2VtbCApIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnR29ubmEgbmVlZCBhIHZhbGlkIGVtYWlsIHRoZXJlLCBjaGllZi4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdwYXNzd29yZCcgKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ2dvbm5hIHZhbGlkYXRlIGEgcGFzc3dvcmQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgeyBcclxuXHRcdFx0XHRcdHZhbGlkX3B3LCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X2xlbmd0aCwgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGhfbXNnLCBcclxuXHRcdFx0XHRcdHZhbGlkX2Nhc2VzLCBcclxuXHRcdFx0XHRcdHZhbGlkX2Nhc2VzX21zZywgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyLCBcclxuXHRcdFx0XHRcdHZhbGlkX3B3X3NwY0NoYXJfbXNnIFxyXG5cdFx0XHRcdH0gPSB1dGlscy52YWxpZGF0ZV9wdyhmbGRfdmFsKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3ZhbGlkX3B3OiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh2YWxpZF9wdyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCB2YWxpZF9wdyApIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGxldCBjdXN0b21WYWxpZGF0aW9uTXNnID0gJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0LyogY29uc29sZS5sb2coJ3ZhbGlkX3B3X2xlbmd0aDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codmFsaWRfcHdfbGVuZ3RoKTsgKi9cclxuXHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfcHdfbGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnI2F1dGhfcHdfc2V0X2hpbnRfbWluTGVuZ3RoJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y3VzdG9tVmFsaWRhdGlvbk1zZyArPSB2YWxpZF9wd19sZW5ndGhfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcjYXV0aF9wd19zZXRfaGludF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0LyogY29uc29sZS5sb2coJ3ZhbGlkX2Nhc2VzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh2YWxpZF9jYXNlcyk7ICovXHJcblxyXG5cdFx0XHRcdGlmICggIXZhbGlkX2Nhc2VzICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnI2F1dGhfcHdfc2V0X2hpbnRfY2FzZXMnKS5yZW1vdmVDbGFzcygndmFsaWQnKS5hZGRDbGFzcygnaW52YWxpZCcpO1xyXG5cclxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfY2FzZXNfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcjYXV0aF9wd19zZXRfaGludF9jYXNlcycpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvKiBjb25zb2xlLmxvZygndmFsaWRfcHdfc3BjQ2hhcjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codmFsaWRfcHdfc3BjQ2hhcik7ICovXHJcblxyXG5cdFx0XHRcdGlmICggIXZhbGlkX3B3X3NwY0NoYXIgKSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcjYXV0aF9wd19zZXRfaGludF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X3NwY0NoYXJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcjYXV0aF9wd19zZXRfaGludF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGF0aW9uTXNnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyoqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9WYWxpZGl0eVN0YXRlICovXHJcblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwudmFsaWRpdHk6ICcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhmbGRfZWwudmFsaWRpdHkpOyAqL1xyXG5cdFx0XHQvKiBjb25zb2xlLmxvZygnZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC5jaGVja1ZhbGlkaXR5KCkpOyAqL1xyXG5cclxuXHRcdFx0LyoqIFRoaXMgZGVsaXZlcnMgdGhlIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2VzICovXHJcblx0XHRcdHZhciBmbGRfaXNWYWxpZCA9IGZsZF9lbC5jaGVja1ZhbGlkaXR5KCk7XHJcblxyXG5cdFx0XHRpZiAoIWZsZF9pc1ZhbGlkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpbnZhbGlkLiBmbGRfZWwudmFsaWRhdGlvbk1lc3NhZ2U6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdGbGQgaXMgdmFsaWQhJyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGF1dGhfZG8gOiAoZm9ybV9pcykgPT4ge1xyXG5cdFx0dmFyIGF1dGhfdGFzaztcclxuXHJcblx0XHRzd2l0Y2ggKGZvcm1faXMpIHtcclxuXHRcdFx0Y2FzZSAnYXV0aF9wd19zZXQnOlxyXG5cdFx0XHRcdGF1dGhfdGFzayA9ICdwd19zZXQnO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnYXV0aF9sb2dpbic6XHJcblx0XHRcdFx0YXV0aF90YXNrID0gJ2xvZ2luJztcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHR2YXIgcmVxX29iaiA9IHtcclxuXHRcdFx0J2F1dGhfdGFzayc6IGF1dGhfdGFza1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goICQoJyMnICsgZm9ybV9pcyArICcgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2RhdGEtYXV0aGZsZCcpO1xyXG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG0pLnZhbCgpO1xyXG5cclxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xyXG5cclxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XHJcblxyXG5cdFx0JC5hamF4KHtcclxuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcclxuXHRcdFx0dHlwZTogJ1BPU1QnLFxyXG5cdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxyXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApO1xyXG5cclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcclxuXHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGF1dGhfcHdfc2V0X2RvIDogKCkgPT4ge1xyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCd0YXNrJzogJ3B3X3NldCdcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRhbGVydCgnRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0YXV0aF9sb2dpbl9kbyA6ICgpID0+IHtcclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQndGFzayc6ICdsb2dpbidcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9sb2dpbiBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignaWQnKTtcclxuXHRcdFx0dmFyIGZsZFZhbCA9ICQoaXRtKS52YWwoKTtcclxuXHJcblx0XHRcdHJlcV9vYmpbZmxkTmFtZV0gPSBmbGRWYWw7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhyZXFfb2JqKTtcclxuXHJcblx0XHR2YXIgcmVxX3N0ciA9IEpTT04uc3RyaW5naWZ5KHJlcV9vYmopO1xyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogJy8ubmV0bGlmeS9mdW5jdGlvbnMvYXRfYXV0aCcsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0Y29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuXHRcdFx0ZGF0YTogcmVxX3N0cixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlc3AsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciBldmVudCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdqcVhIUjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygndGV4dFN0YXR1czogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codGV4dFN0YXR1cyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yVGhyb3duOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGVycl9kaXNwO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpxWEhSLnJlc3BvbnNlSlNPTiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdGxldCBlcnJfc3RhdHVzQ29kZSA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnc3RhdHVzQ29kZSddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9pcyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnZXJyb3InXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfbXNnID0ganFYSFIucmVzcG9uc2VKU09OWydtZXNzYWdlJ107XHJcblxyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBlcnJfc3RhdHVzQ29kZSArICdcXG4nICsgZXJyX2lzICsgJ1xcbicgKyBlcnJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGFsZXJ0KCdFcnJvcjpcXG4nICsgZXJyX2Rpc3ApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb21wbGV0ZSBldmVudCcpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
