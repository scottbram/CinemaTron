var sitewide="object"==typeof sitewide?sitewide:{};(sitewide={init:()=>{sitewide.track_changes_auth(),$("#auth_pw_set, #auth_login").on("submit",function(e){if(e.preventDefault(),""!==$.trim($(this).find("input[type=email]").val())&&""!==$.trim($(this).find("input[type=password]").val())){console.log("submit");let e=$(this).attr("id");sitewide.auth_do(e)}else console.log("not so submit...")}),window.setTimeout(function(){$("body").css("visibility","visible")},200)},auth_sesh_check:()=>new Promise((e,o)=>{$.ajax({url:"/.netlify/functions/at_auth",dataType:"json"}).done(function(o,s,t){console.log("auth_sesh_check resp: "),console.log(o),o.length>0&&e(o)}).fail(function(e,s,t){o(e,s,t)})}),track_changes_auth:()=>{$("body").on("input change",".auth_form input",function(e){var o=$(this)[0],s=$(this).val(),t=$(this).closest("form"),l=(t.attr("id"),!1),n=!1;if(o.setCustomValidity(""),"email"===$(this).attr("type")){let{valid_eml:e}=utils.validate_email(s);e?o.setCustomValidity(""):o.setCustomValidity("Gonna need a valid email there, chief.")}if("password"===$(this).attr("type")){let{valid_pw:e,valid_pw_length:l,valid_pw_length_msg:n,valid_ltrCases:i,valid_ltrCases_msg:a,valid_pw_spcChar:r,valid_pw_spcChar_msg:c}=utils.validate_pw(s);console.log("valid_pw: "),console.log(e),e&&o.setCustomValidity("");let d="";l?$(t).find(".validHelp_minLength").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_minLength").removeClass("valid").addClass("invalid"),d+=n),i?$(t).find(".validHelp_ltrCases").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_ltrCases").removeClass("valid").addClass("invalid"),d+=a),r?$(t).find(".validHelp_spcChar").removeClass("invalid").addClass("valid"):($(t).find(".validHelp_spcChar").removeClass("valid").addClass("invalid"),d+=c),o.setCustomValidity(d)}o.checkValidity()?console.log("Fld is valid!"):(console.log("Fld invalid. fld_el.validationMessage: "),console.log(o.validationMessage)),""!==$.trim(t.find("input[type=email]").val())&&""!==$.trim(t.find("input[type=password]").val())&&(l=!0),t.find("input[type=email]").is(":valid")&&t.find("input[type=password]").is(":valid")&&(n=!0),l&&n?(!0,t.find("button[type=submit]").attr("disabled",!1)):(!1,t.find("button[type=submit]").attr("disabled",!0))})},auth_do:e=>{var o;switch(e){case"auth_pw_set":o="auth_pw_set";break;case"auth_login":o="auth_login"}var s={auth_task:o};$.each($("#"+e+" input"),function(e,o){var t=$(o).attr("data-authfld"),l=$(o).val();s[t]=l}),console.log(s);var t=JSON.stringify(s);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:t,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){let o=e.responseJSON.statusCode;t=o+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message,401===o&&console.log("Communicate the specific authentication problem to user")}else t=e.responseText;console.error("Error:\n"+t)},complete:function(){console.log("complete event")}})},auth_pw_set_do:()=>{var e={task:"pw_set"};$.each($("#auth_pw_set input"),function(o,s){var t=$(s).attr("id"),l=$(s).val();e[t]=l}),console.log(e);var o=JSON.stringify(e);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:o,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){t=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else t=e.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})},auth_login_do:()=>{var e={task:"auth_login"};$.each($("#auth_login input"),function(o,s){var t=$(s).attr("id"),l=$(s).val();e[t]=l}),console.log(e);var o=JSON.stringify(e);$.ajax({url:"/.netlify/functions/at_auth",type:"POST",contentType:"application/json",data:o,success:function(e,o,s){console.log("success event"),console.log("resp: "),console.log(e)},error:function(e,o,s){var t;if(console.log("error event"),console.log("jqXHR: "),console.log(e),console.log("textStatus: "),console.log(o),console.log("errorThrown: "),console.log(s),void 0!==e.responseJSON){t=e.responseJSON.statusCode+"\n"+e.responseJSON.error+"\n"+e.responseJSON.message}else t=e.responseText;alert("Error:\n"+t)},complete:function(){console.log("complete event")}})}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NoYXJlZC9zaXRlLmpzIl0sIm5hbWVzIjpbInNpdGV3aWRlIiwiaW5pdCIsInRyYWNrX2NoYW5nZXNfYXV0aCIsIiQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJ0aGlzIiwiZmluZCIsInZhbCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtX2lzIiwiYXR0ciIsImF1dGhfZG8iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiY3NzIiwiYXV0aF9zZXNoX2NoZWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcCIsInRleHRTdGF0dXMiLCJqcVhIUiIsImxlbmd0aCIsImZhaWwiLCJlcnJvclRocm93biIsImZsZF9lbCIsImZsZF92YWwiLCJmbGRfcGFyZW50Rm9ybSIsImNsb3Nlc3QiLCJmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5IiwiZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCIsInNldEN1c3RvbVZhbGlkaXR5IiwidmFsaWRfZW1sIiwidXRpbHMiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkX3B3IiwidmFsaWRfcHdfbGVuZ3RoIiwidmFsaWRfcHdfbGVuZ3RoX21zZyIsInZhbGlkX2x0ckNhc2VzIiwidmFsaWRfbHRyQ2FzZXNfbXNnIiwidmFsaWRfcHdfc3BjQ2hhciIsInZhbGlkX3B3X3NwY0NoYXJfbXNnIiwidmFsaWRhdGVfcHciLCJjdXN0b21WYWxpZGF0aW9uTXNnIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNoZWNrVmFsaWRpdHkiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlzIiwiYXV0aF90YXNrIiwicmVxX29iaiIsImVhY2giLCJpZHgiLCJpdG0iLCJmbGROYW1lIiwiZmxkVmFsIiwicmVxX3N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJkYXRhIiwic3VjY2VzcyIsImpxWGhyIiwiZXJyb3IiLCJlcnJfZGlzcCIsInJlc3BvbnNlSlNPTiIsImVycl9zdGF0dXNDb2RlIiwicmVzcG9uc2VUZXh0IiwiY29tcGxldGUiLCJhdXRoX3B3X3NldF9kbyIsInRhc2siLCJhbGVydCIsImF1dGhfbG9naW5fZG8iXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLFNBQW1DLGlCQUFmLFNBQTRCQSxTQUFXLElBQzlEQSxTQUFXLENBQ1hDLEtBQU8sS0FDTkQsU0FBU0UscUJBbUJUQyxFQUFFLDZCQUE2QkMsR0FBRyxTQUFVLFNBQVVDLEdBR3JELEdBRkFBLEVBQUVDLGlCQUV5RCxLQUF0REgsRUFBRUksS0FBTUosRUFBRUssTUFBTUMsS0FBSyxxQkFBcUJDLFFBQTJFLEtBQXpEUCxFQUFFSSxLQUFNSixFQUFFSyxNQUFNQyxLQUFLLHdCQUF3QkMsT0FBaUIsQ0FFOUhDLFFBQVFDLElBQUksVUFFWixJQUFJQyxFQUFVVixFQUFFSyxNQUFNTSxLQUFLLE1BQzNCZCxTQUFTZSxRQUFRRixRQUdqQkYsUUFBUUMsSUFBSSxzQkFNZEksT0FBT0MsV0FBWSxXQUNsQmQsRUFBRSxRQUFRZSxJQUFJLGFBQWMsWUFDMUIsTUFHSkMsZ0JBQWtCLElBQ1YsSUFBSUMsUUFBUyxDQUFDQyxFQUFTQyxLQUM1Qm5CLEVBQUVvQixLQUFLLENBQ1BDLElBQUssOEJBQ0xDLFNBQVUsU0FDUkMsS0FBTSxTQUFXQyxFQUFNQyxFQUFZQyxHQUVyQ2xCLFFBQVFDLElBQUksMEJBQ1pELFFBQVFDLElBQUllLEdBRVJBLEVBQUtHLE9BQVMsR0FDakJULEVBQVFNLEtBRVBJLEtBQU0sU0FBV0YsRUFBT0QsRUFBWUksR0FDdENWLEVBQU9PLEVBQU9ELEVBQVlJLE9BSzdCOUIsbUJBQXFCLEtBQ3BCQyxFQUFFLFFBQVFDLEdBQUcsZUFBZ0IsbUJBQW9CLFNBQVVDLEdBQzFELElBQUk0QixFQUFTOUIsRUFBRUssTUFBTSxHQUNqQjBCLEVBQVUvQixFQUFFSyxNQUFNRSxNQUNsQnlCLEVBQWlCaEMsRUFBRUssTUFBTTRCLFFBQVEsUUFHakNDLEdBRm9C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ICovXHJcbnZhciBzaXRld2lkZSA9ICggdHlwZW9mIChzaXRld2lkZSkgPT09ICdvYmplY3QnICkgPyBzaXRld2lkZSA6IHt9O1xyXG4oc2l0ZXdpZGUgPSB7XHJcblx0aW5pdCA6ICgpID0+IHtcclxuXHRcdHNpdGV3aWRlLnRyYWNrX2NoYW5nZXNfYXV0aCgpO1xyXG5cclxuXHRcdC8qICQoJyNhdXRoX3B3X3NldCcpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggJCgnI2F1dGhfcHdfc2V0X2VtYWlsJykudmFsKCkgKSAhPT0gJycgJiYgJC50cmltKCAkKCcjYXV0aF9wd19zZXRfcHcnKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2l0ZXdpZGUubG9naW5fZG8oKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnbm90IHNvIHN1Ym1pdC4uLicpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0fSk7ICovXHJcblx0XHQvKiAkKCcjbG9naW4tZG8nKS5jbGljayggZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0c2l0ZXdpZGUubG9naW5fZG8oKTtcclxuXHRcdH0pOyAqL1xyXG5cdFx0JCgnI2F1dGhfcHdfc2V0LCAjYXV0aF9sb2dpbicpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRpZiAoICQudHJpbSggJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLnZhbCgpICkgIT09ICcnICkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWJtaXQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgZm9ybV9pcyA9ICQodGhpcykuYXR0cignaWQnKTtcclxuXHRcdFx0XHRzaXRld2lkZS5hdXRoX2RvKGZvcm1faXMpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdub3Qgc28gc3VibWl0Li4uJyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKiogTWVhZ2VyIGF0dGVtcHQgdG8gbWl0aWdhdGUgRk9VVCAqL1xyXG5cdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JCgnYm9keScpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcblx0XHR9LCAyMDApO1xyXG5cdH1cclxuXHQsXHJcblx0YXV0aF9zZXNoX2NoZWNrIDogKCkgPT4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbidcclxuXHRcdFx0fSkuZG9uZSggZnVuY3Rpb24gKCByZXNwLCB0ZXh0U3RhdHVzLCBqcVhIUiApIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2F1dGhfc2VzaF9jaGVjayByZXNwOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwKTtcclxuXHJcblx0XHRcdFx0aWYgKHJlc3AubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLmZhaWwoIGZ1bmN0aW9uICgganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHRcdHJlamVjdChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pXHJcblx0fVxyXG5cdCxcclxuXHR0cmFja19jaGFuZ2VzX2F1dGggOiAoKSA9PiB7XHJcblx0XHQkKCdib2R5Jykub24oJ2lucHV0IGNoYW5nZScsICcuYXV0aF9mb3JtIGlucHV0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIGZsZF9lbCA9ICQodGhpcylbMF07XHJcblx0XHRcdHZhciBmbGRfdmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0dmFyIGZsZF9wYXJlbnRGb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV9pZCA9IGZsZF9wYXJlbnRGb3JtLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRfcGFyZW50Rm9ybV92YWxpZCA9IGZhbHNlO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc19ub3RFbXB0eSA9IGZhbHNlO1xyXG5cdFx0XHR2YXIgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0LyoqIERvIHNvbWUgdmFsaWRhdGlvbiAqL1xyXG5cdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCAkKHRoaXMpLmF0dHIoJ3R5cGUnKSA9PT0gJ2VtYWlsJyApIHtcclxuXHRcdFx0XHRsZXQgeyB2YWxpZF9lbWwgfSA9IHV0aWxzLnZhbGlkYXRlX2VtYWlsKGZsZF92YWwpO1xyXG5cclxuXHRcdFx0XHRpZiAoIHZhbGlkX2VtbCApIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGZsZF9lbC5zZXRDdXN0b21WYWxpZGl0eSgnR29ubmEgbmVlZCBhIHZhbGlkIGVtYWlsIHRoZXJlLCBjaGllZi4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJCh0aGlzKS5hdHRyKCd0eXBlJykgPT09ICdwYXNzd29yZCcgKSB7XHJcblx0XHRcdFx0bGV0IHsgXHJcblx0XHRcdFx0XHR2YWxpZF9wdywgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19sZW5ndGgsIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfbGVuZ3RoX21zZywgXHJcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlcywgXHJcblx0XHRcdFx0XHR2YWxpZF9sdHJDYXNlc19tc2csIFxyXG5cdFx0XHRcdFx0dmFsaWRfcHdfc3BjQ2hhciwgXHJcblx0XHRcdFx0XHR2YWxpZF9wd19zcGNDaGFyX21zZyBcclxuXHRcdFx0XHR9ID0gdXRpbHMudmFsaWRhdGVfcHcoZmxkX3ZhbCk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd2YWxpZF9wdzogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2codmFsaWRfcHcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICggdmFsaWRfcHcgKSB7XHJcblx0XHRcdFx0XHRmbGRfZWwuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bGV0IGN1c3RvbVZhbGlkYXRpb25Nc2cgPSAnJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19sZW5ndGggKSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX21pbkxlbmd0aCcpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLmFkZENsYXNzKCdpbnZhbGlkJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGN1c3RvbVZhbGlkYXRpb25Nc2cgKz0gdmFsaWRfcHdfbGVuZ3RoX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9taW5MZW5ndGgnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhdmFsaWRfbHRyQ2FzZXMgKSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX2x0ckNhc2VzJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX2x0ckNhc2VzX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9sdHJDYXNlcycpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICF2YWxpZF9wd19zcGNDaGFyICkge1xyXG5cdFx0XHRcdFx0JChmbGRfcGFyZW50Rm9ybSkuZmluZCgnLnZhbGlkSGVscF9zcGNDaGFyJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcblx0XHRcdFx0XHRjdXN0b21WYWxpZGF0aW9uTXNnICs9IHZhbGlkX3B3X3NwY0NoYXJfbXNnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKGZsZF9wYXJlbnRGb3JtKS5maW5kKCcudmFsaWRIZWxwX3NwY0NoYXInKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZmxkX2VsLnNldEN1c3RvbVZhbGlkaXR5KGN1c3RvbVZhbGlkYXRpb25Nc2cpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1ZhbGlkaXR5U3RhdGUgKi9cclxuXHRcdFx0LyogY29uc29sZS5sb2coJ2ZsZF9lbC52YWxpZGl0eTogJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKGZsZF9lbC52YWxpZGl0eSk7ICovXHJcblx0XHRcdC8qIGNvbnNvbGUubG9nKCdmbGRfZWwuY2hlY2tWYWxpZGl0eSgpOiAnKTtcclxuXHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLmNoZWNrVmFsaWRpdHkoKSk7ICovXHJcblxyXG5cdFx0XHQvKiogVGhpcyBkZWxpdmVycyB0aGUgY3VzdG9tIHZhbGlkYXRpb24gbWVzc2FnZXMgKi9cclxuXHRcdFx0dmFyIGZsZF9pc1ZhbGlkID0gZmxkX2VsLmNoZWNrVmFsaWRpdHkoKTtcclxuXHJcblx0XHRcdGlmICghZmxkX2lzVmFsaWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnRmxkIGludmFsaWQuIGZsZF9lbC52YWxpZGF0aW9uTWVzc2FnZTogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZmxkX2VsLnZhbGlkYXRpb25NZXNzYWdlKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0ZsZCBpcyB2YWxpZCEnKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJC50cmltKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCgpICkgIT09ICcnICYmICQudHJpbSggZmxkX3BhcmVudEZvcm0uZmluZCgnaW5wdXRbdHlwZT1wYXNzd29yZF0nKS52YWwoKSApICE9PSAnJyApIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX25vdEVtcHR5ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLmlzKCc6dmFsaWQnKSAmJiBmbGRfcGFyZW50Rm9ybS5maW5kKCdpbnB1dFt0eXBlPXBhc3N3b3JkXScpLmlzKCc6dmFsaWQnKSApIHtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybV9hbGxGbGRzX3ZhbGlkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGZsZF9wYXJlbnRGb3JtX2FsbEZsZHNfbm90RW1wdHkgJiYgZmxkX3BhcmVudEZvcm1fYWxsRmxkc192YWxpZCkge1xyXG5cdFx0XHRcdGZsZF9wYXJlbnRGb3JtX3ZhbGlkID0gdHJ1ZTtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybS5maW5kKCdidXR0b25bdHlwZT1zdWJtaXRdJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZmxkX3BhcmVudEZvcm1fdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0XHRmbGRfcGFyZW50Rm9ybS5maW5kKCdidXR0b25bdHlwZT1zdWJtaXRdJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRhdXRoX2RvIDogKGZvcm1faXMpID0+IHtcclxuXHRcdHZhciBhdXRoX3Rhc2s7XHJcblxyXG5cdFx0c3dpdGNoIChmb3JtX2lzKSB7XHJcblx0XHRcdGNhc2UgJ2F1dGhfcHdfc2V0JzpcclxuXHRcdFx0XHRhdXRoX3Rhc2sgPSAnYXV0aF9wd19zZXQnO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnYXV0aF9sb2dpbic6XHJcblx0XHRcdFx0YXV0aF90YXNrID0gJ2F1dGhfbG9naW4nO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQnYXV0aF90YXNrJzogYXV0aF90YXNrXHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZWFjaCggJCgnIycgKyBmb3JtX2lzICsgJyBpbnB1dCcpLCBmdW5jdGlvbiAoaWR4LCBpdG0pIHtcclxuXHRcdFx0dmFyIGZsZE5hbWUgPSAkKGl0bSkuYXR0cignZGF0YS1hdXRoZmxkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHJcblx0XHRcdFx0XHRpZiAoZXJyX3N0YXR1c0NvZGUgPT09IDQwMSkge1xyXG5cdFx0XHRcdFx0XHQvKiogVGhlIHVzZXIgZW50ZXJlZCBpbnZhbGlkIGNyZWRlbnRpYWxzICovXHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnQ29tbXVuaWNhdGUgdGhlIHNwZWNpZmljIGF1dGhlbnRpY2F0aW9uIHByb2JsZW0gdG8gdXNlcicpXHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0LFxyXG5cdGF1dGhfcHdfc2V0X2RvIDogKCkgPT4ge1xyXG5cdFx0dmFyIHJlcV9vYmogPSB7XHJcblx0XHRcdCd0YXNrJzogJ3B3X3NldCdcclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKCAkKCcjYXV0aF9wd19zZXQgaW5wdXQnKSwgZnVuY3Rpb24gKGlkeCwgaXRtKSB7XHJcblx0XHRcdHZhciBmbGROYW1lID0gJChpdG0pLmF0dHIoJ2lkJyk7XHJcblx0XHRcdHZhciBmbGRWYWwgPSAkKGl0bSkudmFsKCk7XHJcblxyXG5cdFx0XHRyZXFfb2JqW2ZsZE5hbWVdID0gZmxkVmFsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2cocmVxX29iaik7XHJcblxyXG5cdFx0dmFyIHJlcV9zdHIgPSBKU09OLnN0cmluZ2lmeShyZXFfb2JqKTtcclxuXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6ICcvLm5ldGxpZnkvZnVuY3Rpb25zL2F0X2F1dGgnLFxyXG5cdFx0XHR0eXBlOiAnUE9TVCcsXHJcblx0XHRcdGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHRcdGRhdGE6IHJlcV9zdHIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwLCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcyBldmVudCcpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVzcDogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcCk7XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgZXZlbnQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnanFYSFI6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3RleHRTdGF0dXM6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRleHRTdGF0dXMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvclRocm93bjogJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBlcnJfZGlzcDtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqcVhIUi5yZXNwb25zZUpTT04gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRsZXQgZXJyX3N0YXR1c0NvZGUgPSBqcVhIUi5yZXNwb25zZUpTT05bJ3N0YXR1c0NvZGUnXTtcclxuXHRcdFx0XHRcdGxldCBlcnJfaXMgPSBqcVhIUi5yZXNwb25zZUpTT05bJ2Vycm9yJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX21zZyA9IGpxWEhSLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddO1xyXG5cclxuXHRcdFx0XHRcdGVycl9kaXNwID0gZXJyX3N0YXR1c0NvZGUgKyAnXFxuJyArIGVycl9pcyArICdcXG4nICsgZXJyX21zZztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZXJyX2Rpc3AgPSBqcVhIUi5yZXNwb25zZVRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRhbGVydCgnRXJyb3I6XFxuJyArIGVycl9kaXNwKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29tcGxldGUgZXZlbnQnKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHQsXHJcblx0YXV0aF9sb2dpbl9kbyA6ICgpID0+IHtcclxuXHRcdHZhciByZXFfb2JqID0ge1xyXG5cdFx0XHQndGFzayc6ICdhdXRoX2xvZ2luJ1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goICQoJyNhdXRoX2xvZ2luIGlucHV0JyksIGZ1bmN0aW9uIChpZHgsIGl0bSkge1xyXG5cdFx0XHR2YXIgZmxkTmFtZSA9ICQoaXRtKS5hdHRyKCdpZCcpO1xyXG5cdFx0XHR2YXIgZmxkVmFsID0gJChpdG0pLnZhbCgpO1xyXG5cclxuXHRcdFx0cmVxX29ialtmbGROYW1lXSA9IGZsZFZhbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKHJlcV9vYmopO1xyXG5cclxuXHRcdHZhciByZXFfc3RyID0gSlNPTi5zdHJpbmdpZnkocmVxX29iaik7XHJcblxyXG5cdFx0JC5hamF4KHtcclxuXHRcdFx0dXJsOiAnLy5uZXRsaWZ5L2Z1bmN0aW9ucy9hdF9hdXRoJyxcclxuXHRcdFx0dHlwZTogJ1BPU1QnLFxyXG5cdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdFx0XHRkYXRhOiByZXFfc3RyLFxyXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MgZXZlbnQnKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Jlc3A6ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlc3ApO1xyXG5cclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIGV2ZW50Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2pxWEhSOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd0ZXh0U3RhdHVzOiAnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZXh0U3RhdHVzKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3JUaHJvd246ICcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZXJyX2Rpc3A7XHJcblxyXG5cdFx0XHRcdGlmICh0eXBlb2YganFYSFIucmVzcG9uc2VKU09OICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0bGV0IGVycl9zdGF0dXNDb2RlID0ganFYSFIucmVzcG9uc2VKU09OWydzdGF0dXNDb2RlJ107XHJcblx0XHRcdFx0XHRsZXQgZXJyX2lzID0ganFYSFIucmVzcG9uc2VKU09OWydlcnJvciddO1xyXG5cdFx0XHRcdFx0bGV0IGVycl9tc2cgPSBqcVhIUi5yZXNwb25zZUpTT05bJ21lc3NhZ2UnXTtcclxuXHJcblx0XHRcdFx0XHRlcnJfZGlzcCA9IGVycl9zdGF0dXNDb2RlICsgJ1xcbicgKyBlcnJfaXMgKyAnXFxuJyArIGVycl9tc2c7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVycl9kaXNwID0ganFYSFIucmVzcG9uc2VUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YWxlcnQoJ0Vycm9yOlxcbicgKyBlcnJfZGlzcCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NvbXBsZXRlIGV2ZW50Jyk7XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pLmluaXQoKTtcclxuIl19
